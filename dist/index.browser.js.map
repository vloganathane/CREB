{"version":3,"file":"index.browser.js","sources":["../src/constants.ts","../src/core/errors/CREBError.ts","../src/utils.ts","../node_modules/reflect-metadata/Reflect.js","../src/core/decorators/Injectable.ts","../src/balancer.ts","../src/stoichiometry.ts","../src/advancedTypes.ts","../src/enhancedBalancerSimple.ts","../src/performance/cache/EvictionPolicies.ts","../src/performance/cache/CacheMetrics.ts","../src/performance/cache/AdvancedCache.ts","../src/data/validation/types.ts","../src/data/validation/validators/BaseValidator.ts","../src/data/validation/validators/ChemicalFormulaValidator.ts","../src/data/validation/metrics/ValidationMetricsDashboard.ts","../src/data/validation/index.ts","../src/enhancedBalancer.ts","../src/visualization/Molecular2DGenerator.ts","../src/visualization/Canvas2DRenderer.ts","../src/visualization/SVGRenderer.ts","../src/visualization/SimplifiedMolecularVisualization.ts","../src/index.browser.ts"],"sourcesContent":["/**\n * Chemical elements and their atomic masses\n * Data from the original CREB project's Assets.py\n */\n\nexport const ELEMENTS_LIST: string[] = [\n  'H', 'He', 'Li', 'Be', 'B', 'C', 'N', 'O', 'F', 'Ne',\n  'Na', 'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca',\n  'Sc', 'Ti', 'V', 'Cr', 'Mn', 'Fe', 'Co', 'Ni', 'Cu', 'Zn',\n  'Ga', 'Ge', 'As', 'Se', 'Br', 'Kr', 'Rb', 'Sr', 'Y', 'Zr',\n  'Nb', 'Mo', 'Tc', 'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn',\n  'Sb', 'Te', 'I', 'Xe', 'Cs', 'Ba', 'La', 'Ce', 'Pr', 'Nd',\n  'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb',\n  'Lu', 'Hf', 'Ta', 'W', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg',\n  'Tl', 'Pb', 'Bi', 'Po', 'At', 'Rn', 'Fr', 'Ra', 'Ac', 'Th',\n  'Pa', 'U', 'Np', 'Pu', 'Am', 'Cm', 'Bk', 'Cf', 'Es', 'Fm',\n  'Md', 'No', 'Lr', 'Rf', 'Db', 'Sg', 'Bh', 'Hs', 'Mt', 'Ds',\n  'Rg', 'Cn', 'Nh', 'Fl', 'Mc', 'Lv', 'Ts', 'Og'\n];\n\nexport const PERIODIC_TABLE: Record<string, number> = {\n  'H': 1.008,\n  'He': 4.0026,\n  'Li': 6.94,\n  'Be': 9.0122,\n  'B': 10.81,\n  'C': 12.011,\n  'N': 14.007,\n  'O': 15.999,\n  'F': 18.998,\n  'Ne': 20.18,\n  'Na': 22.99,\n  'Mg': 24.305,\n  'Al': 26.982,\n  'Si': 28.085,\n  'P': 30.974,\n  'S': 32.06,\n  'Cl': 35.45,\n  'Ar': 39.948,\n  'K': 39.098,\n  'Ca': 40.078,\n  'Sc': 44.956,\n  'Ti': 47.867,\n  'V': 50.942,\n  'Cr': 51.996,\n  'Mn': 54.938,\n  'Fe': 55.845,\n  'Co': 58.933,\n  'Ni': 58.693,\n  'Cu': 63.546,\n  'Zn': 65.38,\n  'Ga': 69.723,\n  'Ge': 72.63,\n  'As': 74.922,\n  'Se': 78.971,\n  'Br': 79.904,\n  'Kr': 83.798,\n  'Rb': 85.468,\n  'Sr': 87.62,\n  'Y': 88.906,\n  'Zr': 91.224,\n  'Nb': 92.906,\n  'Mo': 95.95,\n  'Tc': 98.0,\n  'Ru': 101.07,\n  'Rh': 102.91,\n  'Pd': 106.42,\n  'Ag': 107.87,\n  'Cd': 112.41,\n  'In': 114.82,\n  'Sn': 118.71,\n  'Sb': 121.76,\n  'Te': 127.6,\n  'I': 126.9,\n  'Xe': 131.29,\n  'Cs': 132.91,\n  'Ba': 137.33,\n  'La': 138.91,\n  'Ce': 140.12,\n  'Pr': 140.91,\n  'Nd': 144.24,\n  'Pm': 145.0,\n  'Sm': 150.36,\n  'Eu': 151.96,\n  'Gd': 157.25,\n  'Tb': 158.93,\n  'Dy': 162.5,\n  'Ho': 164.93,\n  'Er': 167.26,\n  'Tm': 168.93,\n  'Yb': 173.04,\n  'Lu': 175.0,\n  'Hf': 178.49,\n  'Ta': 180.95,\n  'W': 183.84,\n  'Re': 186.21,\n  'Os': 190.23,\n  'Ir': 192.22,\n  'Pt': 195.08,\n  'Au': 196.97,\n  'Hg': 200.59,\n  'Tl': 204.38,\n  'Pb': 207.2,\n  'Bi': 208.98,\n  'Po': 209.0,\n  'At': 210.0,\n  'Rn': 222.0,\n  'Fr': 223.0,\n  'Ra': 226.0,\n  'Ac': 227.0,\n  'Th': 232.04,\n  'Pa': 231.04,\n  'U': 238.03,\n  'Np': 237.0,\n  'Pu': 244.0,\n  'Am': 243.0,\n  'Cm': 247.0,\n  'Bk': 247.0,\n  'Cf': 251.0,\n  'Es': 252.0,\n  'Fm': 257.0,\n  'Md': 258.0,\n  'No': 259.0,\n  'Lr': 262.0,\n  'Rf': 267.0,\n  'Db': 270.0,\n  'Sg': 271.0,\n  'Bh': 270.0,\n  'Hs': 277.0,\n  'Mt': 276.0,\n  'Ds': 281.0,\n  'Rg': 282.0,\n  'Cn': 285.0,\n  'Nh': 286.0,\n  'Fl': 289.0,\n  'Mc': 290.0,\n  'Lv': 293.0,\n  'Ts': 294.0,\n  'Og': 294.0\n};\n\nexport const PARAMETER_SYMBOLS = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n","/**\n * Enhanced Error Handling for CREB-JS\n * Provides structured error types with context, stack traces, and error classification\n */\n\nexport enum ErrorCategory {\n  VALIDATION = 'VALIDATION',\n  NETWORK = 'NETWORK',\n  COMPUTATION = 'COMPUTATION',\n  DATA = 'DATA',\n  SYSTEM = 'SYSTEM',\n  EXTERNAL_API = 'EXTERNAL_API',\n  TIMEOUT = 'TIMEOUT',\n  RATE_LIMIT = 'RATE_LIMIT',\n  AUTHENTICATION = 'AUTHENTICATION',\n  PERMISSION = 'PERMISSION'\n}\n\nexport enum ErrorSeverity {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH',\n  CRITICAL = 'CRITICAL'\n}\n\nexport interface ErrorContext {\n  [key: string]: any;\n  timestamp?: Date;\n  correlationId?: string;\n  userId?: string;\n  operation?: string;\n  component?: string;\n  version?: string;\n}\n\nexport interface ErrorMetadata {\n  category: ErrorCategory;\n  severity: ErrorSeverity;\n  retryable: boolean;\n  errorCode: string;\n  correlationId: string;\n  context: ErrorContext;\n  timestamp: Date;\n  stackTrace?: string;\n  innerError?: Error;\n  sugggestedAction?: string;\n}\n\n/**\n * Base CREB Error class with enhanced context and metadata\n */\nexport class CREBError extends Error {\n  public readonly metadata: ErrorMetadata;\n\n  constructor(\n    message: string,\n    category: ErrorCategory,\n    severity: ErrorSeverity = ErrorSeverity.MEDIUM,\n    context: ErrorContext = {},\n    options: {\n      retryable?: boolean;\n      errorCode?: string;\n      correlationId?: string;\n      innerError?: Error;\n      suggestedAction?: string;\n    } = {}\n  ) {\n    super(message);\n    this.name = 'CREBError';\n\n    // Ensure proper prototype chain for instanceof checks\n    Object.setPrototypeOf(this, CREBError.prototype);\n\n    this.metadata = {\n      category,\n      severity,\n      retryable: options.retryable ?? this.isRetryableByDefault(category),\n      errorCode: options.errorCode ?? this.generateErrorCode(category),\n      correlationId: options.correlationId ?? this.generateCorrelationId(),\n      context: {\n        ...context,\n        timestamp: new Date(),\n        version: '1.6.0'\n      },\n      timestamp: new Date(),\n      stackTrace: this.stack,\n      innerError: options.innerError,\n      sugggestedAction: options.suggestedAction\n    };\n\n    // Capture stack trace for V8 engines\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CREBError);\n    }\n  }\n\n  /**\n   * Serialize error for logging and telemetry\n   */\n  public toJSON(): Record<string, any> {\n    return {\n      name: this.name,\n      message: this.message,\n      metadata: {\n        ...this.metadata,\n        innerError: this.metadata.innerError?.message\n      }\n    };\n  }\n\n  /**\n   * Create a sanitized version for client-side consumption\n   */\n  public toClientSafe(): Record<string, any> {\n    return {\n      message: this.message,\n      category: this.metadata.category,\n      severity: this.metadata.severity,\n      errorCode: this.metadata.errorCode,\n      correlationId: this.metadata.correlationId,\n      retryable: this.metadata.retryable,\n      suggestedAction: this.metadata.sugggestedAction\n    };\n  }\n\n  /**\n   * Check if error is retryable based on category and context\n   */\n  public isRetryable(): boolean {\n    return this.metadata.retryable;\n  }\n\n  /**\n   * Get human-readable error description\n   */\n  public getDescription(): string {\n    const parts = [\n      `[${this.metadata.category}:${this.metadata.severity}]`,\n      this.message\n    ];\n\n    if (this.metadata.sugggestedAction) {\n      parts.push(`Suggestion: ${this.metadata.sugggestedAction}`);\n    }\n\n    return parts.join(' ');\n  }\n\n  private isRetryableByDefault(category: ErrorCategory): boolean {\n    const retryableCategories = [\n      ErrorCategory.NETWORK,\n      ErrorCategory.TIMEOUT,\n      ErrorCategory.RATE_LIMIT,\n      ErrorCategory.EXTERNAL_API\n    ];\n    return retryableCategories.includes(category);\n  }\n\n  private generateErrorCode(category: ErrorCategory): string {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).substring(2, 8);\n    return `${category}_${timestamp}_${random}`.toUpperCase();\n  }\n\n  private generateCorrelationId(): string {\n    return `creb_${Date.now()}_${Math.random().toString(36).substring(2, 12)}`;\n  }\n}\n\n/**\n * Validation Error - for input validation failures\n */\nexport class ValidationError extends CREBError {\n  constructor(\n    message: string,\n    context: ErrorContext = {},\n    options: { field?: string; value?: any; constraint?: string } = {}\n  ) {\n    super(\n      message,\n      ErrorCategory.VALIDATION,\n      ErrorSeverity.MEDIUM,\n      {\n        ...context,\n        field: options.field,\n        value: options.value,\n        constraint: options.constraint\n      },\n      {\n        retryable: false,\n        suggestedAction: 'Please check the input parameters and try again'\n      }\n    );\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * Network Error - for network-related failures\n */\nexport class NetworkError extends CREBError {\n  constructor(\n    message: string,\n    context: ErrorContext = {},\n    options: { \n      statusCode?: number; \n      url?: string; \n      method?: string;\n      timeout?: number;\n    } = {}\n  ) {\n    super(\n      message,\n      ErrorCategory.NETWORK,\n      ErrorSeverity.HIGH,\n      {\n        ...context,\n        statusCode: options.statusCode,\n        url: options.url,\n        method: options.method,\n        timeout: options.timeout\n      },\n      {\n        retryable: true,\n        suggestedAction: 'Check network connectivity and try again'\n      }\n    );\n    this.name = 'NetworkError';\n  }\n}\n\n/**\n * External API Error - for third-party API failures\n */\nexport class ExternalAPIError extends CREBError {\n  constructor(\n    message: string,\n    apiName: string,\n    context: ErrorContext = {},\n    options: {\n      statusCode?: number;\n      responseBody?: string;\n      endpoint?: string;\n      rateLimited?: boolean;\n    } = {}\n  ) {\n    const severity = options.rateLimited ? ErrorSeverity.MEDIUM : ErrorSeverity.HIGH;\n    const category = options.rateLimited ? ErrorCategory.RATE_LIMIT : ErrorCategory.EXTERNAL_API;\n    \n    super(\n      message,\n      category,\n      severity,\n      {\n        ...context,\n        apiName,\n        statusCode: options.statusCode,\n        responseBody: options.responseBody,\n        endpoint: options.endpoint\n      },\n      {\n        retryable: options.rateLimited || (!!options.statusCode && options.statusCode >= 500),\n        suggestedAction: options.rateLimited \n          ? 'Rate limit exceeded. Please wait before retrying'\n          : 'External service unavailable. Please try again later'\n      }\n    );\n    this.name = 'ExternalAPIError';\n  }\n}\n\n/**\n * Computation Error - for calculation failures\n */\nexport class ComputationError extends CREBError {\n  constructor(\n    message: string,\n    context: ErrorContext = {},\n    options: {\n      algorithm?: string;\n      input?: any;\n      expectedRange?: string;\n    } = {}\n  ) {\n    super(\n      message,\n      ErrorCategory.COMPUTATION,\n      ErrorSeverity.MEDIUM,\n      {\n        ...context,\n        algorithm: options.algorithm,\n        input: options.input,\n        expectedRange: options.expectedRange\n      },\n      {\n        retryable: false,\n        suggestedAction: 'Please verify input parameters and calculation constraints'\n      }\n    );\n    this.name = 'ComputationError';\n  }\n}\n\n/**\n * System Error - for internal system failures\n */\nexport class SystemError extends CREBError {\n  constructor(\n    message: string,\n    context: ErrorContext = {},\n    options: {\n      subsystem?: string;\n      resource?: string;\n    } = {}\n  ) {\n    super(\n      message,\n      ErrorCategory.SYSTEM,\n      ErrorSeverity.CRITICAL,\n      {\n        ...context,\n        subsystem: options.subsystem,\n        resource: options.resource\n      },\n      {\n        retryable: false,\n        suggestedAction: 'Internal system error. Please contact support'\n      }\n    );\n    this.name = 'SystemError';\n  }\n}\n\n/**\n * Error aggregation utility for collecting and analyzing multiple errors\n */\nexport class ErrorAggregator {\n  private errors: CREBError[] = [];\n  private readonly maxErrors: number;\n\n  constructor(maxErrors: number = 100) {\n    this.maxErrors = maxErrors;\n  }\n\n  /**\n   * Add an error to the aggregator\n   */\n  public addError(error: CREBError): void {\n    this.errors.push(error);\n    \n    // Keep only the most recent errors\n    if (this.errors.length > this.maxErrors) {\n      this.errors.shift();\n    }\n  }\n\n  /**\n   * Get errors by category\n   */\n  public getErrorsByCategory(category: ErrorCategory): CREBError[] {\n    return this.errors.filter(error => error.metadata.category === category);\n  }\n\n  /**\n   * Get errors by severity\n   */\n  public getErrorsBySeverity(severity: ErrorSeverity): CREBError[] {\n    return this.errors.filter(error => error.metadata.severity === severity);\n  }\n\n  /**\n   * Get error statistics\n   */\n  public getStatistics(): {\n    total: number;\n    byCategory: Record<ErrorCategory, number>;\n    bySeverity: Record<ErrorSeverity, number>;\n    retryableCount: number;\n    recentErrors: CREBError[];\n  } {\n    const byCategory = {} as Record<ErrorCategory, number>;\n    const bySeverity = {} as Record<ErrorSeverity, number>;\n    let retryableCount = 0;\n\n    // Initialize counters\n    Object.values(ErrorCategory).forEach(cat => byCategory[cat] = 0);\n    Object.values(ErrorSeverity).forEach(sev => bySeverity[sev] = 0);\n\n    // Count errors\n    this.errors.forEach(error => {\n      byCategory[error.metadata.category]++;\n      bySeverity[error.metadata.severity]++;\n      if (error.isRetryable()) {\n        retryableCount++;\n      }\n    });\n\n    return {\n      total: this.errors.length,\n      byCategory,\n      bySeverity,\n      retryableCount,\n      recentErrors: this.errors.slice(-10) // Last 10 errors\n    };\n  }\n\n  /**\n   * Clear all collected errors\n   */\n  public clear(): void {\n    this.errors = [];\n  }\n\n  /**\n   * Get all errors as JSON for logging\n   */\n  public toJSON(): Record<string, any>[] {\n    return this.errors.map(error => error.toJSON());\n  }\n}\n\n/**\n * Utility functions for error handling\n */\nexport class ErrorUtils {\n  /**\n   * Wrap a function with error handling and transformation\n   */\n  static withErrorHandling<T extends any[], R>(\n    fn: (...args: T) => R,\n    errorTransformer?: (error: any) => CREBError\n  ): (...args: T) => R {\n    return (...args: T): R => {\n      try {\n        return fn(...args);\n      } catch (error) {\n        throw errorTransformer ? errorTransformer(error) : ErrorUtils.transformUnknownError(error);\n      }\n    };\n  }\n\n  /**\n   * Wrap an async function with error handling and transformation\n   */\n  static withAsyncErrorHandling<T extends any[], R>(\n    fn: (...args: T) => Promise<R>,\n    errorTransformer?: (error: any) => CREBError\n  ): (...args: T) => Promise<R> {\n    return async (...args: T): Promise<R> => {\n      try {\n        return await fn(...args);\n      } catch (error) {\n        throw errorTransformer ? errorTransformer(error) : ErrorUtils.transformUnknownError(error);\n      }\n    };\n  }\n\n  /**\n   * Transform unknown errors into CREBError instances\n   */\n  static transformUnknownError(error: any): CREBError {\n    if (error instanceof CREBError) {\n      return error;\n    }\n\n    if (error instanceof Error) {\n      return new SystemError(\n        error.message,\n        { originalError: error.name },\n        { subsystem: 'unknown' }\n      );\n    }\n\n    return new SystemError(\n      typeof error === 'string' ? error : 'Unknown error occurred',\n      { originalError: error }\n    );\n  }\n\n  /**\n   * Check if an error indicates a transient failure\n   */\n  static isTransientError(error: any): boolean {\n    if (error instanceof CREBError) {\n      return error.isRetryable();\n    }\n\n    // Common patterns for transient errors\n    const transientPatterns = [\n      /timeout/i,\n      /connection/i,\n      /network/i,\n      /503/,\n      /502/,\n      /504/,\n      /rate limit/i\n    ];\n\n    const message = error?.message || String(error);\n    return transientPatterns.some(pattern => pattern.test(message));\n  }\n}\n","import { PERIODIC_TABLE } from './constants';\nimport { ElementCount } from './types';\nimport { ValidationError } from './core/errors/CREBError';\n\n/**\n * Utility functions for chemical formula parsing and calculations\n */\n\n/**\n * Counts elements in a chemical formula\n * Based on the ElementCounter class from the original CREB project\n */\nexport class ElementCounter {\n  private formula: string;\n\n  constructor(chemicalFormula: string) {\n    this.formula = chemicalFormula;\n  }\n\n  /**\n   * Parses the chemical formula and returns element counts\n   * Handles parentheses and multipliers\n   */\n  parseFormula(): ElementCount {\n    let formula = this.formula;\n    \n    // Expand parentheses\n    while (formula.includes('(')) {\n      formula = formula.replace(/\\(([^()]+)\\)(\\d*)/g, (match, group, multiplier) => {\n        const mult = multiplier ? parseInt(multiplier) : 1;\n        return this.expandGroup(group, mult);\n      });\n    }\n\n    // Count elements\n    const elementCounts: ElementCount = {};\n    const matches = formula.match(/([A-Z][a-z]*)(\\d*)/g) || [];\n    \n    for (const match of matches) {\n      const elementMatch = match.match(/([A-Z][a-z]*)(\\d*)/);\n      if (elementMatch) {\n        const element = elementMatch[1];\n        const count = elementMatch[2] ? parseInt(elementMatch[2]) : 1;\n        elementCounts[element] = (elementCounts[element] || 0) + count;\n      }\n    }\n\n    return elementCounts;\n  }\n\n  private expandGroup(group: string, multiplier: number): string {\n    const matches = group.match(/([A-Z][a-z]*)(\\d*)/g) || [];\n    let expanded = '';\n    \n    for (const match of matches) {\n      const elementMatch = match.match(/([A-Z][a-z]*)(\\d*)/);\n      if (elementMatch) {\n        const element = elementMatch[1];\n        const count = elementMatch[2] ? parseInt(elementMatch[2]) : 1;\n        const newCount = count * multiplier;\n        expanded += element + (newCount > 1 ? newCount : '');\n      }\n    }\n    \n    return expanded;\n  }\n}\n\n/**\n * Parses a chemical equation into reactants and products\n * Based on the EquationParser class from the original CREB project\n */\nexport class EquationParser {\n  private equation: string;\n  private equationSplitter = '=';\n  private speciesSplitter = '+';\n\n  constructor(chemicalEquation: string) {\n    this.equation = chemicalEquation.replace(/\\s/g, ''); // Remove all spaces\n  }\n\n  /**\n   * Parses the equation and returns structured data\n   */\n  parse() {\n    const { reactants, products } = this.splitIntoSpecies();\n    const parsedReactants = this.parseSpecies(reactants);\n    const parsedProducts = this.parseSpecies(products);\n\n    return {\n      reactants,\n      products,\n      parsedReactants,\n      parsedProducts\n    };\n  }\n\n  private splitIntoSpecies() {\n    // Check if equation is empty or only whitespace\n    if (!this.equation || this.equation.length === 0) {\n      throw new ValidationError(\n        'Empty equation provided. Please enter a valid chemical equation.',\n        { equation: this.equation, operation: 'equation_parsing' }\n      );\n    }\n    \n    const sides = this.equation.split(this.equationSplitter);\n    if (sides.length !== 2) {\n      throw new ValidationError(\n        'Invalid equation format. Must contain exactly one \"=\" sign.',\n        { equation: this.equation, sides: sides.length, operation: 'equation_parsing' }\n      );\n    }\n    \n    // Check if either side is empty\n    if (!sides[0].trim() || !sides[1].trim()) {\n      throw new ValidationError(\n        'Both sides of the equation must contain chemical species.',\n        { equation: this.equation, leftSide: sides[0], rightSide: sides[1], operation: 'equation_parsing' }\n      );\n    }\n\n    const cleanSpecies = (speciesString: string): string[] => {\n      return speciesString.split(this.speciesSplitter)\n        .map(species => species.trim())\n        .filter(species => species.length > 0)\n        .map(species => {\n          // Remove existing coefficients (numbers at the beginning)\n          return species.replace(/^\\d+\\s*/, '');\n        });\n    };\n\n    const reactants = cleanSpecies(sides[0]);\n    const products = cleanSpecies(sides[1]);\n\n    return { reactants, products };\n  }\n\n  private parseSpecies(species: string[]) {\n    const parsed: { [species: string]: ElementCount } = {};\n    \n    for (const specie of species) {\n      const counter = new ElementCounter(specie);\n      parsed[specie] = counter.parseFormula();\n    }\n    \n    return parsed;\n  }\n}\n\n/**\n * Calculates molar weight of a chemical formula\n */\nexport function calculateMolarWeight(formula: string): number {\n  const counter = new ElementCounter(formula);\n  const elementCounts = counter.parseFormula();\n  \n  let molarWeight = 0;\n  for (const element in elementCounts) {\n    if (!(element in PERIODIC_TABLE)) {\n      throw new ValidationError(\n        `Unknown element: ${element}`,\n        { element, formula, operation: 'molar_weight_calculation' }\n      );\n    }\n    molarWeight += elementCounts[element] * PERIODIC_TABLE[element];\n  }\n  \n  return parseFloat(molarWeight.toFixed(3));\n}\n\n/**\n * Gets all unique elements present in a reaction\n */\nexport function getElementsInReaction(parsedReactants: any, parsedProducts: any): string[] {\n  const elements = new Set<string>();\n  \n  // Add elements from reactants\n  Object.values(parsedReactants).forEach((species: any) => {\n    Object.keys(species).forEach(element => elements.add(element));\n  });\n  \n  // Add elements from products\n  Object.values(parsedProducts).forEach((species: any) => {\n    Object.keys(species).forEach(element => elements.add(element));\n  });\n  \n  return Array.from(elements);\n}\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof globalThis === \"object\" ? globalThis :\n            typeof global === \"object\" ? global :\n                typeof self === \"object\" ? self :\n                    typeof this === \"object\" ? this :\n                        sloppyModeThis();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect !== \"undefined\") {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter, root);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                if (previous)\n                    previous(key, value);\n            };\n        }\n        function functionThis() {\n            try {\n                return Function(\"return this;\")();\n            }\n            catch (_) { }\n        }\n        function indirectEvalThis() {\n            try {\n                return (void 0, eval)(\"(function() { return this; })()\");\n            }\n            catch (_) { }\n        }\n        function sloppyModeThis() {\n            return functionThis() || indirectEvalThis();\n        }\n    })(function (exporter, root) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var _Map = typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        var registrySymbol = supportsSymbol ? Symbol.for(\"@reflect-metadata:registry\") : undefined;\n        var metadataRegistry = GetOrCreateMetadataRegistry();\n        var metadataProvider = CreateMetadataProvider(metadataRegistry);\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return;\n            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ true);\n            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var provider = GetMetadataProvider(O, P, /*create*/ false);\n            if (!provider) {\n                return [];\n            }\n            return provider.OrdinaryOwnMetadataKeys(O, P);\n        }\n        // 6 ECMAScript Data Types and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        function SameValueZero(x, y) {\n            return x === y || x !== x && y !== y;\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // Global metadata registry\n        // - Allows `import \"reflect-metadata\"` and `import \"reflect-metadata/no-conflict\"` to interoperate.\n        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.\n        /**\n         * Creates a registry used to allow multiple `reflect-metadata` providers.\n         */\n        function CreateMetadataRegistry() {\n            var fallback;\n            if (!IsUndefined(registrySymbol) &&\n                typeof root.Reflect !== \"undefined\" &&\n                !(registrySymbol in root.Reflect) &&\n                typeof root.Reflect.defineMetadata === \"function\") {\n                // interoperate with older version of `reflect-metadata` that did not support a registry.\n                fallback = CreateFallbackProvider(root.Reflect);\n            }\n            var first;\n            var second;\n            var rest;\n            var targetProviderMap = new _WeakMap();\n            var registry = {\n                registerProvider: registerProvider,\n                getProvider: getProvider,\n                setProvider: setProvider,\n            };\n            return registry;\n            function registerProvider(provider) {\n                if (!Object.isExtensible(registry)) {\n                    throw new Error(\"Cannot add provider to a frozen registry.\");\n                }\n                switch (true) {\n                    case fallback === provider: break;\n                    case IsUndefined(first):\n                        first = provider;\n                        break;\n                    case first === provider: break;\n                    case IsUndefined(second):\n                        second = provider;\n                        break;\n                    case second === provider: break;\n                    default:\n                        if (rest === undefined)\n                            rest = new _Set();\n                        rest.add(provider);\n                        break;\n                }\n            }\n            function getProviderNoCache(O, P) {\n                if (!IsUndefined(first)) {\n                    if (first.isProviderFor(O, P))\n                        return first;\n                    if (!IsUndefined(second)) {\n                        if (second.isProviderFor(O, P))\n                            return first;\n                        if (!IsUndefined(rest)) {\n                            var iterator = GetIterator(rest);\n                            while (true) {\n                                var next = IteratorStep(iterator);\n                                if (!next) {\n                                    return undefined;\n                                }\n                                var provider = IteratorValue(next);\n                                if (provider.isProviderFor(O, P)) {\n                                    IteratorClose(iterator);\n                                    return provider;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {\n                    return fallback;\n                }\n                return undefined;\n            }\n            function getProvider(O, P) {\n                var providerMap = targetProviderMap.get(O);\n                var provider;\n                if (!IsUndefined(providerMap)) {\n                    provider = providerMap.get(P);\n                }\n                if (!IsUndefined(provider)) {\n                    return provider;\n                }\n                provider = getProviderNoCache(O, P);\n                if (!IsUndefined(provider)) {\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return provider;\n            }\n            function hasProvider(provider) {\n                if (IsUndefined(provider))\n                    throw new TypeError();\n                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);\n            }\n            function setProvider(O, P, provider) {\n                if (!hasProvider(provider)) {\n                    throw new Error(\"Metadata provider not registered.\");\n                }\n                var existingProvider = getProvider(O, P);\n                if (existingProvider !== provider) {\n                    if (!IsUndefined(existingProvider)) {\n                        return false;\n                    }\n                    var providerMap = targetProviderMap.get(O);\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return true;\n            }\n        }\n        /**\n         * Gets or creates the shared registry of metadata providers.\n         */\n        function GetOrCreateMetadataRegistry() {\n            var metadataRegistry;\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                metadataRegistry = root.Reflect[registrySymbol];\n            }\n            if (IsUndefined(metadataRegistry)) {\n                metadataRegistry = CreateMetadataRegistry();\n            }\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                Object.defineProperty(root.Reflect, registrySymbol, {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: metadataRegistry\n                });\n            }\n            return metadataRegistry;\n        }\n        function CreateMetadataProvider(registry) {\n            // [[Metadata]] internal slot\n            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n            var metadata = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var targetMetadata = metadata.get(O);\n                    if (IsUndefined(targetMetadata))\n                        return false;\n                    return targetMetadata.has(P);\n                },\n                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,\n                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,\n                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,\n                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,\n                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,\n            };\n            metadataRegistry.registerProvider(provider);\n            return provider;\n            function GetOrCreateMetadataMap(O, P, Create) {\n                var targetMetadata = metadata.get(O);\n                var createdTargetMetadata = false;\n                if (IsUndefined(targetMetadata)) {\n                    if (!Create)\n                        return undefined;\n                    targetMetadata = new _Map();\n                    metadata.set(O, targetMetadata);\n                    createdTargetMetadata = true;\n                }\n                var metadataMap = targetMetadata.get(P);\n                if (IsUndefined(metadataMap)) {\n                    if (!Create)\n                        return undefined;\n                    metadataMap = new _Map();\n                    targetMetadata.set(P, metadataMap);\n                    if (!registry.setProvider(O, P, provider)) {\n                        targetMetadata.delete(P);\n                        if (createdTargetMetadata) {\n                            metadata.delete(O);\n                        }\n                        throw new Error(\"Wrong provider for target.\");\n                    }\n                }\n                return metadataMap;\n            }\n            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                return ToBoolean(metadataMap.has(MetadataKey));\n            }\n            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return undefined;\n                return metadataMap.get(MetadataKey);\n            }\n            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n                metadataMap.set(MetadataKey, MetadataValue);\n            }\n            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n            function OrdinaryOwnMetadataKeys(O, P) {\n                var keys = [];\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return keys;\n                var keysObj = metadataMap.keys();\n                var iterator = GetIterator(keysObj);\n                var k = 0;\n                while (true) {\n                    var next = IteratorStep(iterator);\n                    if (!next) {\n                        keys.length = k;\n                        return keys;\n                    }\n                    var nextValue = IteratorValue(next);\n                    try {\n                        keys[k] = nextValue;\n                    }\n                    catch (e) {\n                        try {\n                            IteratorClose(iterator);\n                        }\n                        finally {\n                            throw e;\n                        }\n                    }\n                    k++;\n                }\n            }\n            function OrdinaryDeleteMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                if (!metadataMap.delete(MetadataKey))\n                    return false;\n                if (metadataMap.size === 0) {\n                    var targetMetadata = metadata.get(O);\n                    if (!IsUndefined(targetMetadata)) {\n                        targetMetadata.delete(P);\n                        if (targetMetadata.size === 0) {\n                            metadata.delete(targetMetadata);\n                        }\n                    }\n                }\n                return true;\n            }\n        }\n        function CreateFallbackProvider(reflect) {\n            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;\n            var metadataOwner = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var metadataPropertySet = metadataOwner.get(O);\n                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {\n                        return true;\n                    }\n                    if (getOwnMetadataKeys(O, P).length) {\n                        if (IsUndefined(metadataPropertySet)) {\n                            metadataPropertySet = new _Set();\n                            metadataOwner.set(O, metadataPropertySet);\n                        }\n                        metadataPropertySet.add(P);\n                        return true;\n                    }\n                    return false;\n                },\n                OrdinaryDefineOwnMetadata: defineMetadata,\n                OrdinaryHasOwnMetadata: hasOwnMetadata,\n                OrdinaryGetOwnMetadata: getOwnMetadata,\n                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,\n                OrdinaryDeleteMetadata: deleteMetadata,\n            };\n            return provider;\n        }\n        /**\n         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,\n         * then this module's metadata provider is assigned to the object.\n         */\n        function GetMetadataProvider(O, P, Create) {\n            var registeredProvider = metadataRegistry.getProvider(O, P);\n            if (!IsUndefined(registeredProvider)) {\n                return registeredProvider;\n            }\n            if (Create) {\n                if (metadataRegistry.setProvider(O, P, metadataProvider)) {\n                    return metadataProvider;\n                }\n                throw new Error(\"Illegal state.\");\n            }\n            return undefined;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            var Map = /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (SameValueZero(key, this._cacheKey)) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (!SameValueZero(this._cacheKey, key)) {\n                        this._cacheIndex = -1;\n                        for (var i = 0; i < this._keys.length; i++) {\n                            if (SameValueZero(this._keys[i], key)) {\n                                this._cacheIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            return Map;\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            var Set = /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.keys(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n            return Set;\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    var array = new Uint8Array(size);\n                    if (typeof crypto !== \"undefined\") {\n                        crypto.getRandomValues(array);\n                    }\n                    else if (typeof msCrypto !== \"undefined\") {\n                        msCrypto.getRandomValues(array);\n                    }\n                    else {\n                        FillRandomBytes(array, size);\n                    }\n                    return array;\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","/**\n * Injectable decorator and related types for dependency injection\n * \n * Provides decorators and metadata for automatic dependency injection\n * in the CREB-JS container system.\n * \n * @author Loganathane Virassamy\n * @version 1.6.0\n */\n\nimport 'reflect-metadata';\n\n/**\n * Service lifetime enumeration\n */\nexport enum ServiceLifetime {\n  Singleton = 'singleton',\n  Transient = 'transient',\n}\n\n/**\n * Injectable metadata interface\n */\nexport interface InjectableMetadata {\n  dependencies?: any[];\n  lifetime?: ServiceLifetime;\n  token?: string | symbol;\n}\n\n/**\n * Injectable decorator options\n */\nexport interface InjectableOptions {\n  lifetime?: ServiceLifetime;\n  token?: string | symbol;\n}\n\n/**\n * Metadata key for injectable services\n */\nexport const INJECTABLE_METADATA_KEY = Symbol.for('injectable');\n\n/**\n * Metadata key for constructor parameters\n */\nexport const PARAM_TYPES_METADATA_KEY = 'design:paramtypes';\n\n/**\n * Injectable class decorator\n * \n * Marks a class as injectable and provides metadata for dependency injection.\n * \n * @param options Optional configuration for the injectable service\n */\nexport function Injectable(options: InjectableOptions = {}) {\n  return function <T extends new (...args: any[]) => any>(constructor: T): T {\n    // Get constructor parameter types from TypeScript compiler\n    const paramTypes = Reflect.getMetadata(PARAM_TYPES_METADATA_KEY, constructor) || [];\n    \n    // Create injectable metadata\n    const metadata: InjectableMetadata = {\n      dependencies: paramTypes,\n      lifetime: options.lifetime || ServiceLifetime.Transient,\n      token: options.token,\n    };\n\n    // Store metadata on the constructor\n    Reflect.defineMetadata(INJECTABLE_METADATA_KEY, metadata, constructor);\n\n    return constructor;\n  };\n}\n\n/**\n * Inject decorator for constructor parameters\n * \n * Explicitly specifies the token to inject for a constructor parameter.\n * Useful when TypeScript reflection doesn't provide enough information.\n * \n * @param token The service token to inject\n */\nexport function Inject(token: any) {\n  return function (target: any, propertyKey: string | symbol | undefined, parameterIndex: number) {\n    const existingMetadata = Reflect.getMetadata(INJECTABLE_METADATA_KEY, target) || {};\n    const dependencies = existingMetadata.dependencies || [];\n    \n    // Ensure dependencies array is large enough\n    while (dependencies.length <= parameterIndex) {\n      dependencies.push(undefined);\n    }\n    \n    // Set the specific dependency\n    dependencies[parameterIndex] = token;\n    \n    // Update metadata\n    const updatedMetadata: InjectableMetadata = {\n      ...existingMetadata,\n      dependencies,\n    };\n    \n    Reflect.defineMetadata(INJECTABLE_METADATA_KEY, updatedMetadata, target);\n  };\n}\n\n/**\n * Optional decorator for constructor parameters\n * \n * Marks a dependency as optional, allowing injection to succeed\n * even if the service is not registered.\n * \n * @param defaultValue Optional default value to use if service is not found\n */\nexport function Optional(defaultValue?: any) {\n  return function (target: any, propertyKey: string | symbol | undefined, parameterIndex: number) {\n    const existingMetadata = Reflect.getMetadata(INJECTABLE_METADATA_KEY, target) || {};\n    const optionalDependencies = existingMetadata.optionalDependencies || new Set();\n    \n    optionalDependencies.add(parameterIndex);\n    \n    const updatedMetadata: InjectableMetadata = {\n      ...existingMetadata,\n      optionalDependencies,\n      defaultValues: {\n        ...existingMetadata.defaultValues,\n        [parameterIndex]: defaultValue,\n      },\n    };\n    \n    Reflect.defineMetadata(INJECTABLE_METADATA_KEY, updatedMetadata, target);\n  };\n}\n\n/**\n * Get injectable metadata from a constructor\n */\nexport function getInjectableMetadata(constructor: any): InjectableMetadata | undefined {\n  return Reflect.getMetadata(INJECTABLE_METADATA_KEY, constructor);\n}\n\n/**\n * Check if a constructor is marked as injectable\n */\nexport function isInjectable(constructor: any): boolean {\n  return Reflect.hasMetadata(INJECTABLE_METADATA_KEY, constructor);\n}\n\n/**\n * Helper function to extract dependency tokens from a constructor\n */\nexport function getDependencyTokens(constructor: any): any[] {\n  const metadata = getInjectableMetadata(constructor);\n  if (!metadata) {\n    return [];\n  }\n  \n  return metadata.dependencies || [];\n}\n\n/**\n * Self-binding token type for auto-registration\n */\nexport const SELF = Symbol('SELF');\n\n/**\n * Factory for creating injectable class decorators with specific lifetimes\n */\nexport const Singleton = (options: Omit<InjectableOptions, 'lifetime'> = {}) =>\n  Injectable({ ...options, lifetime: ServiceLifetime.Singleton });\n\nexport const Transient = (options: Omit<InjectableOptions, 'lifetime'> = {}) =>\n  Injectable({ ...options, lifetime: ServiceLifetime.Transient });\n\n/**\n * Auto-registration helper for common patterns\n */\nexport interface AutoRegisterOptions {\n  lifetime?: ServiceLifetime;\n  token?: any;\n  as?: any[];\n}\n\n/**\n * Auto-register decorator that combines Injectable with container registration\n * This is a convenience decorator for common registration patterns\n */\nexport function AutoRegister(options: AutoRegisterOptions = {}) {\n  return function <T extends new (...args: any[]) => any>(constructor: T): T {\n    // First make it injectable\n    const injectable = Injectable({\n      lifetime: options.lifetime,\n      token: options.token,\n    });\n    \n    const decoratedConstructor = injectable(constructor);\n    \n    // Store auto-registration metadata for later processing\n    const autoRegisterMetadata = {\n      constructor: decoratedConstructor,\n      options,\n    };\n    \n    Reflect.defineMetadata('auto-register', autoRegisterMetadata, decoratedConstructor);\n    \n    return decoratedConstructor;\n  };\n}\n\n/**\n * Get auto-registration metadata\n */\nexport function getAutoRegisterMetadata(constructor: any) {\n  return Reflect.getMetadata('auto-register', constructor);\n}\n\n/**\n * Type guard for checking if a value is a constructor\n */\nexport function isConstructor(value: any): value is new (...args: any[]) => any {\n  return typeof value === 'function' && value.prototype && value.prototype.constructor === value;\n}\n","import { EquationParser, getElementsInReaction } from './utils';\nimport { EquationData, LinearSystem, BalancedEquation } from './types';\nimport { ComputationError } from './core/errors/CREBError';\nimport { Injectable } from './core/decorators/Injectable';\n\n/**\n * Linear equation system generator and solver\n * Based on the Generator and FileMaker classes from the original CREB project\n */\nexport class LinearEquationSolver {\n  private equationData: EquationData;\n  private allSpecies: string[];\n  private elements: string[];\n\n  constructor(chemicalEquation: string) {\n    const parser = new EquationParser(chemicalEquation);\n    this.equationData = parser.parse();\n    this.allSpecies = [...this.equationData.reactants, ...this.equationData.products];\n    this.elements = getElementsInReaction(\n      this.equationData.parsedReactants,\n      this.equationData.parsedProducts\n    );\n  }\n\n  /**\n   * Generates the system of linear equations representing the chemical balance\n   */\n  generateLinearSystem(): LinearSystem {\n    const equations = [];\n    \n    // Create one equation for each element\n    for (const element of this.elements) {\n      const coefficients = [];\n      \n      // For each species in the reaction\n      for (const species of this.allSpecies) {\n        let coefficient = 0;\n        \n        // Check if this species contains the current element\n        if (this.equationData.reactants.includes(species)) {\n          // Reactants have positive coefficients\n          const elementCount = this.equationData.parsedReactants[species][element] || 0;\n          coefficient = elementCount;\n        } else if (this.equationData.products.includes(species)) {\n          // Products have negative coefficients\n          const elementCount = this.equationData.parsedProducts[species][element] || 0;\n          coefficient = -elementCount;\n        }\n        \n        coefficients.push(coefficient);\n      }\n      \n      equations.push({\n        coefficients,\n        constant: 0 // All equations equal zero (balanced)\n      });\n    }\n\n    return {\n      equations,\n      variables: this.allSpecies.map((_, i) => `x${i}`)\n    };\n  }\n\n  /**\n   * Solves the linear system to find coefficients\n   */\n  solve(): number[] {\n    const system = this.generateLinearSystem();\n    \n    // For simple equations, try a brute force approach with small integer coefficients\n    const maxCoeff = 10;\n    const numSpecies = this.allSpecies.length;\n    \n    // Try different combinations of coefficients\n    for (let attempt = 1; attempt <= maxCoeff; attempt++) {\n      const coefficients = this.findCoefficients(system, attempt);\n      if (coefficients) {\n        return coefficients;\n      }\n    }\n    \n    throw new ComputationError(\n      'Unable to balance equation: Could not find integer coefficients',\n      { maxCoeff, numSpecies, operation: 'equation_balancing' }\n    );\n  }\n\n  /**\n   * Tries to find valid coefficients using a systematic approach\n   */\n  private findCoefficients(system: LinearSystem, maxVal: number): number[] | null {\n    const numSpecies = this.allSpecies.length;\n    \n    // Generate all possible combinations\n    const generateCombinations = (length: number, max: number): number[][] => {\n      const results: number[][] = [];\n      \n      const generate = (current: number[], remaining: number) => {\n        if (remaining === 0) {\n          results.push([...current]);\n          return;\n        }\n        \n        for (let i = 1; i <= max; i++) {\n          current.push(i);\n          generate(current, remaining - 1);\n          current.pop();\n        }\n      };\n      \n      generate([], length);\n      return results;\n    };\n    \n    const combinations = generateCombinations(numSpecies, maxVal);\n    \n    for (const coeffs of combinations) {\n      if (this.checkBalance(system, coeffs)) {\n        return coeffs;\n      }\n    }\n    \n    return null;\n  }\n\n  /**\n   * Checks if given coefficients balance the equation\n   */\n  private checkBalance(system: LinearSystem, coefficients: number[]): boolean {\n    for (const equation of system.equations) {\n      let sum = 0;\n      for (let i = 0; i < coefficients.length; i++) {\n        sum += equation.coefficients[i] * coefficients[i];\n      }\n      if (Math.abs(sum) > 1e-10) { // Allow for small floating point errors\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Normalizes coefficients to positive integers\n   */\n  private normalizeCoefficients(coefficients: number[]): number[] {\n    // Convert to positive numbers\n    const positiveCoeffs = coefficients.map(c => Math.abs(c));\n    \n    // Find a common denominator and convert to integers\n    const precision = 1000; // For handling decimal coefficients\n    const intCoeffs = positiveCoeffs.map(c => Math.round(c * precision));\n    \n    // Find GCD and simplify\n    const gcd = this.findGCD(intCoeffs.filter(c => c !== 0));\n    const simplified = intCoeffs.map(c => c / gcd);\n    \n    // Ensure all coefficients are at least 1\n    const minCoeff = Math.min(...simplified.filter(c => c > 0));\n    const scaled = simplified.map(c => Math.round(c / minCoeff));\n    \n    return scaled.map(c => c === 0 ? 1 : c);\n  }\n\n  /**\n   * Finds the greatest common divisor of an array of numbers\n   */\n  private findGCD(numbers: number[]): number {\n    const gcdTwo = (a: number, b: number): number => {\n      return b === 0 ? a : gcdTwo(b, a % b);\n    };\n    \n    return numbers.reduce((acc, num) => gcdTwo(acc, Math.abs(num)));\n  }\n}\n\n/**\n * Chemical equation balancer\n * Based on the main CREB functionality\n */\n@Injectable()\nexport class ChemicalEquationBalancer {\n  /**\n   * Balances a chemical equation and returns the balanced equation string\n   */\n  balance(equation: string): string {\n    try {\n      const solver = new LinearEquationSolver(equation);\n      const coefficients = solver.solve();\n      \n      const parser = new EquationParser(equation);\n      const { reactants, products } = parser.parse();\n      \n      return this.formatBalancedEquation(reactants, products, coefficients);\n    } catch (error) {\n      throw new ComputationError(\n        `Failed to balance equation \"${equation}\": ${error}`,\n        { equation, operation: 'equation_balancing', originalError: error }\n      );\n    }\n  }\n\n  /**\n   * Balances a chemical equation and returns detailed result\n   */\n  balanceDetailed(equation: string): BalancedEquation {\n    const solver = new LinearEquationSolver(equation);\n    const coefficients = solver.solve();\n    \n    const parser = new EquationParser(equation);\n    const { reactants, products } = parser.parse();\n    \n    return {\n      equation: this.formatBalancedEquation(reactants, products, coefficients),\n      coefficients,\n      reactants,\n      products\n    };\n  }\n\n  private formatBalancedEquation(reactants: string[], products: string[], coefficients: number[]): string {\n    const formatSide = (species: string[], startIndex: number): string => {\n      return species.map((specie, index) => {\n        const coeff = coefficients[startIndex + index];\n        return coeff === 1 ? specie : `${coeff} ${specie}`;\n      }).join(' + ');\n    };\n\n    const reactantSide = formatSide(reactants, 0);\n    const productSide = formatSide(products, reactants.length);\n    \n    return `${reactantSide} = ${productSide}`;\n  }\n}\n","import { calculateMolarWeight, EquationParser } from './utils';\nimport { ChemicalEquationBalancer } from './balancer';\nimport { StoichiometryResult, SpeciesData } from './types';\nimport { ValidationError } from './core/errors/CREBError';\nimport { Injectable } from './core/decorators/Injectable';\n\n/**\n * Stoichiometry calculator\n * Based on the Stoichiometry class from the original CREB project\n */\n@Injectable()\nexport class Stoichiometry {\n  private equation?: string;\n  private reactants: string[] = [];\n  private products: string[] = [];\n  private coefficients: number[] = [];\n  private balancer: ChemicalEquationBalancer;\n\n  constructor(equation?: string) {\n    this.balancer = new ChemicalEquationBalancer();\n    \n    if (equation) {\n      this.equation = equation;\n      this.initializeFromEquation(equation);\n    }\n  }\n\n  private initializeFromEquation(equation: string) {\n    // First, parse the raw equation (without coefficients) to get species names\n    const rawParser = new EquationParser(equation);\n    const rawData = rawParser.parse();\n    \n    // Balance the equation to get coefficients\n    const balanced = this.balancer.balanceDetailed(equation);\n    this.reactants = rawData.reactants;\n    this.products = rawData.products;\n    this.coefficients = balanced.coefficients;\n  }\n\n  /**\n   * Calculates the molar weight of a chemical formula\n   */\n  calculateMolarWeight(formula: string): number {\n    return calculateMolarWeight(formula);\n  }\n\n  /**\n   * Calculates stoichiometric ratios relative to a selected species\n   */\n  calculateRatios(selectedSpecies: string): number[] {\n    if (!this.equation) {\n      throw new ValidationError(\n        'No equation provided. Initialize with an equation first.',\n        { operation: 'calculateRatios', selectedSpecies },\n        { field: 'equation', value: this.equation, constraint: 'must be initialized' }\n      );\n    }\n\n    const allSpecies = [...this.reactants, ...this.products];\n    const selectedIndex = allSpecies.indexOf(selectedSpecies);\n    \n    if (selectedIndex === -1) {\n      const availableSpecies = allSpecies.join(', ');\n      throw new ValidationError(\n        `Species \"${selectedSpecies}\" not found in the equation. Available species: ${availableSpecies}`,\n        { selectedSpecies, availableSpecies: allSpecies },\n        { field: 'selectedSpecies', value: selectedSpecies, constraint: `must be one of: ${availableSpecies}` }\n      );\n    }\n\n    const selectedCoefficient = this.coefficients[selectedIndex];\n    return this.coefficients.map(coeff => coeff / selectedCoefficient);\n  }\n\n  /**\n   * Performs stoichiometric calculations starting from moles\n   */\n  calculateFromMoles(selectedSpecies: string, moles: number): StoichiometryResult {\n    if (!this.equation) {\n      throw new ValidationError(\n        'No equation provided. Initialize with an equation first.',\n        { operation: 'calculateFromMoles', selectedSpecies, moles },\n        { field: 'equation', value: this.equation, constraint: 'must be initialized' }\n      );\n    }\n\n    const ratios = this.calculateRatios(selectedSpecies);\n    const allSpecies = [...this.reactants, ...this.products];\n    \n    const result: StoichiometryResult = {\n      reactants: {},\n      products: {},\n      totalMolarMass: { reactants: 0, products: 0 }\n    };\n\n    // Calculate for all species\n    allSpecies.forEach((species, index) => {\n      const speciesMoles = ratios[index] * moles;\n      const molarWeight = this.calculateMolarWeight(species);\n      const grams = speciesMoles * molarWeight;\n\n      const speciesData: SpeciesData = {\n        moles: parseFloat(speciesMoles.toFixed(3)),\n        grams: parseFloat(grams.toFixed(3)),\n        molarWeight: molarWeight\n      };\n\n      if (this.reactants.includes(species)) {\n        result.reactants[species] = speciesData;\n        result.totalMolarMass.reactants += grams;\n      } else {\n        result.products[species] = speciesData;\n        result.totalMolarMass.products += grams;\n      }\n    });\n\n    // Round total molar masses\n    result.totalMolarMass.reactants = parseFloat(result.totalMolarMass.reactants.toFixed(3));\n    result.totalMolarMass.products = parseFloat(result.totalMolarMass.products.toFixed(3));\n\n    return result;\n  }\n\n  /**\n   * Performs stoichiometric calculations starting from grams\n   */\n  calculateFromGrams(selectedSpecies: string, grams: number): StoichiometryResult {\n    if (!this.equation) {\n      throw new ValidationError(\n        'No equation provided. Initialize with an equation first.',\n        { operation: 'calculateFromGrams', selectedSpecies, grams },\n        { field: 'equation', value: this.equation, constraint: 'must be initialized' }\n      );\n    }\n\n    const molarWeight = this.calculateMolarWeight(selectedSpecies);\n    const moles = grams / molarWeight;\n    \n    return this.calculateFromMoles(selectedSpecies, moles);\n  }\n\n  /**\n   * Gets the balanced equation\n   */\n  getBalancedEquation(): string {\n    if (!this.equation) {\n      throw new ValidationError(\n        'No equation provided.',\n        { operation: 'getBalancedEquation' },\n        { field: 'equation', value: this.equation, constraint: 'must be initialized' }\n      );\n    }\n    return this.balancer.balance(this.equation);\n  }\n\n  /**\n   * Gets all species in the reaction with their molar weights\n   */\n  getSpeciesInfo(): { [species: string]: { molarWeight: number; type: 'reactant' | 'product' } } {\n    const result: { [species: string]: { molarWeight: number; type: 'reactant' | 'product' } } = {};\n    \n    this.reactants.forEach(species => {\n      result[species] = {\n        molarWeight: this.calculateMolarWeight(species),\n        type: 'reactant'\n      };\n    });\n\n    this.products.forEach(species => {\n      result[species] = {\n        molarWeight: this.calculateMolarWeight(species),\n        type: 'product'\n      };\n    });\n\n    return result;\n  }\n\n  /**\n   * Static method to calculate molar weight without instantiating the class\n   */\n  static calculateMolarWeight(formula: string): number {\n    return calculateMolarWeight(formula);\n  }\n}\n","/**\n * Advanced TypeScript Support for CREB Library\n * Enhanced type definitions with generic constraints and branded types\n * Provides superior IntelliSense and type safety for chemical data structures\n */\n\n// ============================================================================\n// Branded Types for Enhanced Type Safety\n// ============================================================================\n\n/**\n * Branded type for chemical formulas ensuring compile-time validation\n */\nexport type ChemicalFormula = string & { readonly __brand: 'ChemicalFormula' };\n\n/**\n * Branded type for valid element symbols\n */\nexport type ElementSymbol = string & { readonly __brand: 'ElementSymbol' };\n\n/**\n * Branded type for balanced chemical equations\n */\nexport type BalancedEquationString = string & { readonly __brand: 'BalancedEquation' };\n\n/**\n * Branded type for SMILES notation\n */\nexport type SMILESNotation = string & { readonly __brand: 'SMILES' };\n\n/**\n * Branded type for InChI notation\n */\nexport type InChINotation = string & { readonly __brand: 'InChI' };\n\n/**\n * Branded type for CAS numbers\n */\nexport type CASNumber = string & { readonly __brand: 'CAS' };\n\n// ============================================================================\n// Generic Constraints for Chemical Formulas\n// ============================================================================\n\n/**\n * Type constraint for valid chemical elements (Periodic Table)\n */\nexport type ValidElement = \n  | 'H' | 'He' | 'Li' | 'Be' | 'B' | 'C' | 'N' | 'O' | 'F' | 'Ne'\n  | 'Na' | 'Mg' | 'Al' | 'Si' | 'P' | 'S' | 'Cl' | 'Ar' | 'K' | 'Ca'\n  | 'Sc' | 'Ti' | 'V' | 'Cr' | 'Mn' | 'Fe' | 'Co' | 'Ni' | 'Cu' | 'Zn'\n  | 'Ga' | 'Ge' | 'As' | 'Se' | 'Br' | 'Kr' | 'Rb' | 'Sr' | 'Y' | 'Zr'\n  | 'Nb' | 'Mo' | 'Tc' | 'Ru' | 'Rh' | 'Pd' | 'Ag' | 'Cd' | 'In' | 'Sn'\n  | 'Sb' | 'Te' | 'I' | 'Xe' | 'Cs' | 'Ba' | 'La' | 'Ce' | 'Pr' | 'Nd'\n  | 'Pm' | 'Sm' | 'Eu' | 'Gd' | 'Tb' | 'Dy' | 'Ho' | 'Er' | 'Tm' | 'Yb'\n  | 'Lu' | 'Hf' | 'Ta' | 'W' | 'Re' | 'Os' | 'Ir' | 'Pt' | 'Au' | 'Hg'\n  | 'Tl' | 'Pb' | 'Bi' | 'Po' | 'At' | 'Rn' | 'Fr' | 'Ra' | 'Ac' | 'Th'\n  | 'Pa' | 'U' | 'Np' | 'Pu' | 'Am' | 'Cm' | 'Bk' | 'Cf' | 'Es' | 'Fm'\n  | 'Md' | 'No' | 'Lr' | 'Rf' | 'Db' | 'Sg' | 'Bh' | 'Hs' | 'Mt' | 'Ds'\n  | 'Rg' | 'Cn' | 'Nh' | 'Fl' | 'Mc' | 'Lv' | 'Ts' | 'Og';\n\n/**\n * Generic element count with typed element symbols\n */\n/**\n * Type-safe element count with generic constraints for elements\n */\nexport type TypedElementCount<T extends ValidElement = ValidElement> = {\n  [K in T]?: number;\n};\n\n/**\n * Generic compound composition with strict typing\n */\nexport type CompoundComposition<T extends ValidElement = ValidElement> = {\n  readonly elements: TypedElementCount<T>;\n  readonly molecularWeight: number;\n  readonly formula: ChemicalFormula;\n};\n\n// ============================================================================\n// Advanced Type Guards and Validation\n// ============================================================================\n\n/**\n * Type guard for chemical formulas\n */\nexport function isChemicalFormula(value: string): value is ChemicalFormula {\n  // More permissive validation - basic pattern for chemical formulas\n  const pattern = /^[A-Z][a-z]?(?:\\d*\\(?[A-Z][a-z]?\\d*\\)?)*\\d*$/;\n  return typeof value === 'string' && value.length > 0 && /[A-Z]/.test(value);\n}\n\n/**\n * Type guard for element symbols\n */\nexport function isElementSymbol(value: string): value is ElementSymbol {\n  const validElements: ReadonlySet<string> = new Set([\n    'H', 'He', 'Li', 'Be', 'B', 'C', 'N', 'O', 'F', 'Ne',\n    'Na', 'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca',\n    'Sc', 'Ti', 'V', 'Cr', 'Mn', 'Fe', 'Co', 'Ni', 'Cu', 'Zn',\n    'Ga', 'Ge', 'As', 'Se', 'Br', 'Kr', 'Rb', 'Sr', 'Y', 'Zr',\n    'Nb', 'Mo', 'Tc', 'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn',\n    'Sb', 'Te', 'I', 'Xe', 'Cs', 'Ba', 'La', 'Ce', 'Pr', 'Nd',\n    'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb',\n    'Lu', 'Hf', 'Ta', 'W', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg',\n    'Tl', 'Pb', 'Bi', 'Po', 'At', 'Rn', 'Fr', 'Ra', 'Ac', 'Th',\n    'Pa', 'U', 'Np', 'Pu', 'Am', 'Cm', 'Bk', 'Cf', 'Es', 'Fm',\n    'Md', 'No', 'Lr', 'Rf', 'Db', 'Sg', 'Bh', 'Hs', 'Mt', 'Ds',\n    'Rg', 'Cn', 'Nh', 'Fl', 'Mc', 'Lv', 'Ts', 'Og'\n  ]);\n  return validElements.has(value);\n}\n\n/**\n * Type guard for balanced equations\n */\nexport function isBalancedEquation(value: string): value is BalancedEquationString {\n  return value.includes('->') || value.includes('→');\n}\n\n// ============================================================================\n// Type-Safe Chemical Data Structures\n// ============================================================================\n\n/**\n * Enhanced equation data with strict typing\n */\nexport interface TypedEquationData<TElements extends ValidElement = ValidElement> {\n  readonly reactants: readonly ChemicalFormula[];\n  readonly products: readonly ChemicalFormula[];\n  readonly parsedReactants: Record<ChemicalFormula, TypedElementCount<TElements>>;\n  readonly parsedProducts: Record<ChemicalFormula, TypedElementCount<TElements>>;\n  readonly elements: readonly TElements[];\n}\n\n/**\n * Enhanced balanced equation with type safety\n */\nexport interface TypedBalancedEquation<TElements extends ValidElement = ValidElement> {\n  readonly equation: BalancedEquationString;\n  readonly coefficients: readonly number[];\n  readonly reactants: readonly ChemicalFormula[];\n  readonly products: readonly ChemicalFormula[];\n  readonly elementalBalance: Record<TElements, number>;\n  readonly isBalanced: true; // Literal type for compile-time guarantee\n}\n\n/**\n * Type-safe species data with enhanced properties\n */\nexport interface TypedSpeciesData<TFormula extends ChemicalFormula = ChemicalFormula> {\n  readonly formula: TFormula;\n  readonly moles: number;\n  readonly grams: number;\n  readonly molarWeight: number;\n  readonly percentage: number;\n  readonly composition: CompoundComposition;\n}\n\n/**\n * Enhanced stoichiometry result with strict typing\n */\nexport interface TypedStoichiometryResult<\n  TReactants extends ChemicalFormula = ChemicalFormula,\n  TProducts extends ChemicalFormula = ChemicalFormula\n> {\n  readonly reactants: Record<TReactants, TypedSpeciesData<TReactants>>;\n  readonly products: Record<TProducts, TypedSpeciesData<TProducts>>;\n  readonly totalMolarMass: {\n    readonly reactants: number;\n    readonly products: number;\n  };\n  readonly massBalance: number; // Should be 1.0 for balanced equations\n  readonly equation: TypedBalancedEquation;\n}\n\n// ============================================================================\n// Advanced Reaction Types\n// ============================================================================\n\n/**\n * Reaction type classification with literal types\n */\nexport type ReactionType = \n  | 'synthesis'\n  | 'decomposition'\n  | 'single-replacement'\n  | 'double-replacement'\n  | 'combustion'\n  | 'acid-base'\n  | 'redox'\n  | 'precipitation'\n  | 'complex-formation';\n\n/**\n * Phase state with literal types\n */\nexport type PhaseState = 'solid' | 'liquid' | 'gas' | 'aqueous' | 'plasma';\n\n/**\n * Enhanced compound with phase information\n */\nexport interface TypedCompound<TFormula extends ChemicalFormula = ChemicalFormula> {\n  readonly formula: TFormula;\n  readonly name?: string;\n  readonly phase?: PhaseState;\n  readonly coefficient: number;\n  readonly composition: CompoundComposition;\n  readonly properties?: Readonly<{\n    molarMass: number;\n    density?: number;\n    meltingPoint?: number;\n    boilingPoint?: number;\n  }>;\n}\n\n/**\n * Type-safe reaction with enhanced metadata\n */\nexport interface TypedReaction<\n  TReactants extends ChemicalFormula = ChemicalFormula,\n  TProducts extends ChemicalFormula = ChemicalFormula\n> {\n  readonly reactants: readonly TypedCompound<TReactants>[];\n  readonly products: readonly TypedCompound<TProducts>[];\n  readonly type: ReactionType;\n  readonly isBalanced: boolean;\n  readonly balancedEquation?: TypedBalancedEquation;\n  readonly conditions?: Readonly<{\n    temperature?: number;\n    pressure?: number;\n    catalyst?: string;\n    solvent?: string;\n  }>;\n}\n\n// ============================================================================\n// Utility Types for Enhanced IntelliSense\n// ============================================================================\n\n/**\n * Extract element types from a chemical formula (compile-time)\n */\nexport type ExtractElements<T extends string> = \n  T extends `${infer Element}${infer Rest}`\n    ? Element extends ValidElement\n      ? Element | ExtractElements<Rest>\n      : ExtractElements<Rest>\n    : never;\n\n/**\n * Conditional type for organic vs inorganic compounds\n */\nexport type CompoundCategory<T extends ChemicalFormula> = \n  T extends ChemicalFormula\n    ? ExtractElements<T> extends 'C'\n      ? 'organic'\n      : 'inorganic'\n    : never;\n\n/**\n * Helper type for reaction participants\n */\nexport type ReactionParticipants<T extends TypedReaction> = \n  T extends TypedReaction<infer R, infer P> ? R | P : never;\n\n// ============================================================================\n// Factory Functions with Type Safety\n// ============================================================================\n\n/**\n * Create a chemical formula with compile-time validation\n */\nexport function createChemicalFormula(formula: string): ChemicalFormula {\n  if (!isChemicalFormula(formula)) {\n    throw new Error(`Invalid chemical formula: ${formula}`);\n  }\n  return formula;\n}\n\n/**\n * Create an element symbol with validation\n */\nexport function createElementSymbol(symbol: string): ElementSymbol {\n  if (!isElementSymbol(symbol)) {\n    throw new Error(`Invalid element symbol: ${symbol}`);\n  }\n  return symbol as ElementSymbol;\n}\n\n// ============================================================================\n// Template Literal Types for Formula Parsing\n// ============================================================================\n\n/**\n * Template literal type for common chemical formulas\n */\nexport type CommonFormulas = \n  | 'H2O' | 'CO2' | 'O2' | 'N2' | 'H2' | 'CH4' | 'C2H6' | 'C2H4' | 'C2H2'\n  | 'NH3' | 'HCl' | 'H2SO4' | 'NaOH' | 'Ca(OH)2' | 'CaCO3' | 'NaCl'\n  | 'C6H12O6' | 'C6H6' | 'C2H5OH' | 'CH3COOH' | 'C8H18';\n\n/**\n * Auto-completion helper for common chemical formulas\n */\nexport type FormulaAutoComplete<T extends string> = \n  T extends CommonFormulas ? T : T extends `${CommonFormulas}${string}` ? T : string;\n\n// ============================================================================\n// Advanced Generic Constraints\n// ============================================================================\n\n/**\n * Constraint for balanced chemical equations\n */\nexport interface BalancedEquationConstraint<T extends TypedReaction> {\n  readonly reaction: T;\n  readonly verify: T['isBalanced'] extends true ? true : false;\n}\n\n/**\n * Constraint for mass conservation\n */\nexport interface MassConservationConstraint<T extends TypedStoichiometryResult> {\n  readonly result: T;\n  readonly conserved: T['massBalance'] extends 1.0 ? true : false;\n}\n\n// ============================================================================\n// Utility Functions for Type-Safe Operations\n// ============================================================================\n\n/**\n * Parse a chemical formula into element counts\n */\nexport function parseFormula(formula: ChemicalFormula): TypedElementCount {\n  const result: TypedElementCount = {};\n  \n  // Handle parentheses first by expanding them\n  let expandedFormula = formula as string;\n  \n  // Find patterns like (OH)2 and expand them\n  const parenthesesPattern = /\\(([^)]+)\\)(\\d*)/g;\n  expandedFormula = expandedFormula.replace(parenthesesPattern, (match, group, multiplier) => {\n    const mult = multiplier ? parseInt(multiplier, 10) : 1;\n    let expanded = '';\n    for (let i = 0; i < mult; i++) {\n      expanded += group;\n    }\n    return expanded;\n  });\n  \n  // Now parse the expanded formula\n  const matches = expandedFormula.match(/([A-Z][a-z]?)(\\d*)/g);\n  if (matches) {\n    for (const match of matches) {\n      const elementMatch = match.match(/([A-Z][a-z]?)(\\d*)/);\n      if (elementMatch) {\n        const element = elementMatch[1];\n        const count = elementMatch[2] ? parseInt(elementMatch[2], 10) : 1;\n        \n        if (isElementSymbol(element)) {\n          result[element as ValidElement] = (result[element as ValidElement] || 0) + count;\n        }\n      }\n    }\n  }\n  \n  return result;\n}\n\n// ============================================================================\n// Enhanced Error Types\n// ============================================================================\n\n/**\n * Type-safe error for chemical formula validation\n */\nexport class ChemicalFormulaError extends Error {\n  constructor(\n    public readonly formula: string,\n    public readonly reason: 'invalid-syntax' | 'unknown-element' | 'invalid-structure'\n  ) {\n    super(`Invalid chemical formula \"${formula}\": ${reason}`);\n    this.name = 'ChemicalFormulaError';\n  }\n}\n\n/**\n * Type-safe error for equation balancing\n */\nexport class EquationBalancingError extends Error {\n  constructor(\n    public readonly equation: string,\n    public readonly reason: 'impossible-balance' | 'invalid-reactants' | 'invalid-products'\n  ) {\n    super(`Cannot balance equation \"${equation}\": ${reason}`);\n    this.name = 'EquationBalancingError';\n  }\n}\n\n// ============================================================================\n// Exports for Enhanced IntelliSense\n// ============================================================================\n\nexport {\n  // Re-export all types for better IntelliSense\n  type TypedElementCount as ElementCount,\n  type TypedEquationData as EquationData,\n  type TypedBalancedEquation as BalancedEquation,\n  type TypedSpeciesData as SpeciesData,\n  type TypedStoichiometryResult as StoichiometryResult,\n  type TypedCompound as Compound,\n  type TypedReaction as Reaction\n};\n","/**\n * Enhanced Chemical Equation Balancer with Advanced TypeScript Support\n * Simplified version that provides compound analysis and type safety\n */\n\nimport { ChemicalEquationBalancer } from './balancer';\nimport { ElementCounter } from './utils';\nimport { \n  ChemicalFormula, \n  ElementSymbol, \n  ValidElement,\n  TypedElementCount,\n  isChemicalFormula,\n  isElementSymbol,\n  parseFormula,\n  createChemicalFormula\n} from './advancedTypes';\n\n/**\n * Enhanced chemical compound information\n */\nexport interface EnhancedCompoundInfo {\n  formula: string;\n  molarMass: number;\n  elements: string[];\n  elementCount: Record<string, number>;\n}\n\n/**\n * Enhanced balanced equation result with compound analysis\n */\nexport interface EnhancedBalanceResult {\n  equation: string;\n  isBalanced: boolean;\n  compounds: EnhancedCompoundInfo[];\n  coefficients?: number[];\n  reactants?: string[];\n  products?: string[];\n}\n\n/**\n * Enhanced balancer with type-safe compound analysis\n */\nexport class EnhancedBalancer {\n  private balancer: ChemicalEquationBalancer;\n\n  constructor() {\n    this.balancer = new ChemicalEquationBalancer();\n  }\n\n  /**\n   * Balance equation with enhanced compound information\n   */\n  balance(equation: string): EnhancedBalanceResult {\n    try {\n      // Use the detailed balancer for more information\n      const result = this.balancer.balanceDetailed(equation);\n      \n      // Extract all unique formulas from reactants and products\n      const allFormulas = new Set<string>();\n      \n      // Add formulas from the result structure\n      if (result.reactants && result.reactants.length > 0) {\n        result.reactants.forEach((formula: string) => allFormulas.add(formula));\n      }\n      if (result.products && result.products.length > 0) {\n        result.products.forEach((formula: string) => allFormulas.add(formula));\n      }\n\n      // Analyze each compound\n      const compounds = Array.from(allFormulas).map(formula => \n        this.analyzeCompound(formula)\n      ).filter(compound => compound.formula !== ''); // Filter out empty results\n\n      // Determine if the equation was balanced by checking if it changed OR if coefficients are all 1 (already balanced)\n      const coefficientsAllOne = result.coefficients && result.coefficients.every(coeff => coeff === 1);\n      const wasBalanced = result.equation !== equation || coefficientsAllOne;\n\n      return {\n        equation: result.equation,\n        isBalanced: wasBalanced,\n        compounds,\n        coefficients: result.coefficients,\n        reactants: result.reactants,\n        products: result.products\n      };\n\n    } catch (error) {\n      // Note: Error in enhanced balancer - using fallback\n      return {\n        equation,\n        isBalanced: false,\n        compounds: [],\n        coefficients: [],\n        reactants: [],\n        products: []\n      };\n    }\n  }\n\n  /**\n   * Analyze a single compound for detailed information\n   */\n  private analyzeCompound(formula: string): EnhancedCompoundInfo {\n    try {\n      const elementCounter = new ElementCounter(formula);\n      const elementCount = elementCounter.parseFormula();\n      \n      const elements = Object.keys(elementCount);\n      const molarMass = this.calculateMolarMass(elementCount);\n\n      return {\n        formula,\n        molarMass,\n        elements,\n        elementCount\n      };\n    } catch (error) {\n      return {\n        formula,\n        molarMass: 0,\n        elements: [],\n        elementCount: {}\n      };\n    }\n  }\n\n  /**\n   * Calculate molar mass from element count\n   */\n  private calculateMolarMass(elementCount: Record<string, number>): number {\n    // Atomic masses (simplified)\n    const atomicMasses: Record<string, number> = {\n      'H': 1.008, 'He': 4.003, 'Li': 6.941, 'Be': 9.012, 'B': 10.811,\n      'C': 12.011, 'N': 14.007, 'O': 15.999, 'F': 18.998, 'Ne': 20.180,\n      'Na': 22.990, 'Mg': 24.305, 'Al': 26.982, 'Si': 28.086, 'P': 30.974,\n      'S': 32.065, 'Cl': 35.453, 'Ar': 39.948, 'K': 39.098, 'Ca': 40.078,\n      'Fe': 55.845, 'Cu': 63.546, 'Zn': 65.38, 'Ag': 107.868, 'Au': 196.966\n      // Add more as needed\n    };\n\n    let totalMass = 0;\n    for (const [element, count] of Object.entries(elementCount)) {\n      const atomicMass = atomicMasses[element];\n      if (atomicMass) {\n        totalMass += atomicMass * (count || 0);\n      }\n    }\n\n    return totalMass;\n  }\n\n  /**\n   * Simple formula validation\n   */\n  private isValidFormula(formula: string): boolean {\n    // Basic validation - contains at least one capital letter\n    return /[A-Z]/.test(formula) && formula.length > 0;\n  }\n}\n","/**\n * Cache Eviction Policies for CREB-JS\n * \n * Implements various cache eviction strategies including LRU, LFU, FIFO, TTL, and Random.\n * Each policy provides different trade-offs between performance and memory efficiency.\n */\n\nimport { EvictionPolicy, EvictionStrategy, CacheEntry, AdvancedCacheConfig } from './types';\n\n/**\n * Least Recently Used (LRU) eviction policy\n * Evicts entries that haven't been accessed for the longest time\n */\nexport class LRUEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'lru';\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    const candidates: Array<{ key: string; lastAccessed: number }> = [];\n    \n    for (const [key, entry] of entries.entries()) {\n      candidates.push({ key, lastAccessed: entry.lastAccessed });\n    }\n    \n    // Sort by last accessed time (oldest first)\n    candidates.sort((a, b) => a.lastAccessed - b.lastAccessed);\n    \n    return candidates.slice(0, targetCount).map(c => c.key);\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    entry.lastAccessed = Date.now();\n    entry.accessCount++;\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    const now = Date.now();\n    entry.lastAccessed = now;\n    entry.accessCount = 1;\n  }\n}\n\n/**\n * Least Frequently Used (LFU) eviction policy\n * Evicts entries with the lowest access frequency\n */\nexport class LFUEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'lfu';\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    const candidates: Array<{ key: string; accessCount: number; lastAccessed: number }> = [];\n    \n    for (const [key, entry] of entries.entries()) {\n      candidates.push({ \n        key, \n        accessCount: entry.accessCount,\n        lastAccessed: entry.lastAccessed \n      });\n    }\n    \n    // Sort by access count (lowest first), then by last accessed for ties\n    candidates.sort((a, b) => {\n      if (a.accessCount !== b.accessCount) {\n        return a.accessCount - b.accessCount;\n      }\n      return a.lastAccessed - b.lastAccessed;\n    });\n    \n    return candidates.slice(0, targetCount).map(c => c.key);\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    entry.lastAccessed = Date.now();\n    entry.accessCount++;\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    const now = Date.now();\n    entry.lastAccessed = now;\n    entry.accessCount = 1;\n  }\n}\n\n/**\n * First In, First Out (FIFO) eviction policy\n * Evicts entries in the order they were inserted\n */\nexport class FIFOEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'fifo';\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    const candidates: Array<{ key: string; insertionOrder: number }> = [];\n    \n    for (const [key, entry] of entries.entries()) {\n      candidates.push({ key, insertionOrder: entry.insertionOrder });\n    }\n    \n    // Sort by insertion order (oldest first)\n    candidates.sort((a, b) => a.insertionOrder - b.insertionOrder);\n    \n    return candidates.slice(0, targetCount).map(c => c.key);\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    entry.lastAccessed = Date.now();\n    entry.accessCount++;\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    const now = Date.now();\n    entry.lastAccessed = now;\n    entry.accessCount = 1;\n  }\n}\n\n/**\n * Time To Live (TTL) eviction policy\n * Evicts expired entries first, then falls back to LRU\n */\nexport class TTLEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'ttl';\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    const now = Date.now();\n    const expired: string[] = [];\n    const nonExpired: Array<{ key: string; lastAccessed: number }> = [];\n    \n    for (const [key, entry] of entries.entries()) {\n      if (entry.ttl > 0 && now >= entry.expiresAt) {\n        expired.push(key);\n      } else {\n        nonExpired.push({ key, lastAccessed: entry.lastAccessed });\n      }\n    }\n    \n    // Return expired entries first\n    if (expired.length >= targetCount) {\n      return expired.slice(0, targetCount);\n    }\n    \n    // If not enough expired entries, use LRU for the rest\n    const remaining = targetCount - expired.length;\n    nonExpired.sort((a, b) => a.lastAccessed - b.lastAccessed);\n    \n    return [...expired, ...nonExpired.slice(0, remaining).map(c => c.key)];\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    entry.lastAccessed = Date.now();\n    entry.accessCount++;\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    const now = Date.now();\n    entry.lastAccessed = now;\n    entry.accessCount = 1;\n  }\n}\n\n/**\n * Random eviction policy\n * Evicts random entries (useful for testing and as fallback)\n */\nexport class RandomEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'random';\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    const keys = Array.from(entries.keys());\n    const candidates: string[] = [];\n    \n    // Fisher-Yates shuffle to get random keys\n    for (let i = 0; i < targetCount && i < keys.length; i++) {\n      const randomIndex = Math.floor(Math.random() * (keys.length - i)) + i;\n      [keys[i], keys[randomIndex]] = [keys[randomIndex], keys[i]];\n      candidates.push(keys[i]);\n    }\n    \n    return candidates;\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    entry.lastAccessed = Date.now();\n    entry.accessCount++;\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    const now = Date.now();\n    entry.lastAccessed = now;\n    entry.accessCount = 1;\n  }\n}\n\n/**\n * Eviction policy factory\n */\nexport class EvictionPolicyFactory {\n  private static policies = new Map<EvictionStrategy, EvictionPolicy>([\n    ['lru', new LRUEvictionPolicy()],\n    ['lfu', new LFUEvictionPolicy()],\n    ['fifo', new FIFOEvictionPolicy()],\n    ['ttl', new TTLEvictionPolicy()],\n    ['random', new RandomEvictionPolicy()]\n  ]);\n\n  /**\n   * Get eviction policy instance\n   */\n  static getPolicy(strategy: EvictionStrategy): EvictionPolicy {\n    const policy = this.policies.get(strategy);\n    if (!policy) {\n      throw new Error(`Unknown eviction strategy: ${strategy}`);\n    }\n    return policy;\n  }\n\n  /**\n   * Register custom eviction policy\n   */\n  static registerPolicy(policy: EvictionPolicy): void {\n    this.policies.set(policy.strategy, policy);\n  }\n\n  /**\n   * Get all available strategies\n   */\n  static getAvailableStrategies(): EvictionStrategy[] {\n    return Array.from(this.policies.keys());\n  }\n}\n\n/**\n * Adaptive eviction policy that switches strategies based on access patterns\n */\nexport class AdaptiveEvictionPolicy implements EvictionPolicy {\n  readonly strategy: EvictionStrategy = 'lru'; // Default fallback\n  \n  private currentPolicy: EvictionPolicy;\n  private performanceHistory: Map<EvictionStrategy, number[]> = new Map();\n  private evaluationWindow = 100; // Number of operations to evaluate\n  private operationCount = 0;\n  \n  constructor(private fallbackStrategy: EvictionStrategy = 'lru') {\n    this.currentPolicy = EvictionPolicyFactory.getPolicy(fallbackStrategy);\n    \n    // Initialize performance tracking\n    for (const strategy of EvictionPolicyFactory.getAvailableStrategies()) {\n      this.performanceHistory.set(strategy, []);\n    }\n  }\n\n  selectEvictionCandidates<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig,\n    targetCount: number\n  ): string[] {\n    this.operationCount++;\n    \n    // Periodically evaluate and potentially switch strategies\n    if (this.operationCount % this.evaluationWindow === 0) {\n      this.evaluateAndAdapt(entries, config);\n    }\n    \n    return this.currentPolicy.selectEvictionCandidates(entries, config, targetCount);\n  }\n\n  onAccess<T>(entry: CacheEntry<T>): void {\n    this.currentPolicy.onAccess(entry);\n  }\n\n  onInsert<T>(entry: CacheEntry<T>): void {\n    this.currentPolicy.onInsert(entry);\n  }\n\n  /**\n   * Evaluate current performance and adapt strategy if needed\n   */\n  private evaluateAndAdapt<T>(\n    entries: Map<string, CacheEntry<T>>,\n    config: AdvancedCacheConfig\n  ): void {\n    // Calculate access pattern metrics\n    const now = Date.now();\n    let totalAccesses = 0;\n    let recentAccesses = 0;\n    let accessVariance = 0;\n    let meanAccess = 0;\n    \n    const accessCounts: number[] = [];\n    \n    for (const entry of entries.values()) {\n      totalAccesses += entry.accessCount;\n      accessCounts.push(entry.accessCount);\n      \n      // Count recent accesses (last hour)\n      if (now - entry.lastAccessed < 3600000) {\n        recentAccesses++;\n      }\n    }\n    \n    if (accessCounts.length > 0) {\n      meanAccess = totalAccesses / accessCounts.length;\n      accessVariance = accessCounts.reduce((sum, count) => sum + Math.pow(count - meanAccess, 2), 0) / accessCounts.length;\n    }\n    \n    // Determine optimal strategy based on patterns\n    let optimalStrategy: EvictionStrategy;\n    \n    if (accessVariance > meanAccess * 2) {\n      // High variance suggests some items are much more popular -> LFU\n      optimalStrategy = 'lfu';\n    } else if (recentAccesses / entries.size > 0.8) {\n      // Most items accessed recently -> LRU\n      optimalStrategy = 'lru';\n    } else if (totalAccesses / entries.size < 2) {\n      // Low overall access -> FIFO\n      optimalStrategy = 'fifo';\n    } else {\n      // Mixed pattern -> TTL\n      optimalStrategy = 'ttl';\n    }\n    \n    // Switch strategy if different from current\n    if (optimalStrategy !== this.currentPolicy.strategy) {\n      this.currentPolicy = EvictionPolicyFactory.getPolicy(optimalStrategy);\n    }\n  }\n\n  /**\n   * Get current strategy being used\n   */\n  getCurrentStrategy(): EvictionStrategy {\n    return this.currentPolicy.strategy;\n  }\n}\n","/**\n * Cache Metrics Collection and Analysis for CREB-JS\n * \n * Provides comprehensive metrics collection, analysis, and reporting for cache performance.\n * Includes real-time monitoring, historical analysis, and performance recommendations.\n */\n\nimport { \n  CacheStats, \n  CacheMetrics, \n  EvictionStrategy, \n  CacheEvent, \n  CacheEventType \n} from './types';\n\n/**\n * Real-time cache metrics collector\n */\nexport class CacheMetricsCollector {\n  private stats!: CacheStats;\n  private history: CacheStats[] = [];\n  private maxHistorySize = 100;\n  private eventCounts = new Map<CacheEventType, number>();\n  private accessTimes: number[] = [];\n  private maxAccessTimeSamples = 1000;\n  \n  constructor() {\n    this.resetStats();\n  }\n\n  /**\n   * Reset all statistics\n   */\n  resetStats(): void {\n    this.stats = {\n      hits: 0,\n      misses: 0,\n      hitRate: 0,\n      size: 0,\n      memoryUsage: 0,\n      memoryUtilization: 0,\n      evictions: 0,\n      expirations: 0,\n      averageAccessTime: 0,\n      evictionBreakdown: {\n        'lru': 0,\n        'lfu': 0,\n        'fifo': 0,\n        'ttl': 0,\n        'random': 0\n      },\n      lastUpdated: Date.now()\n    };\n    this.eventCounts.clear();\n    this.accessTimes = [];\n  }\n\n  /**\n   * Record a cache event\n   */\n  recordEvent(event: CacheEvent): void {\n    const currentCount = this.eventCounts.get(event.type) || 0;\n    this.eventCounts.set(event.type, currentCount + 1);\n\n    switch (event.type) {\n      case 'hit':\n        this.stats.hits++;\n        break;\n      case 'miss':\n        this.stats.misses++;\n        break;\n      case 'eviction':\n        this.stats.evictions++;\n        if (event.metadata?.strategy) {\n          this.stats.evictionBreakdown[event.metadata.strategy]++;\n        }\n        break;\n      case 'expiration':\n        this.stats.expirations++;\n        break;\n    }\n\n    // Record access time if available\n    if (event.metadata?.latency !== undefined) {\n      this.accessTimes.push(event.metadata.latency);\n      if (this.accessTimes.length > this.maxAccessTimeSamples) {\n        this.accessTimes.shift(); // Remove oldest sample\n      }\n    }\n\n    this.updateComputedStats();\n  }\n\n  /**\n   * Update cache size and memory usage\n   */\n  updateCacheInfo(size: number, memoryUsage: number, maxMemory: number): void {\n    this.stats.size = size;\n    this.stats.memoryUsage = memoryUsage;\n    this.stats.memoryUtilization = maxMemory > 0 ? (memoryUsage / maxMemory) * 100 : 0;\n    this.stats.lastUpdated = Date.now();\n  }\n\n  /**\n   * Get current statistics\n   */\n  getStats(): CacheStats {\n    return { ...this.stats };\n  }\n\n  /**\n   * Get comprehensive metrics with historical data and trends\n   */\n  getMetrics(): CacheMetrics {\n    const current = this.getStats();\n    \n    // Calculate trends\n    const trends = this.calculateTrends();\n    \n    // Calculate peaks\n    const peaks = this.calculatePeaks();\n    \n    return {\n      current,\n      history: [...this.history],\n      trends,\n      peaks\n    };\n  }\n\n  /**\n   * Take a snapshot of current stats for historical tracking\n   */\n  takeSnapshot(): void {\n    const snapshot = this.getStats();\n    this.history.push(snapshot);\n    \n    if (this.history.length > this.maxHistorySize) {\n      this.history.shift(); // Remove oldest snapshot\n    }\n  }\n\n  /**\n   * Get event counts\n   */\n  getEventCounts(): Map<CacheEventType, number> {\n    return new Map(this.eventCounts);\n  }\n\n  /**\n   * Get access time percentiles\n   */\n  getAccessTimePercentiles(): { p50: number; p90: number; p95: number; p99: number } {\n    if (this.accessTimes.length === 0) {\n      return { p50: 0, p90: 0, p95: 0, p99: 0 };\n    }\n\n    const sorted = [...this.accessTimes].sort((a, b) => a - b);\n    const n = sorted.length;\n\n    return {\n      p50: this.getPercentile(sorted, 50),\n      p90: this.getPercentile(sorted, 90),\n      p95: this.getPercentile(sorted, 95),\n      p99: this.getPercentile(sorted, 99)\n    };\n  }\n\n  /**\n   * Update computed statistics\n   */\n  private updateComputedStats(): void {\n    const total = this.stats.hits + this.stats.misses;\n    this.stats.hitRate = total > 0 ? (this.stats.hits / total) * 100 : 0;\n    \n    if (this.accessTimes.length > 0) {\n      this.stats.averageAccessTime = this.accessTimes.reduce((sum, time) => sum + time, 0) / this.accessTimes.length;\n    }\n    \n    this.stats.lastUpdated = Date.now();\n  }\n\n  /**\n   * Calculate performance trends\n   */\n  private calculateTrends(): CacheMetrics['trends'] {\n    if (this.history.length < 3) {\n      return {\n        hitRateTrend: 'stable',\n        memoryTrend: 'stable',\n        latencyTrend: 'stable'\n      };\n    }\n\n    const recent = this.history.slice(-3);\n    \n    // Hit rate trend\n    const hitRateChange = recent[2].hitRate - recent[0].hitRate;\n    const hitRateTrend = Math.abs(hitRateChange) < 1 ? 'stable' : \n                        hitRateChange > 0 ? 'improving' : 'declining';\n    \n    // Memory trend\n    const memoryChange = recent[2].memoryUtilization - recent[0].memoryUtilization;\n    const memoryTrend = Math.abs(memoryChange) < 5 ? 'stable' :\n                        memoryChange > 0 ? 'increasing' : 'decreasing';\n    \n    // Latency trend\n    const latencyChange = recent[2].averageAccessTime - recent[0].averageAccessTime;\n    const latencyTrend = Math.abs(latencyChange) < 0.1 ? 'stable' :\n                         latencyChange < 0 ? 'improving' : 'degrading';\n\n    return {\n      hitRateTrend,\n      memoryTrend,\n      latencyTrend\n    };\n  }\n\n  /**\n   * Calculate peak performance metrics\n   */\n  private calculatePeaks(): CacheMetrics['peaks'] {\n    if (this.history.length === 0) {\n      return {\n        maxHitRate: this.stats.hitRate,\n        maxMemoryUsage: this.stats.memoryUsage,\n        minLatency: this.stats.averageAccessTime\n      };\n    }\n\n    const allStats = [...this.history, this.stats];\n    \n    return {\n      maxHitRate: Math.max(...allStats.map(s => s.hitRate)),\n      maxMemoryUsage: Math.max(...allStats.map(s => s.memoryUsage)),\n      minLatency: Math.min(...allStats.map(s => s.averageAccessTime))\n    };\n  }\n\n  /**\n   * Get percentile value from sorted array\n   */\n  private getPercentile(sorted: number[], percentile: number): number {\n    const index = Math.ceil((percentile / 100) * sorted.length) - 1;\n    return sorted[Math.max(0, Math.min(index, sorted.length - 1))];\n  }\n}\n\n/**\n * Cache performance analyzer\n */\nexport class CachePerformanceAnalyzer {\n  /**\n   * Analyze cache performance and provide recommendations\n   */\n  static analyze(metrics: CacheMetrics): {\n    score: number;\n    issues: string[];\n    recommendations: string[];\n    insights: string[];\n  } {\n    const { current, trends, history } = metrics;\n    const issues: string[] = [];\n    const recommendations: string[] = [];\n    const insights: string[] = [];\n    let score = 100;\n\n    // Analyze hit rate\n    if (current.hitRate < 50) {\n      score -= 30;\n      issues.push('Low cache hit rate');\n      recommendations.push('Consider increasing cache size or optimizing access patterns');\n    } else if (current.hitRate < 70) {\n      score -= 15;\n      issues.push('Moderate cache hit rate');\n      recommendations.push('Review cache eviction strategy');\n    }\n\n    // Analyze memory utilization\n    if (current.memoryUtilization > 90) {\n      score -= 20;\n      issues.push('High memory utilization');\n      recommendations.push('Increase memory limit or improve eviction policy');\n    } else if (current.memoryUtilization < 30) {\n      insights.push('Low memory utilization - cache size could be reduced');\n    }\n\n    // Analyze access time\n    if (current.averageAccessTime > 5) {\n      score -= 15;\n      issues.push('High average access time');\n      recommendations.push('Check for lock contention or optimize data structures');\n    }\n\n    // Analyze trends\n    if (trends.hitRateTrend === 'declining') {\n      score -= 10;\n      issues.push('Declining hit rate trend');\n      recommendations.push('Monitor access patterns and consider adaptive caching');\n    }\n\n    if (trends.latencyTrend === 'degrading') {\n      score -= 10;\n      issues.push('Increasing access latency');\n      recommendations.push('Profile cache operations for performance bottlenecks');\n    }\n\n    // Analyze eviction distribution\n    const totalEvictions = Object.values(current.evictionBreakdown).reduce((sum, count) => sum + count, 0);\n    if (totalEvictions > 0) {\n      const dominantStrategy = Object.entries(current.evictionBreakdown)\n        .reduce((max, [strategy, count]) => count > max.count ? { strategy, count } : max, { strategy: '', count: 0 });\n      \n      if (dominantStrategy.count / totalEvictions > 0.8) {\n        insights.push(`Cache primarily using ${dominantStrategy.strategy} eviction`);\n      } else {\n        insights.push('Cache using mixed eviction strategies - consider adaptive policy');\n      }\n    }\n\n    // Historical comparison\n    if (history.length > 0) {\n      const baseline = history[0];\n      const hitRateImprovement = current.hitRate - baseline.hitRate;\n      if (hitRateImprovement > 10) {\n        insights.push('Significant hit rate improvement observed');\n      } else if (hitRateImprovement < -10) {\n        issues.push('Hit rate has declined significantly');\n        recommendations.push('Review recent changes to access patterns or cache configuration');\n      }\n    }\n\n    return {\n      score: Math.max(0, score),\n      issues,\n      recommendations,\n      insights\n    };\n  }\n\n  /**\n   * Generate performance report\n   */\n  static generateReport(metrics: CacheMetrics): string {\n    const analysis = this.analyze(metrics);\n    const { current } = metrics;\n\n    let report = '# Cache Performance Report\\n\\n';\n    \n    report += `## Overall Score: ${analysis.score}/100\\n\\n`;\n    \n    report += '## Current Statistics\\n';\n    report += `- Hit Rate: ${current.hitRate.toFixed(2)}%\\n`;\n    report += `- Cache Size: ${current.size} entries\\n`;\n    report += `- Memory Usage: ${(current.memoryUsage / 1024 / 1024).toFixed(2)} MB (${current.memoryUtilization.toFixed(1)}%)\\n`;\n    report += `- Average Access Time: ${current.averageAccessTime.toFixed(2)}ms\\n`;\n    report += `- Evictions: ${current.evictions}\\n`;\n    report += `- Expirations: ${current.expirations}\\n\\n`;\n\n    report += '## Trends\\n';\n    report += `- Hit Rate: ${metrics.trends.hitRateTrend}\\n`;\n    report += `- Memory Usage: ${metrics.trends.memoryTrend}\\n`;\n    report += `- Latency: ${metrics.trends.latencyTrend}\\n\\n`;\n\n    if (analysis.issues.length > 0) {\n      report += '## Issues\\n';\n      analysis.issues.forEach(issue => {\n        report += `- ${issue}\\n`;\n      });\n      report += '\\n';\n    }\n\n    if (analysis.recommendations.length > 0) {\n      report += '## Recommendations\\n';\n      analysis.recommendations.forEach(rec => {\n        report += `- ${rec}\\n`;\n      });\n      report += '\\n';\n    }\n\n    if (analysis.insights.length > 0) {\n      report += '## Insights\\n';\n      analysis.insights.forEach(insight => {\n        report += `- ${insight}\\n`;\n      });\n      report += '\\n';\n    }\n\n    return report;\n  }\n}\n","/**\n * Advanced Cache Implementation for CREB-JS\n * \n * Production-ready cache with TTL, multiple eviction policies, metrics,\n * memory management, and thread safety.\n */\n\nimport { \n  IAdvancedCache, \n  CacheEntry, \n  AdvancedCacheConfig, \n  CacheResult, \n  CacheStats, \n  CacheMetrics,\n  CacheEvent,\n  CacheEventType,\n  CacheEventListener,\n  EvictionStrategy\n} from './types';\nimport { EvictionPolicyFactory } from './EvictionPolicies';\nimport { CacheMetricsCollector, CachePerformanceAnalyzer } from './CacheMetrics';\nimport { Injectable } from '../../core/decorators/Injectable';\n\n/**\n * Default cache configuration\n */\nconst DEFAULT_CONFIG: AdvancedCacheConfig = {\n  maxSize: 1000,\n  defaultTtl: 3600000, // 1 hour\n  evictionStrategy: 'lru',\n  fallbackStrategy: 'fifo',\n  maxMemoryBytes: 100 * 1024 * 1024, // 100MB\n  enableMetrics: true,\n  metricsInterval: 60000, // 1 minute\n  autoCleanup: true,\n  cleanupInterval: 300000, // 5 minutes\n  threadSafe: true\n};\n\n/**\n * Advanced cache implementation with comprehensive features\n */\n@Injectable()\nexport class AdvancedCache<T = any> implements IAdvancedCache<T> {\n  private entries = new Map<string, CacheEntry<T>>();\n  private config: AdvancedCacheConfig;\n  private metrics: CacheMetricsCollector;\n  private listeners = new Map<CacheEventType, Set<CacheEventListener<T>>>();\n  private insertionCounter = 0;\n  private cleanupTimer?: NodeJS.Timeout;\n  private metricsTimer?: NodeJS.Timeout;\n  private mutex = new AsyncMutex();\n\n  constructor(config: Partial<AdvancedCacheConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.metrics = new CacheMetricsCollector();\n    \n    // Start background tasks\n    if (this.config.autoCleanup) {\n      this.startCleanupTimer();\n    }\n    \n    if (this.config.enableMetrics) {\n      this.startMetricsTimer();\n    }\n  }\n\n  /**\n   * Get value from cache\n   */\n  async get(key: string): Promise<CacheResult<T>> {\n    const startTime = Date.now();\n    \n    if (this.config.threadSafe) {\n      return this.mutex.runExclusive(() => this.getInternal(key, startTime));\n    } else {\n      return this.getInternal(key, startTime);\n    }\n  }\n\n  /**\n   * Set value in cache\n   */\n  async set(key: string, value: T, ttl?: number): Promise<CacheResult<void>> {\n    const startTime = Date.now();\n    \n    if (this.config.threadSafe) {\n      return this.mutex.runExclusive(() => this.setInternal(key, value, ttl, startTime));\n    } else {\n      return this.setInternal(key, value, ttl, startTime);\n    }\n  }\n\n  /**\n   * Check if key exists in cache\n   */\n  async has(key: string): Promise<boolean> {\n    const entry = this.entries.get(key);\n    if (!entry) return false;\n    \n    // Check if expired\n    const now = Date.now();\n    if (entry.ttl > 0 && now >= entry.expiresAt) {\n      await this.deleteInternal(key);\n      return false;\n    }\n    \n    return true;\n  }\n\n  /**\n   * Delete entry from cache\n   */\n  async delete(key: string): Promise<boolean> {\n    if (this.config.threadSafe) {\n      return this.mutex.runExclusive(() => this.deleteInternal(key));\n    } else {\n      return this.deleteInternal(key);\n    }\n  }\n\n  /**\n   * Clear all entries\n   */\n  async clear(): Promise<void> {\n    if (this.config.threadSafe) {\n      return this.mutex.runExclusive(() => this.clearInternal());\n    } else {\n      return this.clearInternal();\n    }\n  }\n\n  /**\n   * Get current cache statistics\n   */\n  getStats(): CacheStats {\n    this.updateMetrics();\n    return this.metrics.getStats();\n  }\n\n  /**\n   * Get detailed metrics\n   */\n  getMetrics(): CacheMetrics {\n    this.metrics.takeSnapshot();\n    return this.metrics.getMetrics();\n  }\n\n  /**\n   * Force cleanup of expired entries\n   */\n  async cleanup(): Promise<number> {\n    if (this.config.threadSafe) {\n      return this.mutex.runExclusive(() => this.cleanupInternal());\n    } else {\n      return this.cleanupInternal();\n    }\n  }\n\n  /**\n   * Add event listener\n   */\n  addEventListener(type: CacheEventType, listener: CacheEventListener<T>): void {\n    if (!this.listeners.has(type)) {\n      this.listeners.set(type, new Set());\n    }\n    this.listeners.get(type)!.add(listener);\n  }\n\n  /**\n   * Remove event listener\n   */\n  removeEventListener(type: CacheEventType, listener: CacheEventListener<T>): void {\n    const typeListeners = this.listeners.get(type);\n    if (typeListeners) {\n      typeListeners.delete(listener);\n    }\n  }\n\n  /**\n   * Get all keys\n   */\n  keys(): string[] {\n    return Array.from(this.entries.keys());\n  }\n\n  /**\n   * Get cache size\n   */\n  size(): number {\n    return this.entries.size;\n  }\n\n  /**\n   * Get memory usage in bytes\n   */\n  memoryUsage(): number {\n    let total = 0;\n    for (const entry of this.entries.values()) {\n      total += entry.sizeBytes;\n    }\n    return total;\n  }\n\n  /**\n   * Check if cache is healthy\n   */\n  async healthCheck(): Promise<{\n    healthy: boolean;\n    issues: string[];\n    recommendations: string[];\n  }> {\n    const metrics = this.getMetrics();\n    const analysis = CachePerformanceAnalyzer.analyze(metrics);\n    \n    return {\n      healthy: analysis.score >= 70,\n      issues: analysis.issues,\n      recommendations: analysis.recommendations\n    };\n  }\n\n  /**\n   * Shutdown cache and cleanup resources\n   */\n  shutdown(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n    }\n    if (this.metricsTimer) {\n      clearInterval(this.metricsTimer);\n    }\n  }\n\n  // Internal implementation methods\n\n  private async getInternal(key: string, startTime: number): Promise<CacheResult<T>> {\n    const entry = this.entries.get(key);\n    const latency = Date.now() - startTime;\n    \n    if (!entry) {\n      this.emitEvent('miss', key, undefined, { latency });\n      return { success: true, hit: false, latency };\n    }\n    \n    // Check if expired\n    const now = Date.now();\n    if (entry.ttl > 0 && now >= entry.expiresAt) {\n      await this.deleteInternal(key);\n      this.emitEvent('miss', key, undefined, { latency, expired: true });\n      return { success: true, hit: false, latency, metadata: { expired: true } };\n    }\n    \n    // Update access metadata\n    const policy = EvictionPolicyFactory.getPolicy(this.config.evictionStrategy);\n    policy.onAccess(entry);\n    \n    this.emitEvent('hit', key, entry.value, { latency });\n    return { success: true, value: entry.value, hit: true, latency };\n  }\n\n  private async setInternal(key: string, value: T, ttl?: number, startTime?: number): Promise<CacheResult<void>> {\n    const now = Date.now();\n    const entryTtl = ttl ?? this.config.defaultTtl;\n    const latency = startTime ? now - startTime : 0;\n    \n    // Calculate size estimate\n    const sizeBytes = this.estimateSize(value);\n    \n    // Check memory constraints before adding\n    const currentMemory = this.memoryUsage();\n    if (this.config.maxMemoryBytes > 0 && currentMemory + sizeBytes > this.config.maxMemoryBytes) {\n      await this.evictForMemory(sizeBytes);\n    }\n    \n    // Check size constraints and evict if necessary\n    if (this.entries.size >= this.config.maxSize) {\n      await this.evictEntries(1);\n    }\n    \n    // Create new entry\n    const entry: CacheEntry<T> = {\n      value,\n      createdAt: now,\n      lastAccessed: now,\n      accessCount: 1,\n      ttl: entryTtl,\n      expiresAt: entryTtl > 0 ? now + entryTtl : 0,\n      sizeBytes,\n      insertionOrder: this.insertionCounter++\n    };\n    \n    // Update access metadata\n    const policy = EvictionPolicyFactory.getPolicy(this.config.evictionStrategy);\n    policy.onInsert(entry);\n    \n    // Store entry\n    this.entries.set(key, entry);\n    \n    this.emitEvent('set', key, value, { latency });\n    return { success: true, hit: false, latency };\n  }\n\n  private async deleteInternal(key: string): Promise<boolean> {\n    const entry = this.entries.get(key);\n    if (!entry) return false;\n    \n    this.entries.delete(key);\n    this.emitEvent('delete', key, entry.value);\n    return true;\n  }\n\n  private async clearInternal(): Promise<void> {\n    this.entries.clear();\n    this.insertionCounter = 0;\n    this.emitEvent('clear');\n  }\n\n  private async cleanupInternal(): Promise<number> {\n    const now = Date.now();\n    const expiredKeys: string[] = [];\n    \n    for (const [key, entry] of this.entries.entries()) {\n      if (entry.ttl > 0 && now >= entry.expiresAt) {\n        expiredKeys.push(key);\n      }\n    }\n    \n    for (const key of expiredKeys) {\n      this.entries.delete(key);\n      this.emitEvent('expiration', key);\n    }\n    \n    return expiredKeys.length;\n  }\n\n  private async evictEntries(count: number): Promise<void> {\n    const policy = EvictionPolicyFactory.getPolicy(this.config.evictionStrategy);\n    const candidates = policy.selectEvictionCandidates(this.entries, this.config, count);\n    \n    for (const key of candidates) {\n      const entry = this.entries.get(key);\n      if (entry) {\n        this.entries.delete(key);\n        this.emitEvent('eviction', key, entry.value, { \n          strategy: this.config.evictionStrategy \n        });\n      }\n    }\n  }\n\n  private async evictForMemory(requiredBytes: number): Promise<void> {\n    const currentMemory = this.memoryUsage();\n    const targetMemory = this.config.maxMemoryBytes - requiredBytes;\n    \n    if (currentMemory <= targetMemory) return;\n    \n    const bytesToEvict = currentMemory - targetMemory;\n    let evictedBytes = 0;\n    let evictedCount = 0;\n    \n    const policy = EvictionPolicyFactory.getPolicy(this.config.evictionStrategy);\n    \n    while (evictedBytes < bytesToEvict && this.entries.size > 0) {\n      const candidates = policy.selectEvictionCandidates(this.entries, this.config, 1);\n      if (candidates.length === 0) break;\n      \n      const key = candidates[0];\n      const entry = this.entries.get(key);\n      if (entry) {\n        evictedBytes += entry.sizeBytes;\n        evictedCount++;\n        this.entries.delete(key);\n        this.emitEvent('eviction', key, entry.value, { \n          strategy: this.config.evictionStrategy,\n          reason: 'memory-pressure',\n          memoryBefore: currentMemory,\n          memoryAfter: currentMemory - evictedBytes\n        });\n      }\n    }\n    \n    if (evictedBytes < bytesToEvict) {\n      this.emitEvent('memory-pressure', undefined, undefined, {\n        reason: 'Unable to free sufficient memory'\n      });\n    }\n  }\n\n  private estimateSize(value: T): number {\n    // Simple size estimation - could be improved with more sophisticated analysis\n    const str = JSON.stringify(value);\n    return str.length * 2; // Rough estimate for UTF-16 encoding\n  }\n\n  private emitEvent(type: CacheEventType, key?: string, value?: T, metadata?: any): void {\n    const event: CacheEvent<T> = {\n      type,\n      key,\n      value,\n      timestamp: Date.now(),\n      metadata\n    };\n    \n    // Record in metrics\n    this.metrics.recordEvent(event);\n    \n    // Notify listeners\n    const typeListeners = this.listeners.get(type);\n    if (typeListeners) {\n      for (const listener of typeListeners) {\n        try {\n          listener(event);\n        } catch (error) {\n          console.warn('Cache event listener error:', error);\n        }\n      }\n    }\n  }\n\n  private updateMetrics(): void {\n    const size = this.entries.size;\n    const memory = this.memoryUsage();\n    this.metrics.updateCacheInfo(size, memory, this.config.maxMemoryBytes);\n  }\n\n  private startCleanupTimer(): void {\n    this.cleanupTimer = setInterval(async () => {\n      try {\n        await this.cleanup();\n      } catch (error) {\n        console.warn('Cache cleanup error:', error);\n      }\n    }, this.config.cleanupInterval);\n  }\n\n  private startMetricsTimer(): void {\n    this.metricsTimer = setInterval(() => {\n      this.metrics.takeSnapshot();\n      this.emitEvent('stats-update');\n    }, this.config.metricsInterval);\n  }\n}\n\n/**\n * Simple async mutex for thread safety\n */\nclass AsyncMutex {\n  private locked = false;\n  private queue: Array<() => void> = [];\n\n  async runExclusive<R>(fn: () => R | Promise<R>): Promise<R> {\n    return new Promise((resolve, reject) => {\n      const run = async () => {\n        this.locked = true;\n        try {\n          const result = await fn();\n          resolve(result);\n        } catch (error) {\n          reject(error);\n        } finally {\n          this.locked = false;\n          const next = this.queue.shift();\n          if (next) {\n            next();\n          }\n        }\n      };\n\n      if (this.locked) {\n        this.queue.push(run);\n      } else {\n        run();\n      }\n    });\n  }\n}\n\n/**\n * Cache factory for creating configured cache instances\n */\nexport class CacheFactory {\n  private static presets: Record<string, Partial<AdvancedCacheConfig>> = {\n    'small': {\n      maxSize: 100,\n      maxMemoryBytes: 10 * 1024 * 1024, // 10MB\n      defaultTtl: 1800000, // 30 minutes\n      evictionStrategy: 'lru'\n    },\n    'medium': {\n      maxSize: 1000,\n      maxMemoryBytes: 50 * 1024 * 1024, // 50MB\n      defaultTtl: 3600000, // 1 hour\n      evictionStrategy: 'lru'\n    },\n    'large': {\n      maxSize: 10000,\n      maxMemoryBytes: 200 * 1024 * 1024, // 200MB\n      defaultTtl: 7200000, // 2 hours\n      evictionStrategy: 'lfu'\n    },\n    'memory-optimized': {\n      maxSize: 500,\n      maxMemoryBytes: 25 * 1024 * 1024, // 25MB\n      defaultTtl: 1800000, // 30 minutes\n      evictionStrategy: 'lfu',\n      autoCleanup: true,\n      cleanupInterval: 60000 // 1 minute\n    },\n    'performance-optimized': {\n      maxSize: 5000,\n      maxMemoryBytes: 100 * 1024 * 1024, // 100MB\n      defaultTtl: 3600000, // 1 hour\n      evictionStrategy: 'lru',\n      threadSafe: false, // Better performance but not thread-safe\n      enableMetrics: false // Better performance\n    }\n  };\n\n  /**\n   * Create cache with preset configuration\n   */\n  static create<T = any>(preset: keyof typeof CacheFactory.presets): AdvancedCache<T>;\n  static create<T = any>(config: Partial<AdvancedCacheConfig>): AdvancedCache<T>;\n  static create<T = any>(configOrPreset: keyof typeof CacheFactory.presets | Partial<AdvancedCacheConfig>): AdvancedCache<T> {\n    if (typeof configOrPreset === 'string') {\n      const presetConfig = this.presets[configOrPreset];\n      if (!presetConfig) {\n        throw new Error(`Unknown cache preset: ${configOrPreset}`);\n      }\n      return new AdvancedCache<T>(presetConfig);\n    } else {\n      return new AdvancedCache<T>(configOrPreset);\n    }\n  }\n\n  /**\n   * Register custom preset\n   */\n  static registerPreset(name: string, config: Partial<AdvancedCacheConfig>): void {\n    this.presets[name] = config;\n  }\n\n  /**\n   * Get available presets\n   */\n  static getPresets(): string[] {\n    return Object.keys(this.presets);\n  }\n}\n","/**\n * @fileoverview Type definitions for the CREB Validation Pipeline\n * \n * Provides comprehensive type definitions for:\n * - Validation results and errors\n * - Validator interfaces and compositions\n * - Rule definitions and dependencies\n * - Performance metrics and caching\n * - Chemical-specific validation types\n * \n * @version 1.0.0\n * @author CREB Team\n */\n\nimport { CREBError } from '../../core/errors/CREBError';\n\n// ============================================================================\n// Core Validation Types\n// ============================================================================\n\n/**\n * Severity levels for validation errors\n */\nexport enum ValidationSeverity {\n  INFO = 'info',\n  WARNING = 'warning',\n  ERROR = 'error',\n  CRITICAL = 'critical'\n}\n\n/**\n * Validation error with context and suggested fixes\n */\nexport interface ValidationError {\n  /** Error code for programmatic handling */\n  code: string;\n  /** Human-readable error message */\n  message: string;\n  /** Path to the invalid field/property */\n  path: string[];\n  /** Severity level of the error */\n  severity: ValidationSeverity;\n  /** Suggested fixes or corrections */\n  suggestions: string[];\n  /** Additional context data */\n  context?: Record<string, any>;\n  /** Original invalid value */\n  value?: any;\n}\n\n/**\n * Result of a validation operation\n */\nexport interface ValidationResult {\n  /** Whether validation passed */\n  isValid: boolean;\n  /** List of validation errors */\n  errors: ValidationError[];\n  /** Warnings that don't prevent validation */\n  warnings: ValidationError[];\n  /** Performance metrics */\n  metrics: ValidationMetrics;\n  /** Cached result indicator */\n  fromCache?: boolean;\n  /** Validation timestamp */\n  timestamp: Date;\n}\n\n/**\n * Performance metrics for validation operations\n */\nexport interface ValidationMetrics {\n  /** Total validation time in milliseconds */\n  duration: number;\n  /** Number of rules executed */\n  rulesExecuted: number;\n  /** Number of validators used */\n  validatorsUsed: number;\n  /** Cache hit/miss information */\n  cacheStats: {\n    hits: number;\n    misses: number;\n    hitRate: number;\n  };\n  /** Memory usage during validation */\n  memoryUsage?: number;\n}\n\n// ============================================================================\n// Validator Interfaces\n// ============================================================================\n\n/**\n * Configuration for a validator\n */\nexport interface ValidatorConfig {\n  /** Whether validator is enabled */\n  enabled: boolean;\n  /** Priority for execution order */\n  priority: number;\n  /** Timeout in milliseconds */\n  timeout?: number;\n  /** Whether to cache results */\n  cacheable: boolean;\n  /** Custom configuration options */\n  options?: Record<string, any>;\n}\n\n/**\n * Context passed to validators during execution\n */\nexport interface ValidationContext {\n  /** Path to current property being validated */\n  path: string[];\n  /** Root object being validated */\n  root: any;\n  /** Parent object of current property */\n  parent?: any;\n  /** Validation configuration */\n  config: ValidatorConfig;\n  /** Shared context data */\n  shared: Map<string, any>;\n  /** Performance tracker */\n  metrics: ValidationMetrics;\n}\n\n/**\n * Base validator interface\n */\nexport interface IValidator<T = any> {\n  /** Unique validator identifier */\n  readonly name: string;\n  /** Validator configuration */\n  readonly config: ValidatorConfig;\n  /** Dependencies on other validators */\n  readonly dependencies: string[];\n  \n  /**\n   * Validate a value\n   * @param value Value to validate\n   * @param context Validation context\n   * @returns Promise resolving to validation result\n   */\n  validate(value: T, context: ValidationContext): Promise<ValidationResult>;\n  \n  /**\n   * Check if validator can handle the given value type\n   * @param value Value to check\n   * @returns Whether validator can validate this value\n   */\n  canValidate(value: any): value is T;\n  \n  /**\n   * Get validation schema/metadata\n   * @returns Schema information\n   */\n  getSchema(): ValidationSchema;\n}\n\n/**\n * Composite validator that combines multiple validators\n */\nexport interface ICompositeValidator extends IValidator {\n  /** Child validators */\n  readonly validators: IValidator[];\n  \n  /**\n   * Add a validator to the composition\n   * @param validator Validator to add\n   */\n  addValidator(validator: IValidator): void;\n  \n  /**\n   * Remove a validator from the composition\n   * @param name Name of validator to remove\n   */\n  removeValidator(name: string): void;\n  \n  /**\n   * Get a specific validator by name\n   * @param name Validator name\n   */\n  getValidator(name: string): IValidator | undefined;\n}\n\n// ============================================================================\n// Rule System\n// ============================================================================\n\n/**\n * Validation rule definition\n */\nexport interface ValidationRule<T = any> {\n  /** Unique rule identifier */\n  name: string;\n  /** Human-readable description */\n  description: string;\n  /** Rule dependencies */\n  dependencies: string[];\n  /** Rule priority (higher = earlier execution) */\n  priority: number;\n  /** Whether rule can be cached */\n  cacheable: boolean;\n  \n  /**\n   * Execute the validation rule\n   * @param value Value to validate\n   * @param context Validation context\n   * @returns Promise resolving to rule result\n   */\n  execute(value: T, context: ValidationContext): Promise<RuleResult>;\n  \n  /**\n   * Check if rule applies to the given value\n   * @param value Value to check\n   * @returns Whether rule should be executed\n   */\n  appliesTo(value: any): boolean;\n}\n\n/**\n * Result of executing a validation rule\n */\nexport interface RuleResult {\n  /** Whether rule passed */\n  passed: boolean;\n  /** Error if rule failed */\n  error?: ValidationError;\n  /** Execution time in milliseconds */\n  duration: number;\n  /** Whether result was cached */\n  cached: boolean;\n  /** Additional metadata */\n  metadata?: Record<string, any>;\n}\n\n/**\n * Rule dependency graph node\n */\nexport interface RuleDependencyNode {\n  /** Rule name */\n  name: string;\n  /** Dependent rules */\n  dependencies: string[];\n  /** Rules that depend on this one */\n  dependents: string[];\n  /** Execution order */\n  order: number;\n}\n\n// ============================================================================\n// Chemical Validation Types\n// ============================================================================\n\n/**\n * Chemical formula validation configuration\n */\nexport interface ChemicalFormulaConfig {\n  /** Allow isotope notation (e.g., 13C) */\n  allowIsotopes: boolean;\n  /** Allow radical notation (e.g., •) */\n  allowRadicals: boolean;\n  /** Allow charge notation (e.g., +, -, 2+) */\n  allowCharges: boolean;\n  /** Allow complex notation (e.g., [Cu(NH3)4]2+) */\n  allowComplexes: boolean;\n  /** Maximum allowed atoms per formula */\n  maxAtoms: number;\n  /** Allowed elements (empty = all) */\n  allowedElements: string[];\n}\n\n/**\n * Thermodynamic property validation configuration\n */\nexport interface ThermodynamicConfig {\n  /** Temperature range in Kelvin */\n  temperatureRange: { min: number; max: number };\n  /** Pressure range in Pa */\n  pressureRange: { min: number; max: number };\n  /** Enthalpy range in kJ/mol */\n  enthalpyRange: { min: number; max: number };\n  /** Entropy range in J/(mol·K) */\n  entropyRange: { min: number; max: number };\n  /** Heat capacity range in J/(mol·K) */\n  heatCapacityRange: { min: number; max: number };\n}\n\n/**\n * Safety data validation configuration\n */\nexport interface SafetyDataConfig {\n  /** Required safety properties */\n  requiredProperties: string[];\n  /** GHS classification validation */\n  validateGHS: boolean;\n  /** UN number validation */\n  validateUN: boolean;\n  /** Flash point validation */\n  validateFlashPoint: boolean;\n  /** Autoignition temperature validation */\n  validateAutoignition: boolean;\n}\n\n/**\n * Chemical compound data for validation\n */\nexport interface ChemicalCompound {\n  /** Chemical formula */\n  formula: string;\n  /** IUPAC name */\n  name?: string;\n  /** CAS registry number */\n  cas?: string;\n  /** SMILES notation */\n  smiles?: string;\n  /** InChI identifier */\n  inchi?: string;\n  /** Molecular weight in g/mol */\n  molecularWeight?: number;\n  /** Thermodynamic properties */\n  thermodynamics?: ThermodynamicProperties;\n  /** Safety data */\n  safety?: SafetyData;\n}\n\n/**\n * Thermodynamic properties\n */\nexport interface ThermodynamicProperties {\n  /** Standard enthalpy of formation (kJ/mol) */\n  enthalpyFormation?: number;\n  /** Standard entropy (J/(mol·K)) */\n  entropy?: number;\n  /** Heat capacity at constant pressure (J/(mol·K)) */\n  heatCapacity?: number;\n  /** Standard Gibbs free energy (kJ/mol) */\n  gibbsEnergy?: number;\n  /** Melting point (K) */\n  meltingPoint?: number;\n  /** Boiling point (K) */\n  boilingPoint?: number;\n  /** Density (g/cm³) */\n  density?: number;\n}\n\n/**\n * Safety data\n */\nexport interface SafetyData {\n  /** GHS hazard classifications */\n  ghsClassifications?: string[];\n  /** Hazard statements */\n  hazardStatements?: string[];\n  /** Precautionary statements */\n  precautionaryStatements?: string[];\n  /** UN number */\n  unNumber?: string;\n  /** Flash point (°C) */\n  flashPoint?: number;\n  /** Autoignition temperature (°C) */\n  autoignitionTemperature?: number;\n  /** Vapor pressure (Pa) */\n  vaporPressure?: number;\n  /** Water solubility (g/L) */\n  waterSolubility?: number;\n}\n\n// ============================================================================\n// Pipeline Configuration\n// ============================================================================\n\n/**\n * Validation pipeline configuration\n */\nexport interface ValidationPipelineConfig {\n  /** Maximum validation time in milliseconds */\n  timeout: number;\n  /** Whether to enable caching */\n  enableCaching: boolean;\n  /** Cache TTL in milliseconds */\n  cacheTTL: number;\n  /** Maximum cache size */\n  maxCacheSize: number;\n  /** Whether to continue on errors */\n  continueOnError: boolean;\n  /** Parallel execution settings */\n  parallel: {\n    enabled: boolean;\n    maxConcurrency: number;\n  };\n  /** Performance monitoring settings */\n  monitoring: {\n    enabled: boolean;\n    sampleRate: number;\n  };\n}\n\n/**\n * Validation schema definition\n */\nexport interface ValidationSchema {\n  /** Schema name */\n  name: string;\n  /** Schema version */\n  version: string;\n  /** Schema description */\n  description: string;\n  /** Supported data types */\n  types: string[];\n  /** Required validators */\n  requiredValidators: string[];\n  /** Optional validators */\n  optionalValidators: string[];\n  /** Custom properties */\n  properties: Record<string, any>;\n}\n\n// ============================================================================\n// Cache Types\n// ============================================================================\n\n/**\n * Cache key for validation results\n */\nexport interface ValidationCacheKey {\n  /** Validator name */\n  validator: string;\n  /** Value hash */\n  valueHash: string;\n  /** Config hash */\n  configHash: string;\n  /** Schema version */\n  schemaVersion: string;\n}\n\n/**\n * Cached validation result\n */\nexport interface CachedValidationResult {\n  /** Validation result */\n  result: ValidationResult;\n  /** Cache creation timestamp */\n  createdAt: Date;\n  /** Cache expiration timestamp */\n  expiresAt: Date;\n  /** Number of cache hits */\n  hitCount: number;\n}\n\n// ============================================================================\n// Event Types\n// ============================================================================\n\n/**\n * Validation pipeline events\n */\nexport interface ValidationEvents {\n  'validation:started': { target: any; validators: string[] };\n  'validation:completed': { result: ValidationResult };\n  'validation:error': { error: CREBError };\n  'validator:executed': { validator: string; result: ValidationResult };\n  'rule:executed': { rule: string; result: RuleResult };\n  'cache:hit': { key: ValidationCacheKey };\n  'cache:miss': { key: ValidationCacheKey };\n  'performance:threshold': { metric: string; value: number; threshold: number };\n}\n\n// ============================================================================\n// Utility Types\n// ============================================================================\n\n/**\n * Validation builder for fluent API\n */\nexport interface ValidationBuilder<T> {\n  /** Add a validator */\n  addValidator(validator: IValidator<T>): ValidationBuilder<T>;\n  /** Add a rule */\n  addRule(rule: ValidationRule<T>): ValidationBuilder<T>;\n  /** Set configuration */\n  withConfig(config: Partial<ValidationPipelineConfig>): ValidationBuilder<T>;\n  /** Build the validator */\n  build(): IValidator<T>;\n}\n\n/**\n * Validator factory function type\n */\nexport type ValidatorFactory<T = any> = (config?: any) => IValidator<T>;\n\n/**\n * Rule factory function type\n */\nexport type RuleFactory<T = any> = (config?: any) => ValidationRule<T>;\n\n// ============================================================================\n// Type Guards\n// ============================================================================\n\n/**\n * Type guard for validation results\n */\nexport function isValidationResult(obj: any): obj is ValidationResult {\n  return obj && \n    typeof obj.isValid === 'boolean' &&\n    Array.isArray(obj.errors) &&\n    Array.isArray(obj.warnings) &&\n    obj.metrics &&\n    obj.timestamp instanceof Date;\n}\n\n/**\n * Type guard for validation errors\n */\nexport function isValidationError(obj: any): obj is ValidationError {\n  return obj &&\n    typeof obj.code === 'string' &&\n    typeof obj.message === 'string' &&\n    Array.isArray(obj.path) &&\n    Object.values(ValidationSeverity).includes(obj.severity) &&\n    Array.isArray(obj.suggestions);\n}\n\n/**\n * Type guard for validators\n */\nexport function isValidator(obj: any): obj is IValidator {\n  return obj &&\n    typeof obj.name === 'string' &&\n    obj.config &&\n    Array.isArray(obj.dependencies) &&\n    typeof obj.validate === 'function' &&\n    typeof obj.canValidate === 'function' &&\n    typeof obj.getSchema === 'function';\n}\n\n/**\n * Type guard for validation rules\n */\nexport function isValidationRule(obj: any): obj is ValidationRule {\n  return obj &&\n    typeof obj.name === 'string' &&\n    typeof obj.description === 'string' &&\n    Array.isArray(obj.dependencies) &&\n    typeof obj.priority === 'number' &&\n    typeof obj.execute === 'function' &&\n    typeof obj.appliesTo === 'function';\n}\n","/**\n * @fileoverview Base validator classes and validator composition utilities\n * \n * Provides foundation classes for building custom validators:\n * - BaseValidator: Abstract base class with common functionality\n * - CompositeValidator: Combines multiple validators\n * - ValidatorBuilder: Fluent API for building validators\n * - SpecializedValidators: Chemistry-specific validator helpers\n * \n * @version 1.0.0\n * @author CREB Team\n */\n\nimport {\n  IValidator,\n  ICompositeValidator,\n  ValidationResult,\n  ValidationContext,\n  ValidatorConfig,\n  ValidationSchema,\n  ValidationError,\n  ValidationSeverity,\n  ValidationBuilder\n} from '../types';\nimport { CREBError, ValidationError as CREBValidationError } from '../../../core/errors/CREBError';\n\n// ============================================================================\n// Base Validator\n// ============================================================================\n\n/**\n * Abstract base class for all validators\n */\nexport abstract class BaseValidator<T = any> implements IValidator<T> {\n  public readonly name: string;\n  public readonly config: ValidatorConfig;\n  public readonly dependencies: string[];\n  protected readonly schema: ValidationSchema;\n\n  constructor(\n    name: string,\n    config: Partial<ValidatorConfig> = {},\n    dependencies: string[] = []\n  ) {\n    this.name = name;\n    this.dependencies = dependencies;\n    this.config = {\n      enabled: true,\n      priority: 0,\n      timeout: 5000,\n      cacheable: true,\n      ...config\n    };\n    \n    this.schema = this.createSchema();\n  }\n\n  /**\n   * Validate a value - must be implemented by subclasses\n   */\n  abstract validate(value: T, context: ValidationContext): Promise<ValidationResult>;\n\n  /**\n   * Check if validator can handle the given value type\n   */\n  abstract canValidate(value: any): value is T;\n\n  /**\n   * Create validation schema - can be overridden by subclasses\n   */\n  protected createSchema(): ValidationSchema {\n    return {\n      name: this.name,\n      version: '1.0.0',\n      description: `Schema for ${this.name} validator`,\n      types: ['any'],\n      requiredValidators: [],\n      optionalValidators: [],\n      properties: {}\n    };\n  }\n\n  /**\n   * Get validation schema\n   */\n  getSchema(): ValidationSchema {\n    return { ...this.schema };\n  }\n\n  /**\n   * Create a validation error\n   */\n  protected createError(\n    code: string,\n    message: string,\n    path: string[],\n    severity: ValidationSeverity = ValidationSeverity.ERROR,\n    suggestions: string[] = [],\n    context?: Record<string, any>,\n    value?: any\n  ): ValidationError {\n    return {\n      code,\n      message,\n      path,\n      severity,\n      suggestions,\n      context,\n      value\n    };\n  }\n\n  /**\n   * Create a successful validation result\n   */\n  protected createSuccessResult(\n    context: ValidationContext,\n    warnings: ValidationError[] = []\n  ): ValidationResult {\n    return {\n      isValid: true,\n      errors: [],\n      warnings,\n      metrics: {\n        duration: 0,\n        rulesExecuted: 0,\n        validatorsUsed: 1,\n        cacheStats: { hits: 0, misses: 0, hitRate: 0 }\n      },\n      timestamp: new Date()\n    };\n  }\n\n  /**\n   * Create a failed validation result\n   */\n  protected createFailureResult(\n    errors: ValidationError[],\n    context: ValidationContext,\n    warnings: ValidationError[] = []\n  ): ValidationResult {\n    return {\n      isValid: false,\n      errors,\n      warnings,\n      metrics: {\n        duration: 0,\n        rulesExecuted: 0,\n        validatorsUsed: 1,\n        cacheStats: { hits: 0, misses: 0, hitRate: 0 }\n      },\n      timestamp: new Date()\n    };\n  }\n\n  /**\n   * Validate configuration\n   */\n  protected validateConfig(): void {\n    if (this.config.timeout && this.config.timeout <= 0) {\n      throw new CREBValidationError(\n        'Validator timeout must be positive',\n        { validator: this.name, timeout: this.config.timeout }\n      );\n    }\n  }\n}\n\n// ============================================================================\n// Composite Validator\n// ============================================================================\n\n/**\n * Validator that combines multiple validators\n */\nexport class CompositeValidator extends BaseValidator implements ICompositeValidator {\n  public readonly validators: IValidator[] = [];\n  private readonly validatorMap = new Map<string, IValidator>();\n\n  constructor(\n    name: string,\n    validators: IValidator[] = [],\n    config: Partial<ValidatorConfig> = {}\n  ) {\n    super(name, config);\n    \n    for (const validator of validators) {\n      this.addValidator(validator);\n    }\n  }\n\n  /**\n   * Add a validator to the composition\n   */\n  addValidator(validator: IValidator): void {\n    if (this.validatorMap.has(validator.name)) {\n      throw new CREBValidationError(\n        `Validator '${validator.name}' already exists in composite`,\n        { composite: this.name, validator: validator.name }\n      );\n    }\n\n    this.validators.push(validator);\n    this.validatorMap.set(validator.name, validator);\n  }\n\n  /**\n   * Remove a validator from the composition\n   */\n  removeValidator(name: string): void {\n    const index = this.validators.findIndex(v => v.name === name);\n    if (index !== -1) {\n      this.validators.splice(index, 1);\n      this.validatorMap.delete(name);\n    }\n  }\n\n  /**\n   * Get a specific validator by name\n   */\n  getValidator(name: string): IValidator | undefined {\n    return this.validatorMap.get(name);\n  }\n\n  /**\n   * Check if composite can validate the value\n   */\n  canValidate(value: any): value is any {\n    return this.validators.some(validator => validator.canValidate(value));\n  }\n\n  /**\n   * Validate using all applicable validators\n   */\n  async validate(value: any, context: ValidationContext): Promise<ValidationResult> {\n    const startTime = Date.now();\n    const applicableValidators = this.validators.filter(v => v.canValidate(value));\n\n    if (applicableValidators.length === 0) {\n      return this.createSuccessResult(context);\n    }\n\n    const results: ValidationResult[] = [];\n    const allErrors: ValidationError[] = [];\n    const allWarnings: ValidationError[] = [];\n\n    // Execute all applicable validators\n    for (const validator of applicableValidators) {\n      try {\n        const result = await validator.validate(value, context);\n        results.push(result);\n        allErrors.push(...result.errors);\n        allWarnings.push(...result.warnings);\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        const validationError = this.createError(\n          'COMPOSITE_VALIDATOR_ERROR',\n          `Validator '${validator.name}' failed: ${errorMessage}`,\n          context.path,\n          ValidationSeverity.ERROR,\n          ['Check validator configuration', 'Verify input data'],\n          { validator: validator.name, error: errorMessage }\n        );\n        allErrors.push(validationError);\n      }\n    }\n\n    const duration = Date.now() - startTime;\n    const totalRules = results.reduce((sum, r) => sum + r.metrics.rulesExecuted, 0);\n    const totalCacheHits = results.reduce((sum, r) => sum + r.metrics.cacheStats.hits, 0);\n    const totalCacheMisses = results.reduce((sum, r) => sum + r.metrics.cacheStats.misses, 0);\n    const totalCache = totalCacheHits + totalCacheMisses;\n\n    return {\n      isValid: allErrors.length === 0,\n      errors: allErrors,\n      warnings: allWarnings,\n      metrics: {\n        duration,\n        rulesExecuted: totalRules,\n        validatorsUsed: applicableValidators.length,\n        cacheStats: {\n          hits: totalCacheHits,\n          misses: totalCacheMisses,\n          hitRate: totalCache > 0 ? totalCacheHits / totalCache : 0\n        }\n      },\n      timestamp: new Date()\n    };\n  }\n\n  /**\n   * Create composite schema\n   */\n  protected createSchema(): ValidationSchema {\n    const childSchemas = this.validators.map(v => v.getSchema());\n    const allTypes = new Set<string>();\n    const allRequired = new Set<string>();\n    const allOptional = new Set<string>();\n\n    for (const schema of childSchemas) {\n      schema.types.forEach(type => allTypes.add(type));\n      schema.requiredValidators.forEach(req => allRequired.add(req));\n      schema.optionalValidators.forEach(opt => allOptional.add(opt));\n    }\n\n    return {\n      name: this.name,\n      version: '1.0.0',\n      description: `Composite schema for ${this.name}`,\n      types: Array.from(allTypes),\n      requiredValidators: Array.from(allRequired),\n      optionalValidators: Array.from(allOptional),\n      properties: {\n        compositeOf: this.validators.map(v => v.name),\n        childSchemas\n      }\n    };\n  }\n}\n\n// ============================================================================\n// Validation Builder\n// ============================================================================\n\n/**\n * Fluent API for building validators\n */\nexport class FluentValidationBuilder<T> implements ValidationBuilder<T> {\n  private readonly validators: IValidator<T>[] = [];\n  private readonly rules: any[] = []; // ValidationRule<T>[] - avoiding circular dependency\n  private config: Partial<ValidatorConfig> = {};\n  private name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  /**\n   * Add a validator to the builder\n   */\n  addValidator(validator: IValidator<T>): ValidationBuilder<T> {\n    this.validators.push(validator);\n    return this;\n  }\n\n  /**\n   * Add a rule to the builder\n   */\n  addRule(rule: any): ValidationBuilder<T> { // ValidationRule<T>\n    this.rules.push(rule);\n    return this;\n  }\n\n  /**\n   * Set configuration for the validator\n   */\n  withConfig(config: Partial<ValidatorConfig>): ValidationBuilder<T> {\n    this.config = { ...this.config, ...config };\n    return this;\n  }\n\n  /**\n   * Set validator name\n   */\n  withName(name: string): ValidationBuilder<T> {\n    this.name = name;\n    return this;\n  }\n\n  /**\n   * Set validator priority\n   */\n  withPriority(priority: number): ValidationBuilder<T> {\n    this.config.priority = priority;\n    return this;\n  }\n\n  /**\n   * Enable/disable caching\n   */\n  withCaching(enabled: boolean): ValidationBuilder<T> {\n    this.config.cacheable = enabled;\n    return this;\n  }\n\n  /**\n   * Set validator timeout\n   */\n  withTimeout(timeout: number): ValidationBuilder<T> {\n    this.config.timeout = timeout;\n    return this;\n  }\n\n  /**\n   * Build the composite validator\n   */\n  build(): IValidator<T> {\n    if (this.validators.length === 0) {\n      throw new CREBValidationError(\n        'Cannot build validator without any validators',\n        { name: this.name }\n      );\n    }\n\n    if (this.validators.length === 1) {\n      return this.validators[0];\n    }\n\n    return new CompositeValidator(this.name, this.validators, this.config) as IValidator<T>;\n  }\n}\n\n// ============================================================================\n// Specialized Validator Helpers\n// ============================================================================\n\n/**\n * Base class for chemistry-specific validators\n */\nexport abstract class ChemistryValidator<T> extends BaseValidator<T> {\n  protected readonly elementSymbols = new Set([\n    'H', 'He', 'Li', 'Be', 'B', 'C', 'N', 'O', 'F', 'Ne',\n    'Na', 'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca',\n    'Sc', 'Ti', 'V', 'Cr', 'Mn', 'Fe', 'Co', 'Ni', 'Cu', 'Zn',\n    'Ga', 'Ge', 'As', 'Se', 'Br', 'Kr', 'Rb', 'Sr', 'Y', 'Zr',\n    'Nb', 'Mo', 'Tc', 'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn',\n    'Sb', 'Te', 'I', 'Xe', 'Cs', 'Ba', 'La', 'Ce', 'Pr', 'Nd',\n    'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb',\n    'Lu', 'Hf', 'Ta', 'W', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg',\n    'Tl', 'Pb', 'Bi', 'Po', 'At', 'Rn', 'Fr', 'Ra', 'Ac', 'Th',\n    'Pa', 'U', 'Np', 'Pu', 'Am', 'Cm', 'Bk', 'Cf', 'Es', 'Fm',\n    'Md', 'No', 'Lr', 'Rf', 'Db', 'Sg', 'Bh', 'Hs', 'Mt', 'Ds',\n    'Rg', 'Cn', 'Nh', 'Fl', 'Mc', 'Lv', 'Ts', 'Og'\n  ]);\n\n  /**\n   * Validate element symbol\n   */\n  protected isValidElement(symbol: string): boolean {\n    return this.elementSymbols.has(symbol);\n  }\n\n  /**\n   * Parse chemical formula into elements and counts\n   */\n  protected parseFormula(formula: string): Map<string, number> {\n    const elements = new Map<string, number>();\n    const regex = /([A-Z][a-z]?)(\\d*)/g;\n    let match;\n\n    while ((match = regex.exec(formula)) !== null) {\n      const element = match[1];\n      const count = parseInt(match[2] || '1', 10);\n      \n      if (!this.isValidElement(element)) {\n        throw new CREBValidationError(\n          `Invalid element symbol: ${element}`,\n          { element, formula }\n        );\n      }\n\n      elements.set(element, (elements.get(element) || 0) + count);\n    }\n\n    return elements;\n  }\n\n  /**\n   * Calculate molecular weight from formula\n   */\n  protected calculateMolecularWeight(elements: Map<string, number>): number {\n    // Simplified atomic weights (should be imported from constants)\n    const atomicWeights: Record<string, number> = {\n      'H': 1.008, 'C': 12.011, 'N': 14.007, 'O': 15.999,\n      'F': 18.998, 'P': 30.974, 'S': 32.06, 'Cl': 35.45,\n      'K': 39.098, 'Ca': 40.078, 'Fe': 55.845, 'Cu': 63.546,\n      'Zn': 65.38, 'Br': 79.904, 'Ag': 107.868, 'I': 126.90\n      // Add more as needed\n    };\n\n    let totalWeight = 0;\n    for (const [element, count] of elements) {\n      const weight = atomicWeights[element];\n      if (weight === undefined) {\n        throw new CREBValidationError(\n          `Atomic weight not available for element: ${element}`,\n          { element }\n        );\n      }\n      totalWeight += weight * count;\n    }\n\n    return totalWeight;\n  }\n}\n\n/**\n * Async validator base class\n */\nexport abstract class AsyncValidator<T> extends BaseValidator<T> {\n  protected readonly concurrencyLimit: number;\n  private activeTasks = 0;\n\n  constructor(\n    name: string,\n    config: Partial<ValidatorConfig> = {},\n    dependencies: string[] = [],\n    concurrencyLimit = 5\n  ) {\n    super(name, config, dependencies);\n    this.concurrencyLimit = concurrencyLimit;\n  }\n\n  /**\n   * Execute async validation with concurrency control\n   */\n  async validate(value: T, context: ValidationContext): Promise<ValidationResult> {\n    await this.waitForSlot();\n    this.activeTasks++;\n\n    try {\n      return await this.performAsyncValidation(value, context);\n    } finally {\n      this.activeTasks--;\n    }\n  }\n\n  /**\n   * Perform the actual async validation - must be implemented by subclasses\n   */\n  protected abstract performAsyncValidation(\n    value: T,\n    context: ValidationContext\n  ): Promise<ValidationResult>;\n\n  /**\n   * Wait for an available slot\n   */\n  private async waitForSlot(): Promise<void> {\n    while (this.activeTasks >= this.concurrencyLimit) {\n      await new Promise(resolve => setTimeout(resolve, 10));\n    }\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\n/**\n * Create a validation builder\n */\nexport function createValidator<T>(name: string): ValidationBuilder<T> {\n  return new FluentValidationBuilder<T>(name);\n}\n\n/**\n * Create a composite validator\n */\nexport function createCompositeValidator(\n  name: string,\n  validators: IValidator[],\n  config?: Partial<ValidatorConfig>\n): ICompositeValidator {\n  return new CompositeValidator(name, validators, config);\n}\n\n/**\n * Create a chemistry validator (helper for common chemistry validations)\n */\nexport function createChemistryValidator<T>(\n  name: string,\n  validationFn: (value: T, context: ValidationContext) => Promise<ValidationResult>,\n  canValidateFn: (value: any) => value is T,\n  config?: Partial<ValidatorConfig>\n): IValidator<T> {\n  return new (class extends ChemistryValidator<T> {\n    canValidate = canValidateFn;\n    validate = validationFn;\n  })(name, config);\n}\n","/**\n * @fileoverview Chemical Formula Validator\n * \n * Validates chemical formulas with support for:\n * - Basic chemical formulas (H2O, C6H12O6)\n * - Isotope notation (13C, 2H)\n * - Charge notation (+, -, 2+, 3-)\n * - Complex notation ([Cu(NH3)4]2+)\n * - Radical notation (•)\n * \n * @version 1.0.0\n * @author CREB Team\n */\n\nimport {\n  ValidationResult,\n  ValidationContext,\n  ValidatorConfig,\n  ValidationSchema,\n  ValidationSeverity,\n  ValidationError,\n  ChemicalFormulaConfig\n} from '../types';\nimport { ChemistryValidator } from './BaseValidator';\n\n/**\n * Validator for chemical formulas\n */\nexport class ChemicalFormulaValidator extends ChemistryValidator<string> {\n  private readonly formulaConfig: ChemicalFormulaConfig;\n\n  constructor(\n    config: Partial<ValidatorConfig> = {},\n    formulaConfig: Partial<ChemicalFormulaConfig> = {}\n  ) {\n    super('chemical-formula', config);\n    \n    this.formulaConfig = {\n      allowIsotopes: true,\n      allowRadicals: false,\n      allowCharges: true,\n      allowComplexes: true,\n      maxAtoms: 1000,\n      allowedElements: [], // Empty = all elements allowed\n      ...formulaConfig\n    };\n  }\n\n  /**\n   * Check if validator can handle the given value\n   */\n  canValidate(value: any): value is string {\n    return typeof value === 'string' && value.trim().length > 0;\n  }\n\n  /**\n   * Validate chemical formula\n   */\n  async validate(value: string, context: ValidationContext): Promise<ValidationResult> {\n    const startTime = Date.now();\n    const errors = [];\n    const warnings = [];\n\n    try {\n      const formula = value.trim();\n      \n      // Basic format validation\n      if (!this.hasValidFormat(formula)) {\n        // Check for specific types of invalid format\n        const invalidCharPattern = /[^A-Za-z0-9\\(\\)\\[\\]\\+\\-\\s\\•]/;\n        const unicodePattern = /[₀-₉⁰-⁹]/;\n        \n        let errorMessage = `Invalid chemical formula format: ${formula}`;\n        let suggestions = [\n          'Use standard chemical notation (e.g., H2O, CaCl2)',\n          'Ensure element symbols start with uppercase letter',\n          'Use numbers for atom counts, not letters'\n        ];\n\n        if (invalidCharPattern.test(formula)) {\n          errorMessage = `Formula contains invalid character(s): ${formula}`;\n          suggestions = [\n            'Remove special characters like !, @, #, $, %, etc.',\n            'Use only letters, numbers, parentheses, brackets, and +/- signs'\n          ];\n        } else if (unicodePattern.test(formula)) {\n          errorMessage = `Formula contains invalid character(s) (Unicode subscripts/superscripts): ${formula}`;\n          suggestions = [\n            'Use regular numbers instead of subscript/superscript characters',\n            'Example: Use H2O instead of H₂O'\n          ];\n        }\n\n        errors.push(this.createError(\n          'INVALID_FORMULA_FORMAT',\n          errorMessage,\n          context.path,\n          ValidationSeverity.ERROR,\n          suggestions,\n          { formula },\n          value\n        ));\n      } else {\n        // Detailed validation\n        const validationResults = this.validateFormulaComponents(formula, context.path);\n        errors.push(...validationResults.errors);\n        warnings.push(...validationResults.warnings);\n      }\n\n      const duration = Date.now() - startTime;\n      const isValid = errors.length === 0;\n\n      return {\n        isValid,\n        errors,\n        warnings,\n        metrics: {\n          duration,\n          rulesExecuted: 1,\n          validatorsUsed: 1,\n          cacheStats: { hits: 0, misses: 1, hitRate: 0 }\n        },\n        timestamp: new Date()\n      };\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return this.createFailureResult([\n        this.createError(\n          'FORMULA_VALIDATION_ERROR',\n          `Formula validation failed: ${errorMessage}`,\n          context.path,\n          ValidationSeverity.ERROR,\n          ['Check formula syntax', 'Verify element symbols'],\n          { error: errorMessage },\n          value\n        )\n      ], context);\n    }\n  }\n\n  /**\n   * Basic format validation\n   */\n  private hasValidFormat(formula: string): boolean {\n    // Check for invalid characters first\n    const invalidCharPattern = /[^A-Za-z0-9\\(\\)\\[\\]\\+\\-\\s\\•]/;\n    if (invalidCharPattern.test(formula)) {\n      return false;\n    }\n\n    // Check for Unicode subscript/superscript characters\n    const unicodePattern = /[₀-₉⁰-⁹]/;\n    if (unicodePattern.test(formula)) {\n      return false;\n    }\n\n    // Basic regex for chemical formula validation\n    // Allows: Element symbols, numbers, brackets, charges, isotopes\n    const basicPattern = /^[A-Z][a-z]?(\\d*[A-Z][a-z]?\\d*)*(\\[.*\\])?[+-]?\\d*[+-]?$/;\n    return basicPattern.test(formula.replace(/[\\(\\)\\[\\]]/g, ''));\n  }\n\n  /**\n   * Detailed component validation\n   */\n  private validateFormulaComponents(\n    formula: string,\n    path: string[]\n  ): { errors: ValidationError[], warnings: ValidationError[] } {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n\n    try {\n      // Handle complex formulas with brackets\n      if (this.hasComplexNotation(formula)) {\n        if (!this.formulaConfig.allowComplexes) {\n          errors.push(this.createError(\n            'COMPLEX_NOTATION_NOT_ALLOWED',\n            'Complex notation with brackets is not allowed',\n            path,\n            ValidationSeverity.ERROR,\n            ['Use simple formula notation without brackets'],\n            { formula }\n          ));\n          return { errors, warnings };\n        }\n        return this.validateComplexFormula(formula, path);\n      }\n\n      // Handle charged formulas\n      if (this.hasChargeNotation(formula)) {\n        if (!this.formulaConfig.allowCharges) {\n          errors.push(this.createError(\n            'CHARGE_NOTATION_NOT_ALLOWED',\n            'Charge notation is not allowed',\n            path,\n            ValidationSeverity.ERROR,\n            ['Remove charge notation from formula'],\n            { formula }\n          ));\n          return { errors, warnings };\n        }\n        return this.validateChargedFormula(formula, path);\n      }\n\n      // Validate simple formula\n      return this.validateSimpleFormula(formula, path);\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      errors.push(this.createError(\n        'COMPONENT_VALIDATION_ERROR',\n        `Component validation failed: ${errorMessage}`,\n        path,\n        ValidationSeverity.ERROR,\n        ['Check formula structure'],\n        { error: errorMessage }\n      ));\n      return { errors, warnings };\n    }\n  }\n\n  /**\n   * Validate simple chemical formula\n   */\n  private validateSimpleFormula(\n    formula: string,\n    path: string[]\n  ): { errors: ValidationError[], warnings: ValidationError[] } {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n\n    // Extract elements and counts\n    const elementPattern = /([A-Z][a-z]?)(\\d*)/g;\n    const elements = new Map<string, number>();\n    let totalAtoms = 0;\n    let match;\n\n    while ((match = elementPattern.exec(formula)) !== null) {\n      const element = match[1];\n      const count = parseInt(match[2] || '1', 10);\n\n      // Validate element symbol\n      if (!this.isValidElement(element)) {\n        errors.push(this.createError(\n          'INVALID_ELEMENT',\n          `Invalid element symbol: ${element}`,\n          path,\n          ValidationSeverity.ERROR,\n          [\n            'Check periodic table for correct element symbols',\n            'Ensure proper capitalization (first letter uppercase, second lowercase)'\n          ],\n          { element, formula }\n        ));\n      }\n\n      // Check if element is allowed\n      if (this.formulaConfig.allowedElements.length > 0 &&\n          !this.formulaConfig.allowedElements.includes(element)) {\n        errors.push(this.createError(\n          'ELEMENT_NOT_ALLOWED',\n          `Element ${element} is not allowed`,\n          path,\n          ValidationSeverity.ERROR,\n          [`Use only allowed elements: ${this.formulaConfig.allowedElements.join(', ')}`],\n          { element, allowedElements: this.formulaConfig.allowedElements }\n        ));\n      }\n\n      // Check for isotope notation\n      if (/^\\d+[A-Z]/.test(element)) {\n        if (!this.formulaConfig.allowIsotopes) {\n          errors.push(this.createError(\n            'ISOTOPE_NOTATION_NOT_ALLOWED',\n            'Isotope notation is not allowed',\n            path,\n            ValidationSeverity.ERROR,\n            ['Remove isotope numbers from element symbols'],\n            { element, formula }\n          ));\n        }\n      }\n\n      elements.set(element, count);\n      totalAtoms += count;\n    }\n\n    // Check maximum atoms limit\n    if (totalAtoms > this.formulaConfig.maxAtoms) {\n      errors.push(this.createError(\n        'TOO_MANY_ATOMS',\n        `Formula contains ${totalAtoms} atoms, maximum allowed is ${this.formulaConfig.maxAtoms}`,\n        path,\n        ValidationSeverity.ERROR,\n        ['Simplify the formula', 'Use smaller atom counts'],\n        { totalAtoms, maxAtoms: this.formulaConfig.maxAtoms }\n      ));\n    }\n\n    // Warnings for unusual patterns\n    if (totalAtoms > 100) {\n      warnings.push(this.createError(\n        'LARGE_MOLECULE',\n        `Formula contains ${totalAtoms} atoms, which is unusually large`,\n        path,\n        ValidationSeverity.WARNING,\n        ['Verify the formula is correct', 'Consider if this represents a polymer unit'],\n        { totalAtoms }\n      ));\n    }\n\n    return { errors, warnings };\n  }\n\n  /**\n   * Validate charged formula\n   */\n  private validateChargedFormula(\n    formula: string,\n    path: string[]\n  ): { errors: ValidationError[], warnings: ValidationError[] } {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n\n    // Extract charge part\n    const chargeMatch = formula.match(/([+-]\\d*|\\d*[+-])$/);\n    if (!chargeMatch) {\n      errors.push(this.createError(\n        'INVALID_CHARGE_FORMAT',\n        'Invalid charge notation format',\n        path,\n        ValidationSeverity.ERROR,\n        ['Use format like +, -, 2+, 3- for charges'],\n        { formula }\n      ));\n      return { errors, warnings };\n    }\n\n    const charge = chargeMatch[1];\n    const neutralFormula = formula.replace(chargeMatch[0], '');\n\n    // Validate the neutral part\n    const neutralResults = this.validateSimpleFormula(neutralFormula, path);\n    errors.push(...neutralResults.errors);\n    warnings.push(...neutralResults.warnings);\n\n    // Validate charge format\n    if (!/^[+-]\\d*$|^\\d*[+-]$/.test(charge)) {\n      errors.push(this.createError(\n        'INVALID_CHARGE_VALUE',\n        `Invalid charge value: ${charge}`,\n        path,\n        ValidationSeverity.ERROR,\n        ['Use valid charge notation (e.g., +, -, 2+, 3-)'],\n        { charge, formula }\n      ));\n    }\n\n    return { errors, warnings };\n  }\n\n  /**\n   * Validate complex formula with brackets\n   */\n  private validateComplexFormula(\n    formula: string,\n    path: string[]\n  ): { errors: ValidationError[], warnings: ValidationError[] } {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationError[] = [];\n\n    // Check bracket balance\n    if (!this.areBracketsBalanced(formula)) {\n      errors.push(this.createError(\n        'UNBALANCED_BRACKETS',\n        'Unbalanced brackets in complex formula',\n        path,\n        ValidationSeverity.ERROR,\n        ['Ensure all brackets are properly paired', 'Check for missing opening or closing brackets'],\n        { formula }\n      ));\n      return { errors, warnings };\n    }\n\n    // For complex formulas, we would need more sophisticated parsing\n    // This is a simplified validation\n    warnings.push(this.createError(\n      'COMPLEX_FORMULA_LIMITED_VALIDATION',\n      'Limited validation for complex formulas',\n      path,\n      ValidationSeverity.WARNING,\n      ['Complex formulas receive basic validation only'],\n      { formula }\n    ));\n\n    return { errors, warnings };\n  }\n\n  /**\n   * Check if formula has complex notation\n   */\n  private hasComplexNotation(formula: string): boolean {\n    return /[\\[\\]]/.test(formula);\n  }\n\n  /**\n   * Check if formula has charge notation\n   */\n  private hasChargeNotation(formula: string): boolean {\n    return /[+-]\\d*$|\\d*[+-]$/.test(formula);\n  }\n\n  /**\n   * Check if brackets are balanced\n   */\n  private areBracketsBalanced(formula: string): boolean {\n    const stack: string[] = [];\n    const pairs: Record<string, string> = { '[': ']', '(': ')' };\n\n    for (const char of formula) {\n      if (char in pairs) {\n        stack.push(char);\n      } else if (Object.values(pairs).includes(char)) {\n        const last = stack.pop();\n        if (!last || pairs[last] !== char) {\n          return false;\n        }\n      }\n    }\n\n    return stack.length === 0;\n  }\n\n  /**\n   * Create validation schema\n   */\n  protected createSchema(): ValidationSchema {\n    return {\n      name: this.name,\n      version: '1.0.0',\n      description: 'Chemical formula validation schema',\n      types: ['string'],\n      requiredValidators: [],\n      optionalValidators: [],\n      properties: {\n        config: this.formulaConfig,\n        examples: ['H2O', 'CaCl2', 'C6H12O6', '[Cu(NH3)4]2+'],\n        patterns: [\n          'Simple formulas: ElementCount (e.g., H2O)',\n          'Charged formulas: Formula+/- (e.g., Ca2+)',\n          'Complex formulas: [Formula]Charge (e.g., [Cu(NH3)4]2+)'\n        ]\n      }\n    };\n  }\n}\n","/**\n * @fileoverview Validation Metrics Dashboard and Performance Monitoring\n * \n * Provides comprehensive performance monitoring and metrics collection\n * for the validation pipeline with real-time dashboard capabilities.\n */\n\nimport { EventEmitter } from 'events';\nimport {\n  ValidationResult,\n  ValidationError,\n  ValidationMetrics,\n  ValidationSeverity\n} from '../types';\n\n/**\n * Real-time validation metrics and performance data\n */\nexport interface ValidationPerformanceMetrics {\n  /** Total validations performed */\n  totalValidations: number;\n  /** Successful validations */\n  successfulValidations: number;\n  /** Failed validations */\n  failedValidations: number;\n  /** Average validation time in milliseconds */\n  averageValidationTime: number;\n  /** Peak validation time in milliseconds */\n  peakValidationTime: number;\n  /** Minimum validation time in milliseconds */\n  minValidationTime: number;\n  /** Validations per second (current rate) */\n  validationsPerSecond: number;\n  /** Cache hit rate percentage */\n  cacheHitRate: number;\n  /** Memory usage for validation operations */\n  memoryUsage: MemoryUsageMetrics;\n  /** Error distribution by type */\n  errorDistribution: Map<string, number>;\n  /** Performance percentiles */\n  percentiles: PerformancePercentiles;\n  /** Validator-specific metrics */\n  validatorMetrics: Map<string, ValidatorPerformanceMetrics>;\n  /** Time series data for trending */\n  timeSeries: TimeSeries[];\n}\n\n/**\n * Memory usage metrics\n */\nexport interface MemoryUsageMetrics {\n  /** Current memory usage in MB */\n  current: number;\n  /** Peak memory usage in MB */\n  peak: number;\n  /** Average memory usage in MB */\n  average: number;\n  /** Memory allocation rate */\n  allocationRate: number;\n}\n\n/**\n * Performance percentile data\n */\nexport interface PerformancePercentiles {\n  p50: number;  // Median\n  p75: number;  // 75th percentile\n  p90: number;  // 90th percentile\n  p95: number;  // 95th percentile\n  p99: number;  // 99th percentile\n}\n\n/**\n * Validator-specific performance metrics\n */\nexport interface ValidatorPerformanceMetrics {\n  /** Validator name */\n  name: string;\n  /** Number of executions */\n  executions: number;\n  /** Average execution time */\n  averageTime: number;\n  /** Success rate percentage */\n  successRate: number;\n  /** Error count */\n  errorCount: number;\n  /** Cache hit rate for this validator */\n  cacheHitRate: number;\n}\n\n/**\n * Time series data point\n */\nexport interface TimeSeries {\n  /** Timestamp */\n  timestamp: Date;\n  /** Validations per second at this time */\n  validationsPerSecond: number;\n  /** Average response time at this time */\n  averageResponseTime: number;\n  /** Error rate at this time */\n  errorRate: number;\n  /** Memory usage at this time */\n  memoryUsage: number;\n}\n\n/**\n * Dashboard configuration options\n */\nexport interface DashboardConfig {\n  /** Update interval in milliseconds */\n  updateInterval: number;\n  /** Maximum time series data points to keep */\n  maxTimeSeriesPoints: number;\n  /** Whether to enable real-time updates */\n  realTimeUpdates: boolean;\n  /** Memory monitoring enabled */\n  memoryMonitoring: boolean;\n  /** Percentile calculation enabled */\n  percentileTracking: boolean;\n}\n\n/**\n * Validation Metrics Dashboard\n * \n * Provides real-time monitoring and analytics for validation performance\n */\nexport class ValidationMetricsDashboard extends EventEmitter {\n  private metrics: ValidationPerformanceMetrics;\n  private config: DashboardConfig;\n  private validationTimes: number[] = [];\n  private recentValidations: Array<{ timestamp: Date; duration: number; success: boolean }> = [];\n  private memorySnapshots: Array<{ timestamp: Date; usage: number }> = [];\n  private updateTimer?: NodeJS.Timeout;\n  private startTime: Date;\n\n  constructor(config: Partial<DashboardConfig> = {}) {\n    super();\n    \n    this.config = {\n      updateInterval: 1000,\n      maxTimeSeriesPoints: 100,\n      realTimeUpdates: true,\n      memoryMonitoring: true,\n      percentileTracking: true,\n      ...config\n    };\n\n    this.startTime = new Date();\n    this.metrics = this.initializeMetrics();\n    \n    if (this.config.realTimeUpdates) {\n      this.startRealTimeUpdates();\n    }\n  }\n\n  /**\n   * Record a validation result for metrics tracking\n   */\n  recordValidation(result: ValidationResult): void {\n    const now = new Date();\n    const success = result.isValid;\n    const duration = result.metrics.duration;\n\n    // Update basic counters\n    this.metrics.totalValidations++;\n    if (success) {\n      this.metrics.successfulValidations++;\n    } else {\n      this.metrics.failedValidations++;\n    }\n\n    // Update timing metrics\n    this.validationTimes.push(duration);\n    this.recentValidations.push({ timestamp: now, duration, success });\n\n    // Update min/max/average times\n    this.updateTimingMetrics(duration);\n\n    // Update cache metrics\n    if (result.fromCache) {\n      this.updateCacheMetrics();\n    }\n\n    // Record error distribution\n    if (!success) {\n      this.recordErrors(result.errors);\n    }\n\n    // Update validator-specific metrics\n    this.updateValidatorMetrics(result);\n\n    // Memory monitoring\n    if (this.config.memoryMonitoring) {\n      this.recordMemoryUsage();\n    }\n\n    // Cleanup old data\n    this.cleanupOldData();\n\n    // Emit update event\n    this.emit('metrics:updated', this.metrics);\n  }\n\n  /**\n   * Get current performance metrics\n   */\n  getMetrics(): ValidationPerformanceMetrics {\n    this.updateDerivedMetrics();\n    return { ...this.metrics };\n  }\n\n  /**\n   * Get metrics for a specific time range\n   */\n  getMetricsForTimeRange(startTime: Date, endTime: Date): ValidationPerformanceMetrics {\n    const filteredValidations = this.recentValidations.filter(\n      v => v.timestamp >= startTime && v.timestamp <= endTime\n    );\n\n    const rangeMetrics = this.calculateMetricsForValidations(filteredValidations);\n    return rangeMetrics;\n  }\n\n  /**\n   * Get real-time dashboard data formatted for display\n   */\n  getDashboardData(): any {\n    const current = this.getMetrics();\n    \n    return {\n      summary: {\n        total: current.totalValidations,\n        successful: current.successfulValidations,\n        failed: current.failedValidations,\n        successRate: this.calculateSuccessRate(),\n        avgTime: current.averageValidationTime,\n        cacheHitRate: current.cacheHitRate\n      },\n      performance: {\n        currentRate: current.validationsPerSecond,\n        avgTime: current.averageValidationTime,\n        peakTime: current.peakValidationTime,\n        minTime: current.minValidationTime,\n        percentiles: current.percentiles\n      },\n      memory: current.memoryUsage,\n      validators: Array.from(current.validatorMetrics.values()),\n      timeSeries: current.timeSeries.slice(-20), // Last 20 data points\n      errors: this.getTopErrors(10)\n    };\n  }\n\n  /**\n   * Reset all metrics\n   */\n  reset(): void {\n    this.metrics = this.initializeMetrics();\n    this.validationTimes = [];\n    this.recentValidations = [];\n    this.memorySnapshots = [];\n    this.startTime = new Date();\n    \n    this.emit('metrics:reset');\n  }\n\n  /**\n   * Export metrics to JSON\n   */\n  exportMetrics(): string {\n    return JSON.stringify({\n      metrics: this.getMetrics(),\n      metadata: {\n        exportTime: new Date(),\n        uptime: Date.now() - this.startTime.getTime(),\n        config: this.config\n      }\n    }, null, 2);\n  }\n\n  /**\n   * Stop the dashboard and cleanup resources\n   */\n  stop(): void {\n    if (this.updateTimer) {\n      clearInterval(this.updateTimer);\n      this.updateTimer = undefined;\n    }\n    \n    this.removeAllListeners();\n  }\n\n  // ============================================================================\n  // Private Methods\n  // ============================================================================\n\n  private initializeMetrics(): ValidationPerformanceMetrics {\n    return {\n      totalValidations: 0,\n      successfulValidations: 0,\n      failedValidations: 0,\n      averageValidationTime: 0,\n      peakValidationTime: 0,\n      minValidationTime: Infinity,\n      validationsPerSecond: 0,\n      cacheHitRate: 0,\n      memoryUsage: {\n        current: 0,\n        peak: 0,\n        average: 0,\n        allocationRate: 0\n      },\n      errorDistribution: new Map(),\n      percentiles: {\n        p50: 0,\n        p75: 0,\n        p90: 0,\n        p95: 0,\n        p99: 0\n      },\n      validatorMetrics: new Map(),\n      timeSeries: []\n    };\n  }\n\n  private startRealTimeUpdates(): void {\n    this.updateTimer = setInterval(() => {\n      this.updateDerivedMetrics();\n      this.addTimeSeriesPoint();\n      this.emit('metrics:realtime', this.metrics);\n    }, this.config.updateInterval);\n  }\n\n  private updateTimingMetrics(duration: number): void {\n    this.metrics.peakValidationTime = Math.max(this.metrics.peakValidationTime, duration);\n    this.metrics.minValidationTime = Math.min(this.metrics.minValidationTime, duration);\n    \n    // Calculate rolling average\n    const sum = this.validationTimes.reduce((a, b) => a + b, 0);\n    this.metrics.averageValidationTime = sum / this.validationTimes.length;\n  }\n\n  private updateCacheMetrics(): void {\n    // Cache hit rate calculation would be based on cache-specific logic\n    // This is a simplified version\n    const totalWithCache = this.recentValidations.length;\n    const cacheHits = this.recentValidations.filter(v => \n      v.duration < this.metrics.averageValidationTime * 0.1\n    ).length;\n    \n    this.metrics.cacheHitRate = totalWithCache > 0 ? (cacheHits / totalWithCache) * 100 : 0;\n  }\n\n  private recordErrors(errors: ValidationError[]): void {\n    errors.forEach(error => {\n      const errorType = error.code || 'UNKNOWN_ERROR';\n      const current = this.metrics.errorDistribution.get(errorType) || 0;\n      this.metrics.errorDistribution.set(errorType, current + 1);\n    });\n  }\n\n  private updateValidatorMetrics(result: ValidationResult): void {\n    // This would be updated based on which validators were used\n    // For now, we'll create a generic entry\n    const validatorName = 'default-validator';\n    \n    let validatorMetrics = this.metrics.validatorMetrics.get(validatorName);\n    if (!validatorMetrics) {\n      validatorMetrics = {\n        name: validatorName,\n        executions: 0,\n        averageTime: 0,\n        successRate: 0,\n        errorCount: 0,\n        cacheHitRate: 0\n      };\n      this.metrics.validatorMetrics.set(validatorName, validatorMetrics);\n    }\n\n    validatorMetrics.executions++;\n    validatorMetrics.averageTime = \n      (validatorMetrics.averageTime * (validatorMetrics.executions - 1) + result.metrics.duration) / \n      validatorMetrics.executions;\n    \n    if (!result.isValid) {\n      validatorMetrics.errorCount++;\n    }\n    \n    validatorMetrics.successRate = \n      ((validatorMetrics.executions - validatorMetrics.errorCount) / validatorMetrics.executions) * 100;\n  }\n\n  private recordMemoryUsage(): void {\n    if (typeof process !== 'undefined' && process.memoryUsage) {\n      const memUsage = process.memoryUsage();\n      const currentMB = memUsage.heapUsed / 1024 / 1024;\n      \n      this.metrics.memoryUsage.current = currentMB;\n      this.metrics.memoryUsage.peak = Math.max(this.metrics.memoryUsage.peak, currentMB);\n      \n      this.memorySnapshots.push({ timestamp: new Date(), usage: currentMB });\n      \n      // Calculate average\n      const sum = this.memorySnapshots.reduce((a, b) => a + b.usage, 0);\n      this.metrics.memoryUsage.average = sum / this.memorySnapshots.length;\n    }\n  }\n\n  private updateDerivedMetrics(): void {\n    // Update validations per second\n    const oneSecondAgo = new Date(Date.now() - 1000);\n    const recentCount = this.recentValidations.filter(v => v.timestamp > oneSecondAgo).length;\n    this.metrics.validationsPerSecond = recentCount;\n\n    // Update percentiles if enabled\n    if (this.config.percentileTracking && this.validationTimes.length > 0) {\n      this.calculatePercentiles();\n    }\n  }\n\n  private calculatePercentiles(): void {\n    const sorted = [...this.validationTimes].sort((a, b) => a - b);\n    const len = sorted.length;\n\n    this.metrics.percentiles = {\n      p50: this.getPercentile(sorted, 0.5),\n      p75: this.getPercentile(sorted, 0.75),\n      p90: this.getPercentile(sorted, 0.9),\n      p95: this.getPercentile(sorted, 0.95),\n      p99: this.getPercentile(sorted, 0.99)\n    };\n  }\n\n  private getPercentile(sortedArray: number[], percentile: number): number {\n    const index = Math.ceil(sortedArray.length * percentile) - 1;\n    return sortedArray[Math.max(0, index)] || 0;\n  }\n\n  private addTimeSeriesPoint(): void {\n    const now = new Date();\n    const oneMinuteAgo = new Date(now.getTime() - 60000);\n    const recentValidations = this.recentValidations.filter(v => v.timestamp > oneMinuteAgo);\n    \n    const errorCount = recentValidations.filter(v => !v.success).length;\n    const errorRate = recentValidations.length > 0 ? (errorCount / recentValidations.length) * 100 : 0;\n\n    const point: TimeSeries = {\n      timestamp: now,\n      validationsPerSecond: this.metrics.validationsPerSecond,\n      averageResponseTime: this.metrics.averageValidationTime,\n      errorRate,\n      memoryUsage: this.metrics.memoryUsage.current\n    };\n\n    this.metrics.timeSeries.push(point);\n\n    // Keep only the last N points\n    if (this.metrics.timeSeries.length > this.config.maxTimeSeriesPoints) {\n      this.metrics.timeSeries = this.metrics.timeSeries.slice(-this.config.maxTimeSeriesPoints);\n    }\n  }\n\n  private cleanupOldData(): void {\n    const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000);\n    \n    // Keep only recent validations (last 5 minutes)\n    this.recentValidations = this.recentValidations.filter(v => v.timestamp > fiveMinutesAgo);\n    \n    // Keep only recent memory snapshots\n    this.memorySnapshots = this.memorySnapshots.filter(s => s.timestamp > fiveMinutesAgo);\n    \n    // Keep only recent validation times (last 1000 entries)\n    if (this.validationTimes.length > 1000) {\n      this.validationTimes = this.validationTimes.slice(-1000);\n    }\n  }\n\n  private calculateSuccessRate(): number {\n    return this.metrics.totalValidations > 0 ? \n      (this.metrics.successfulValidations / this.metrics.totalValidations) * 100 : 0;\n  }\n\n  private getTopErrors(count: number): Array<{ type: string; count: number; percentage: number }> {\n    const totalErrors = Array.from(this.metrics.errorDistribution.values()).reduce((a, b) => a + b, 0);\n    \n    return Array.from(this.metrics.errorDistribution.entries())\n      .map(([type, count]) => ({\n        type,\n        count,\n        percentage: totalErrors > 0 ? (count / totalErrors) * 100 : 0\n      }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, count);\n  }\n\n  private calculateMetricsForValidations(validations: Array<{ timestamp: Date; duration: number; success: boolean }>): ValidationPerformanceMetrics {\n    // Implementation for calculating metrics for a specific set of validations\n    // This is a simplified version - full implementation would calculate all metrics\n    const total = validations.length;\n    const successful = validations.filter(v => v.success).length;\n    const failed = total - successful;\n    \n    const durations = validations.map(v => v.duration);\n    const avgTime = durations.length > 0 ? durations.reduce((a, b) => a + b, 0) / durations.length : 0;\n    \n    return {\n      ...this.initializeMetrics(),\n      totalValidations: total,\n      successfulValidations: successful,\n      failedValidations: failed,\n      averageValidationTime: avgTime,\n      peakValidationTime: Math.max(...durations, 0),\n      minValidationTime: Math.min(...durations, Infinity)\n    };\n  }\n}\n\n/**\n * Global metrics dashboard instance\n */\nexport const globalValidationDashboard = new ValidationMetricsDashboard();\n\n/**\n * Create a new metrics dashboard with custom configuration\n */\nexport function createValidationDashboard(config?: Partial<DashboardConfig>): ValidationMetricsDashboard {\n  return new ValidationMetricsDashboard(config);\n}\n\n/**\n * Utility function to format metrics for console display\n */\nexport function formatMetricsForConsole(metrics: ValidationPerformanceMetrics): string {\n  const lines = [\n    '=== Validation Metrics Dashboard ===',\n    `Total Validations: ${metrics.totalValidations}`,\n    `Success Rate: ${((metrics.successfulValidations / metrics.totalValidations) * 100).toFixed(2)}%`,\n    `Average Time: ${metrics.averageValidationTime.toFixed(2)}ms`,\n    `Peak Time: ${metrics.peakValidationTime.toFixed(2)}ms`,\n    `Validations/sec: ${metrics.validationsPerSecond}`,\n    `Cache Hit Rate: ${metrics.cacheHitRate.toFixed(2)}%`,\n    `Memory Usage: ${metrics.memoryUsage.current.toFixed(2)}MB`,\n    '================================='\n  ];\n  \n  return lines.join('\\n');\n}\n","/**\n * CREB Data Validation Module\n * \n * Provides comprehensive validation capabilities for chemistry data:\n * - Composable validator architecture\n * - Async validation support with dependency management\n * - Performance optimization with caching and parallelization\n * - Chemical-specific validation capabilities\n * \n * @version 1.0.0\n * @author CREB Team\n */\n\n// Core Pipeline and Types\nexport * from './types';\nexport { ValidationPipeline } from './ValidationPipeline';\n\n// Import types for use in factory functions\nimport { \n  ValidationResult,\n  ValidationError,\n  ValidationContext,\n  ChemicalFormulaConfig,\n  ThermodynamicProperties,\n  ValidationSeverity\n} from './types';\nimport { ValidationPipeline } from './ValidationPipeline';\nimport { ChemicalFormulaValidator } from './validators/ChemicalFormulaValidator';\nimport { ThermodynamicPropertiesValidator } from './validators/ThermodynamicPropertiesValidator';\n\n// Validators\nexport { \n  BaseValidator,\n  CompositeValidator,\n  FluentValidationBuilder,\n  ChemistryValidator,\n  AsyncValidator,\n  createValidator,\n  createCompositeValidator,\n  createChemistryValidator\n} from './validators/BaseValidator';\n\nexport { ChemicalFormulaValidator } from './validators/ChemicalFormulaValidator';\nexport { ThermodynamicPropertiesValidator } from './validators/ThermodynamicPropertiesValidator';\n\n// Rules\nexport {\n  BaseRule,\n  SyncRule,\n  AsyncRule,\n  CompositeRule,\n  ConditionalRule,\n  RangeRule,\n  PatternRule,\n  createRangeRule,\n  createPatternRule,\n  createAndRule,\n  createOrRule,\n  createConditionalRule\n} from './rules/BaseRule';\n\nexport {\n  ChemicalFormulaFormatRule,\n  ValidElementSymbolsRule,\n  MolecularWeightConsistencyRule,\n  GHSClassificationRule,\n  FlashPointValidationRule,\n  PhaseTransitionConsistencyRule,\n  CASNumberValidationRule,\n  createChemicalFormulaFormatRule,\n  createValidElementSymbolsRule,\n  createMolecularWeightConsistencyRule,\n  createGHSClassificationRule,\n  createFlashPointValidationRule,\n  createPhaseTransitionConsistencyRule,\n  createCASNumberValidationRule,\n  getChemicalFormulaRules,\n  getSafetyDataRules,\n  getCompoundValidationRules\n} from './rules/ChemistryRules';\n\n// Metrics and Dashboard\nexport {\n  ValidationMetricsDashboard,\n  createValidationDashboard,\n  globalValidationDashboard,\n  formatMetricsForConsole\n} from './metrics/ValidationMetricsDashboard';\n\n/**\n * Creates a new validation pipeline with common defaults\n */\nexport function createValidationPipeline(): ValidationPipeline {\n  return new ValidationPipeline({\n    timeout: 30000,\n    enableCaching: true,\n    cacheTTL: 300000,\n    maxCacheSize: 1000,\n    continueOnError: true,\n    parallel: {\n      enabled: true,\n      maxConcurrency: 10\n    },\n    monitoring: {\n      enabled: true,\n      sampleRate: 1.0\n    }\n  });\n}\n\n/**\n * Creates a performance-optimized validation pipeline\n */\nexport function createFastValidationPipeline(): ValidationPipeline {\n  return new ValidationPipeline({\n    timeout: 10000,\n    enableCaching: true,\n    cacheTTL: 600000,\n    maxCacheSize: 5000,\n    continueOnError: false,\n    parallel: {\n      enabled: true,\n      maxConcurrency: 20\n    },\n    monitoring: {\n      enabled: true,\n      sampleRate: 0.1\n    }\n  });\n}\n\n/**\n * Creates a thorough validation pipeline for comprehensive checks\n */\nexport function createThoroughValidationPipeline(): ValidationPipeline {\n  return new ValidationPipeline({\n    timeout: 120000,\n    enableCaching: false,\n    cacheTTL: 0,\n    maxCacheSize: 0,\n    continueOnError: true,\n    parallel: {\n      enabled: false,\n      maxConcurrency: 1\n    },\n    monitoring: {\n      enabled: true,\n      sampleRate: 1.0\n    }\n  });\n}\n\n/**\n * Quick validation for chemical formulas\n */\nexport async function validateChemicalFormula(\n  formula: string,\n  config?: Partial<ChemicalFormulaConfig>\n): Promise<ValidationResult> {\n  const validator = new ChemicalFormulaValidator(undefined, config);\n  const context: ValidationContext = {\n    path: ['formula'],\n    root: { formula },\n    config: {\n      enabled: true,\n      priority: 1,\n      cacheable: true\n    },\n    shared: new Map(),\n    metrics: {\n      duration: 0,\n      rulesExecuted: 0,\n      validatorsUsed: 1,\n      cacheStats: {\n        hits: 0,\n        misses: 0,\n        hitRate: 0\n      }\n    }\n  };\n  \n  return validator.validate(formula, context);\n}\n\n/**\n * Quick validation for thermodynamic properties\n */\nexport async function validateThermodynamicProperties(\n  properties: ThermodynamicProperties\n): Promise<ValidationResult> {\n  const validator = new ThermodynamicPropertiesValidator();\n  const context: ValidationContext = {\n    path: ['thermodynamics'],\n    root: properties,\n    config: {\n      enabled: true,\n      priority: 1,\n      cacheable: true\n    },\n    shared: new Map(),\n    metrics: {\n      duration: 0,\n      rulesExecuted: 0,\n      validatorsUsed: 1,\n      cacheStats: {\n        hits: 0,\n        misses: 0,\n        hitRate: 0\n      }\n    }\n  };\n  \n  return validator.validate(properties, context);\n}\n\n/**\n * Formats validation errors for display\n */\nexport function formatValidationErrors(errors: ValidationError[]): string {\n  if (errors.length === 0) {\n    return 'No validation errors found.';\n  }\n  \n  return errors.map((error, index) => {\n    const prefix = `${index + 1}. `;\n    const location = error.path ? ` (at ${error.path.join('.')})` : '';\n    const code = error.code ? ` [${error.code}]` : '';\n    const suggestions = error.suggestions.length > 0 ? `\\n   Suggestions: ${error.suggestions.join(', ')}` : '';\n    \n    return `${prefix}${error.severity.toUpperCase()}: ${error.message}${location}${code}${suggestions}`;\n  }).join('\\n');\n}\n\n/**\n * Creates a summary of validation results\n */\nexport function summarizeValidationResult(result: ValidationResult): string {\n  const { isValid, errors, warnings } = result;\n  \n  const status = isValid ? 'PASSED' : 'FAILED';\n  const errorCount = errors.length;\n  const warningCount = warnings.length;\n  \n  let summary = `Validation ${status}\\n`;\n  \n  if (errorCount > 0) {\n    summary += `Errors: ${errorCount}\\n`;\n  }\n  \n  if (warningCount > 0) {\n    summary += `Warnings: ${warningCount}\\n`;\n  }\n  \n  if (errorCount === 0 && warningCount === 0) {\n    summary += 'No issues found.';\n  }\n  \n  return summary;\n}\n\n/**\n * Utility to check if a validation result has only warnings\n */\nexport function hasOnlyWarnings(result: ValidationResult): boolean {\n  return result.errors.length === 0 && result.warnings.length > 0;\n}\n\n/**\n * Utility to get the most severe error from a validation result\n */\nexport function getMostSevereError(result: ValidationResult): ValidationError | null {\n  if (result.errors.length === 0) {\n    return null;\n  }\n  \n  const errorsByPriority = result.errors.sort((a, b) => {\n    const priorities = { \n      [ValidationSeverity.CRITICAL]: 4,\n      [ValidationSeverity.ERROR]: 3, \n      [ValidationSeverity.WARNING]: 2, \n      [ValidationSeverity.INFO]: 1 \n    };\n    return priorities[b.severity] - priorities[a.severity];\n  });\n  \n  return errorsByPriority[0];\n}\n","/**\n * Enhanced Chemical Equation Balancer with PubChem integration\n * Provides compound validation, molecular weight verification, and enriched data\n */\n\nimport { ChemicalEquationBalancer } from './balancer';\nimport { BalancedEquation } from './types';\nimport { \n  ComputationError, \n  ValidationError, \n  ErrorCategory, \n  ErrorSeverity,\n  ErrorUtils \n} from './core/errors/CREBError';\nimport { Injectable } from './core/decorators/Injectable';\nimport { AdvancedCache } from './performance/cache/AdvancedCache';\nimport { validateChemicalFormula, ValidationResult } from './data/validation';\n\n// Import type definitions for PubChem integration\n// Note: In production, this would import from 'creb-pubchem-js'\ninterface PubChemCompound {\n  cid: number;\n  molecularWeight: number | null;\n  molecularFormula: string | null;\n  iupacName: string | null;\n  isomericSmiles?: string | null;\n}\n\nexport interface EnhancedBalancedEquation extends BalancedEquation {\n  compoundData?: Record<string, CompoundInfo>;\n  validation?: {\n    massBalanced: boolean;\n    chargeBalanced: boolean;\n    warnings: string[];\n    formulaValidation?: Record<string, ValidationResult>;\n  };\n  safetyWarnings?: SafetyWarning[];\n}\n\nexport interface SafetyWarning {\n  compound: string;\n  hazard: string;\n  severity: 'low' | 'medium' | 'high' | 'extreme';\n  ghsClassification?: string;\n  precautionaryStatements?: string[];\n}\n\nexport interface CompoundInfo {\n  name: string;\n  cid?: number;\n  molecularWeight?: number;\n  molecularFormula?: string;\n  iupacName?: string;\n  canonicalSmiles?: string;\n  isValid: boolean;\n  error?: string;\n  pubchemData?: PubChemCompound;\n  originalName?: string; // For name-based balancing\n  safetyInfo?: SafetyInfo;\n}\n\nexport interface SafetyInfo {\n  ghsClassifications: string[];\n  hazardStatements: string[];\n  precautionaryStatements: string[];\n  physicalHazards: string[];\n  healthHazards: string[];\n  environmentalHazards: string[];\n  signalWord?: 'Danger' | 'Warning';\n}\n\n@Injectable()\nexport class EnhancedChemicalEquationBalancer extends ChemicalEquationBalancer {\n  private compoundCache = new AdvancedCache<CompoundInfo>({\n    maxSize: 1000,\n    defaultTtl: 7200000, // 2 hours\n    evictionStrategy: 'lru'\n  });\n\n  /**\n   * Balance equation with safety and hazard information\n   */\n  async balanceWithSafety(equation: string): Promise<EnhancedBalancedEquation> {\n    // First get the enhanced balance with PubChem data\n    const enhanced = await this.balanceWithPubChemData(equation);\n    \n    // Add safety information for each compound\n    const safetyWarnings: SafetyWarning[] = [];\n    \n    if (enhanced.compoundData) {\n      for (const [species, compoundInfo] of Object.entries(enhanced.compoundData)) {\n        if (compoundInfo.isValid) {\n          try {\n            // Get safety information for the compound\n            const safetyInfo = await this.getSafetyInfo(compoundInfo);\n            compoundInfo.safetyInfo = safetyInfo;\n            \n            // Generate safety warnings\n            const warnings = this.generateSafetyWarnings(species, safetyInfo);\n            safetyWarnings.push(...warnings);\n          } catch (error) {\n            enhanced.validation?.warnings.push(`Could not retrieve safety data for ${species}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n          }\n        }\n      }\n    }\n    \n    // Add safety warnings to the result\n    enhanced.safetyWarnings = safetyWarnings;\n    \n    return enhanced;\n  }\n\n  /**\n   * Get safety information for a compound\n   */\n  private async getSafetyInfo(compoundInfo: CompoundInfo): Promise<SafetyInfo> {\n    // For now, use a knowledge base of common chemical hazards\n    // In a full implementation, this would query PubChem's safety data\n    const safetyKnowledgeBase = this.getKnownSafetyInfo();\n    \n    const formula = compoundInfo.molecularFormula;\n    const name = compoundInfo.iupacName?.toLowerCase() || compoundInfo.name.toLowerCase();\n    \n    // Check known safety data\n    let safetyInfo = safetyKnowledgeBase[formula || ''] || \n                     safetyKnowledgeBase[name] ||\n                     safetyKnowledgeBase[compoundInfo.name.toLowerCase()];\n    \n    if (!safetyInfo) {\n      // Try to infer basic safety information from chemical properties\n      safetyInfo = this.inferSafetyFromProperties(compoundInfo);\n    }\n    \n    return safetyInfo || {\n      ghsClassifications: [],\n      hazardStatements: [],\n      precautionaryStatements: [],\n      physicalHazards: [],\n      healthHazards: [],\n      environmentalHazards: []\n    };\n  }\n\n  /**\n   * Generate safety warnings from safety information\n   */\n  private generateSafetyWarnings(compound: string, safetyInfo: SafetyInfo): SafetyWarning[] {\n    const warnings: SafetyWarning[] = [];\n    \n    // Process health hazards\n    for (const hazard of safetyInfo.healthHazards) {\n      warnings.push({\n        compound,\n        hazard,\n        severity: this.determineSeverity(hazard),\n        ghsClassification: safetyInfo.ghsClassifications.join(', ') || undefined,\n        precautionaryStatements: safetyInfo.precautionaryStatements.length > 0 ? safetyInfo.precautionaryStatements : undefined\n      });\n    }\n    \n    // Process physical hazards\n    for (const hazard of safetyInfo.physicalHazards) {\n      warnings.push({\n        compound,\n        hazard,\n        severity: this.determineSeverity(hazard),\n        ghsClassification: safetyInfo.ghsClassifications.join(', ') || undefined\n      });\n    }\n    \n    // Process environmental hazards\n    for (const hazard of safetyInfo.environmentalHazards) {\n      warnings.push({\n        compound,\n        hazard,\n        severity: this.determineSeverity(hazard),\n        ghsClassification: safetyInfo.ghsClassifications.join(', ') || undefined\n      });\n    }\n    \n    return warnings;\n  }\n\n  /**\n   * Determine severity level from hazard description\n   */\n  private determineSeverity(hazard: string): 'low' | 'medium' | 'high' | 'extreme' {\n    const hazardLower = hazard.toLowerCase();\n    \n    if (hazardLower.includes('fatal') || hazardLower.includes('death') || hazardLower.includes('severe')) {\n      return 'extreme';\n    }\n    if (hazardLower.includes('serious') || hazardLower.includes('burn') || hazardLower.includes('corrosive')) {\n      return 'high';\n    }\n    if (hazardLower.includes('harmful') || hazardLower.includes('irritant') || hazardLower.includes('toxic')) {\n      return 'medium';\n    }\n    return 'low';\n  }\n\n  /**\n   * Knowledge base of known chemical safety information\n   */\n  private getKnownSafetyInfo(): Record<string, SafetyInfo> {\n    return {\n      'H2SO4': {\n        ghsClassifications: ['H314', 'H290'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May be corrosive to metals'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Do not breathe dust/fume/gas/mist/vapours/spray'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'sulfuric acid': {\n        ghsClassifications: ['H314', 'H290'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May be corrosive to metals'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Do not breathe dust/fume/gas/mist/vapours/spray'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'NaOH': {\n        ghsClassifications: ['H314', 'H290'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May be corrosive to metals'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Do not breathe dust/fume/gas/mist/vapours/spray'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'sodium hydroxide': {\n        ghsClassifications: ['H314', 'H290'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May be corrosive to metals'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Do not breathe dust/fume/gas/mist/vapours/spray'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'HCl': {\n        ghsClassifications: ['H314', 'H335'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May cause respiratory irritation'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Use only outdoors or in a well-ventilated area'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage', 'May cause respiratory irritation'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'hydrochloric acid': {\n        ghsClassifications: ['H314', 'H335'],\n        hazardStatements: ['Causes severe skin burns and eye damage', 'May cause respiratory irritation'],\n        precautionaryStatements: ['Wear protective gloves/protective clothing/eye protection/face protection', 'Use only outdoors or in a well-ventilated area'],\n        physicalHazards: ['Corrosive to metals'],\n        healthHazards: ['Causes severe skin burns and eye damage', 'May cause respiratory irritation'],\n        environmentalHazards: [],\n        signalWord: 'Danger'\n      },\n      'NH3': {\n        ghsClassifications: ['H221', 'H314', 'H400'],\n        hazardStatements: ['Flammable gas', 'Causes severe skin burns and eye damage', 'Very toxic to aquatic life'],\n        precautionaryStatements: ['Keep away from heat/sparks/open flames/hot surfaces', 'Wear protective gloves/protective clothing/eye protection/face protection'],\n        physicalHazards: ['Flammable gas'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: ['Very toxic to aquatic life'],\n        signalWord: 'Danger'\n      },\n      'ammonia': {\n        ghsClassifications: ['H221', 'H314', 'H400'],\n        hazardStatements: ['Flammable gas', 'Causes severe skin burns and eye damage', 'Very toxic to aquatic life'],\n        precautionaryStatements: ['Keep away from heat/sparks/open flames/hot surfaces', 'Wear protective gloves/protective clothing/eye protection/face protection'],\n        physicalHazards: ['Flammable gas'],\n        healthHazards: ['Causes severe skin burns and eye damage'],\n        environmentalHazards: ['Very toxic to aquatic life'],\n        signalWord: 'Danger'\n      },\n      'H2O': {\n        ghsClassifications: [],\n        hazardStatements: [],\n        precautionaryStatements: [],\n        physicalHazards: [],\n        healthHazards: [],\n        environmentalHazards: []\n      },\n      'water': {\n        ghsClassifications: [],\n        hazardStatements: [],\n        precautionaryStatements: [],\n        physicalHazards: [],\n        healthHazards: [],\n        environmentalHazards: []\n      }\n    };\n  }\n\n  /**\n   * Infer basic safety information from compound properties\n   */\n  private inferSafetyFromProperties(compoundInfo: CompoundInfo): SafetyInfo {\n    const safetyInfo: SafetyInfo = {\n      ghsClassifications: [],\n      hazardStatements: [],\n      precautionaryStatements: ['Handle with care', 'Use proper ventilation'],\n      physicalHazards: [],\n      healthHazards: [],\n      environmentalHazards: []\n    };\n    \n    const formula = compoundInfo.molecularFormula || '';\n    const name = compoundInfo.name.toLowerCase();\n    \n    // Infer based on common patterns\n    if (formula.includes('O') && formula.includes('H') && (name.includes('acid') || formula.match(/H\\d*[A-Z]/))) {\n      safetyInfo.healthHazards.push('May cause skin and eye irritation');\n      safetyInfo.precautionaryStatements.push('Avoid contact with skin and eyes');\n    }\n    \n    if (name.includes('chloride') || formula.includes('Cl')) {\n      safetyInfo.healthHazards.push('May be harmful if inhaled');\n      safetyInfo.precautionaryStatements.push('Use in well-ventilated area');\n    }\n    \n    if (name.includes('sulfate') || name.includes('nitrate')) {\n      safetyInfo.healthHazards.push('May cause irritation');\n    }\n    \n    // Default precautionary statement for unknown compounds\n    if (safetyInfo.healthHazards.length === 0 && formula !== 'H2O') {\n      safetyInfo.healthHazards.push('Safety data not available - handle with caution');\n    }\n    \n    return safetyInfo;\n  }\n\n  /**\n   * Balance equation using common chemical names\n   * Converts compound names to formulas using PubChem, then balances\n   */\n  async balanceByName(commonNameEquation: string): Promise<EnhancedBalancedEquation> {\n    try {\n      // Step 1: Parse equation to extract compound names\n      const { reactantNames, productNames } = this.parseEquationNames(commonNameEquation);\n      \n      // Step 2: Resolve each compound name to chemical formula\n      const nameToFormulaMap: Record<string, string> = {};\n      const compoundDataMap: Record<string, CompoundInfo> = {};\n      \n      const allNames = [...reactantNames, ...productNames];\n      \n      for (const name of allNames) {\n        const compoundInfo = await this.getCompoundInfo(name);\n        compoundDataMap[name] = compoundInfo;\n        \n        if (compoundInfo.isValid && compoundInfo.molecularFormula) {\n          nameToFormulaMap[name] = compoundInfo.molecularFormula;\n        } else {\n          // Try common name alternatives\n          const alternatives = this.getCommonNames(name);\n          let found = false;\n          \n          for (const alt of alternatives) {\n            const altInfo = await this.getCompoundInfo(alt);\n            if (altInfo.isValid && altInfo.molecularFormula) {\n              nameToFormulaMap[name] = altInfo.molecularFormula;\n              compoundDataMap[name] = altInfo;\n              found = true;\n              break;\n            }\n          }\n          \n          if (!found) {\n            throw new ComputationError(\n              `Could not resolve compound name: \"${name}\". Try using the chemical formula instead.`,\n              { compoundName: name, operation: 'compound_resolution' }\n            );\n          }\n        }\n      }\n      \n      // Step 3: Reconstruct equation with chemical formulas\n      const formulaEquation = this.reconstructEquationWithFormulas(\n        commonNameEquation, nameToFormulaMap\n      );\n      \n      // Step 4: Balance the reconstructed equation\n      const balanced = this.balanceDetailed(formulaEquation);\n      \n      // Step 5: Create enhanced result with both names and formulas\n      const enhanced: EnhancedBalancedEquation = {\n        ...balanced,\n        compoundData: {},\n        validation: {\n          massBalanced: true,\n          chargeBalanced: true,\n          warnings: []\n        }\n      };\n      \n      // Add compound data for both original names and formulas\n      for (const [name, info] of Object.entries(compoundDataMap)) {\n        if (info.molecularFormula && balanced.reactants.includes(info.molecularFormula)) {\n          enhanced.compoundData![info.molecularFormula] = {\n            ...info,\n            name: info.molecularFormula, // Use formula as key\n            originalName: name // Keep original name\n          };\n        }\n        if (info.molecularFormula && balanced.products.includes(info.molecularFormula)) {\n          enhanced.compoundData![info.molecularFormula] = {\n            ...info,\n            name: info.molecularFormula,\n            originalName: name\n          };\n        }\n      }\n      \n      // Validate mass balance using PubChem molecular weights\n      try {\n        const massValidation = this.validateMassBalance(balanced, enhanced.compoundData!);\n        enhanced.validation!.massBalanced = massValidation.balanced;\n        if (!massValidation.balanced) {\n          enhanced.validation!.warnings.push(`Mass balance discrepancy: ${massValidation.discrepancy.toFixed(4)} g/mol`);\n        }\n      } catch (error) {\n        enhanced.validation!.warnings.push(`Could not validate mass balance: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      }\n      \n      return enhanced;\n      \n    } catch (error) {\n      throw new ComputationError(\n        `Failed to balance equation by name: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        { equation: commonNameEquation, operation: 'balance_by_name' }\n      );\n    }\n  }\n\n  /**\n   * Balance equation with PubChem data enrichment\n   */\n  async balanceWithPubChemData(equation: string): Promise<EnhancedBalancedEquation> {\n    // First balance the equation normally\n    const balanced = this.balanceDetailed(equation);\n    \n    // Enhance with PubChem data\n    const enhanced: EnhancedBalancedEquation = {\n      ...balanced,\n      compoundData: {},\n      validation: {\n        massBalanced: true,\n        chargeBalanced: true,\n        warnings: [],\n        formulaValidation: {}\n      }\n    };\n\n    // Get all unique species from the equation\n    const allSpecies = [...new Set([...balanced.reactants, ...balanced.products])];\n    \n    // Validate chemical formulas using the validation pipeline\n    for (const species of allSpecies) {\n      try {\n        const formulaValidation = await validateChemicalFormula(species);\n        enhanced.validation!.formulaValidation![species] = formulaValidation;\n        \n        if (!formulaValidation.isValid) {\n          enhanced.validation!.warnings.push(`Invalid formula ${species}: ${formulaValidation.errors.map(e => e.message).join(', ')}`);\n        }\n      } catch (error) {\n        enhanced.validation!.warnings.push(`Formula validation failed for ${species}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      }\n    }\n    \n    // Fetch PubChem data for each compound\n    for (const species of allSpecies) {\n      try {\n        const compoundInfo = await this.getCompoundInfo(species);\n        enhanced.compoundData![species] = compoundInfo;\n        \n        if (!compoundInfo.isValid && compoundInfo.error) {\n          enhanced.validation!.warnings.push(`${species}: ${compoundInfo.error}`);\n        }\n      } catch (error) {\n        enhanced.validation!.warnings.push(`Failed to fetch data for ${species}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      }\n    }\n\n    // Validate mass balance using PubChem molecular weights\n    try {\n      const massValidation = this.validateMassBalance(balanced, enhanced.compoundData!);\n      enhanced.validation!.massBalanced = massValidation.balanced;\n      if (!massValidation.balanced) {\n        enhanced.validation!.warnings.push(`Mass balance discrepancy: ${massValidation.discrepancy.toFixed(4)} g/mol`);\n      }\n    } catch (error) {\n      enhanced.validation!.warnings.push(`Could not validate mass balance: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n\n    return enhanced;\n  }\n\n  /**\n   * Get compound information from PubChem\n   */\n  async getCompoundInfo(compoundName: string): Promise<CompoundInfo> {\n    // Check cache first\n    const cached = await this.compoundCache.get(compoundName);\n    if (cached.hit && cached.value) {\n      return cached.value;\n    }\n\n    const result: CompoundInfo = {\n      name: compoundName,\n      isValid: false\n    };\n\n    try {\n      // Dynamic import of PubChem functionality\n      const pubchemModule = await this.loadPubChemModule();\n      if (!pubchemModule) {\n        result.error = 'PubChem module not available. Install creb-pubchem-js for enhanced functionality.';\n        await this.compoundCache.set(compoundName, result);\n        return result;\n      }\n\n      // Try to find compound by name\n      let compounds: PubChemCompound[] = [];\n      \n      // First try exact name match\n      try {\n        compounds = await pubchemModule.fromName(compoundName);\n      } catch (error) {\n        // If name search fails and it looks like a formula, try CID search\n        if (this.isLikelyFormula(compoundName)) {\n          try {\n            // For simple cases, try to find by common names\n            const commonNames = this.getCommonNames(compoundName);\n            for (const name of commonNames) {\n              try {\n                compounds = await pubchemModule.fromName(name);\n                if (compounds.length > 0) break;\n              } catch {\n                // Continue to next name\n              }\n            }\n          } catch (formulaError) {\n            result.error = `Not found by name or common formula names: ${error instanceof Error ? error.message : 'Unknown error'}`;\n          }\n        } else {\n          result.error = `Not found by name: ${error instanceof Error ? error.message : 'Unknown error'}`;\n        }\n      }\n\n      if (compounds.length > 0) {\n        const compound = compounds[0]; // Use first match\n        \n        result.cid = compound.cid;\n        result.molecularWeight = compound.molecularWeight || undefined;\n        result.molecularFormula = compound.molecularFormula || undefined;\n        result.iupacName = compound.iupacName || undefined;\n        result.canonicalSmiles = compound.isomericSmiles || undefined;\n        result.isValid = true;\n        result.pubchemData = compound;\n      } else if (!result.error) {\n        result.error = 'No compounds found';\n      }\n    } catch (error) {\n      result.error = `Search failed: ${error instanceof Error ? error.message : 'Unknown error'}`;\n    }\n\n    // Cache the result\n    await this.compoundCache.set(compoundName, result);\n    return result;\n  }\n\n  /**\n   * Dynamically load PubChem module if available\n   */\n  private async loadPubChemModule(): Promise<any> {\n    try {\n      // Try to import the PubChem module\n      // In browser environment, check for global PubChemJS\n      if (typeof globalThis !== 'undefined' && (globalThis as any).PubChemJS) {\n        return (globalThis as any).PubChemJS.Compound;\n      }\n      \n      // Also check window for browser compatibility\n      if (typeof globalThis !== 'undefined' && typeof (globalThis as any).window !== 'undefined' && (globalThis as any).window.PubChemJS) {\n        return (globalThis as any).window.PubChemJS.Compound;\n      }\n      \n      // Legacy check for CREBPubChem (for backwards compatibility)\n      if (typeof globalThis !== 'undefined' && (globalThis as any).CREBPubChem) {\n        return (globalThis as any).CREBPubChem.Compound;\n      }\n      \n      // In Node.js environment, try dynamic import with error handling\n      try {\n        // Use eval to avoid TypeScript compile-time module resolution\n        const importFn = new Function('specifier', 'return import(specifier)');\n        const pubchemModule = await importFn('creb-pubchem-js');\n        return pubchemModule.Compound;\n      } catch (importError) {\n        // Module not available\n        return null;\n      }\n    } catch (error) {\n      // PubChem module not available\n      return null;\n    }\n  }\n\n  /**\n   * Parse equation with compound names to extract reactant and product names\n   */\n  private parseEquationNames(equation: string): { reactantNames: string[], productNames: string[] } {\n    // Clean up the equation\n    const cleanEquation = equation.trim().replace(/\\s+/g, ' ');\n    \n    // Split by = or -> or →\n    const parts = cleanEquation.split(/\\s*(?:=|->|→)\\s*/);\n    if (parts.length !== 2) {\n      throw new ValidationError(\n        'Invalid equation format. Expected format: \"reactants = products\"',\n        { equation: cleanEquation, operation: 'parse_equation' }\n      );\n    }\n    \n    const [reactantsPart, productsPart] = parts;\n    \n    // Parse reactants and products (split by + and clean up)\n    const reactantNames = reactantsPart.split(/\\s*\\+\\s*/)\n      .map(name => name.trim())\n      .filter(name => name.length > 0)\n      .map(name => this.cleanCompoundName(name));\n    \n    const productNames = productsPart.split(/\\s*\\+\\s*/)\n      .map(name => name.trim())\n      .filter(name => name.length > 0)\n      .map(name => this.cleanCompoundName(name));\n    \n    if (reactantNames.length === 0 || productNames.length === 0) {\n      throw new ValidationError(\n        'Invalid equation: must have at least one reactant and one product',\n        { reactantCount: reactantNames.length, productCount: productNames.length, operation: 'parse_equation' }\n      );\n    }\n    \n    return { reactantNames, productNames };\n  }\n\n  /**\n   * Clean compound name by removing coefficients and standardizing format\n   */\n  private cleanCompoundName(name: string): string {\n    // Remove leading numbers (coefficients)\n    let cleaned = name.replace(/^\\d+\\s*/, '').trim();\n    \n    // Handle common variations\n    cleaned = cleaned.toLowerCase().trim();\n    \n    // Standardize common names\n    const standardNames: Record<string, string> = {\n      'water': 'water',\n      'h2o': 'water',\n      'sulfuric acid': 'sulfuric acid',\n      'sulphuric acid': 'sulfuric acid',\n      'sodium hydroxide': 'sodium hydroxide',\n      'caustic soda': 'sodium hydroxide',\n      'sodium sulfate': 'sodium sulfate',\n      'sodium sulphate': 'sodium sulfate',\n      'hydrochloric acid': 'hydrochloric acid',\n      'muriatic acid': 'hydrochloric acid',\n      'ammonia': 'ammonia',\n      'carbon dioxide': 'carbon dioxide',\n      'glucose': 'glucose',\n      'ethanol': 'ethanol',\n      'ethyl alcohol': 'ethanol',\n      'methane': 'methane',\n      'oxygen': 'oxygen',\n      'hydrogen': 'hydrogen',\n      'nitrogen': 'nitrogen'\n    };\n    \n    return standardNames[cleaned] || cleaned;\n  }\n\n  /**\n   * Reconstruct equation using chemical formulas instead of names\n   */\n  private reconstructEquationWithFormulas(\n    originalEquation: string, \n    nameToFormulaMap: Record<string, string>\n  ): string {\n    let formulaEquation = originalEquation;\n    \n    // Replace each compound name with its formula\n    for (const [name, formula] of Object.entries(nameToFormulaMap)) {\n      // Create regex to match the compound name (case insensitive, word boundaries)\n      const nameRegex = new RegExp(`\\\\b${name.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\b`, 'gi');\n      formulaEquation = formulaEquation.replace(nameRegex, formula);\n    }\n    \n    return formulaEquation;\n  }\n\n  /**\n   * Get common names for simple chemical formulas or alternative names for compounds\n   */\n  private getCommonNames(input: string): string[] {\n    const commonNames: Record<string, string[]> = {\n      'H2O': ['water'],\n      'water': ['H2O', 'dihydrogen monoxide'],\n      'CO2': ['carbon dioxide'],\n      'carbon dioxide': ['CO2'],\n      'NaCl': ['sodium chloride', 'salt'],\n      'sodium chloride': ['NaCl', 'salt'],\n      'salt': ['NaCl', 'sodium chloride'],\n      'H2SO4': ['sulfuric acid', 'sulphuric acid'],\n      'sulfuric acid': ['H2SO4', 'sulphuric acid'],\n      'sulphuric acid': ['H2SO4', 'sulfuric acid'],\n      'HCl': ['hydrochloric acid', 'muriatic acid'],\n      'hydrochloric acid': ['HCl', 'muriatic acid'],\n      'muriatic acid': ['HCl', 'hydrochloric acid'],\n      'NH3': ['ammonia'],\n      'ammonia': ['NH3'],\n      'CH4': ['methane'],\n      'methane': ['CH4'],\n      'C2H5OH': ['ethanol', 'ethyl alcohol'],\n      'ethanol': ['C2H5OH', 'ethyl alcohol'],\n      'ethyl alcohol': ['C2H5OH', 'ethanol'],\n      'C6H12O6': ['glucose', 'dextrose'],\n      'glucose': ['C6H12O6', 'dextrose'],\n      'dextrose': ['C6H12O6', 'glucose'],\n      'CaCO3': ['calcium carbonate'],\n      'calcium carbonate': ['CaCO3'],\n      'NaOH': ['sodium hydroxide', 'caustic soda'],\n      'sodium hydroxide': ['NaOH', 'caustic soda'],\n      'caustic soda': ['NaOH', 'sodium hydroxide'],\n      'KOH': ['potassium hydroxide'],\n      'potassium hydroxide': ['KOH'],\n      'Na2SO4': ['sodium sulfate', 'sodium sulphate'],\n      'sodium sulfate': ['Na2SO4', 'sodium sulphate'],\n      'sodium sulphate': ['Na2SO4', 'sodium sulfate'],\n      'Mg': ['magnesium'],\n      'magnesium': ['Mg'],\n      'Al': ['aluminum', 'aluminium'],\n      'aluminum': ['Al'],\n      'aluminium': ['Al'],\n      'Fe': ['iron'],\n      'iron': ['Fe'],\n      'Cu': ['copper'],\n      'copper': ['Cu'],\n      'Zn': ['zinc'],\n      'zinc': ['Zn'],\n      'O2': ['oxygen'],\n      'oxygen': ['O2'],\n      'N2': ['nitrogen'],\n      'nitrogen': ['N2'],\n      'H2': ['hydrogen'],\n      'hydrogen': ['H2']\n    };\n\n    return commonNames[input] || commonNames[input.toLowerCase()] || [];\n  }\n\n  /**\n   * Check if a string looks like a chemical formula\n   */\n  private isLikelyFormula(str: string): boolean {\n    // Simple heuristic: contains only letters, numbers, parentheses, and common symbols\n    return /^[A-Za-z0-9()[\\]+-]+$/.test(str) && /[A-Z]/.test(str);\n  }\n\n  /**\n   * Validate mass balance using PubChem molecular weights\n   */\n  private validateMassBalance(\n    balanced: BalancedEquation, \n    compoundData: Record<string, CompoundInfo>\n  ): { balanced: boolean; discrepancy: number } {\n    let reactantMass = 0;\n    let productMass = 0;\n\n    // Calculate reactant mass\n    for (let i = 0; i < balanced.reactants.length; i++) {\n      const species = balanced.reactants[i];\n      const coefficient = balanced.coefficients[i];\n      const compound = compoundData[species];\n      \n      if (compound?.molecularWeight) {\n        reactantMass += coefficient * compound.molecularWeight;\n      } else {\n        throw new ComputationError(\n          `Missing molecular weight for reactant: ${species}`,\n          { species, coefficient, operation: 'mass_balance_validation' }\n        );\n      }\n    }\n\n    // Calculate product mass\n    for (let i = 0; i < balanced.products.length; i++) {\n      const species = balanced.products[i];\n      const coefficient = balanced.coefficients[balanced.reactants.length + i];\n      const compound = compoundData[species];\n      \n      if (compound?.molecularWeight) {\n        productMass += coefficient * compound.molecularWeight;\n      } else {\n        throw new ComputationError(\n          `Missing molecular weight for product: ${species}`,\n          { species, coefficient, operation: 'mass_balance_validation' }\n        );\n      }\n    }\n\n    const discrepancy = Math.abs(reactantMass - productMass);\n    const tolerance = 0.01; // 0.01 g/mol tolerance\n    \n    return {\n      balanced: discrepancy <= tolerance,\n      discrepancy\n    };\n  }\n\n  /**\n   * Suggest alternative compound names or formulas\n   */\n  async suggestAlternatives(compoundName: string): Promise<string[]> {\n    const suggestions: string[] = [];\n    \n    try {\n      const pubchemModule = await this.loadPubChemModule();\n      if (!pubchemModule) {\n        return suggestions;\n      }\n\n      // Try various search strategies\n      const searchTerms = [\n        compoundName.toLowerCase(),\n        compoundName.toUpperCase(),\n        compoundName.replace(/\\s+/g, ''),\n        compoundName.replace(/\\s+/g, '-'),\n        compoundName.replace(/-/g, ' '),\n      ];\n\n      for (const term of searchTerms) {\n        if (term !== compoundName) {\n          try {\n            const compounds = await pubchemModule.fromName(term);\n            if (compounds.length > 0) {\n              suggestions.push(term);\n            }\n          } catch {\n            // Ignore errors for suggestions\n          }\n        }\n      }\n    } catch (error) {\n      // Return empty suggestions if search fails\n    }\n\n    return [...new Set(suggestions)]; // Remove duplicates\n  }\n\n  /**\n   * Clear the compound cache\n   */\n  async clearCache(): Promise<void> {\n    await this.compoundCache.clear();\n  }\n\n  /**\n   * Get cached compound info without making new requests\n   */\n  async getCachedCompoundInfo(compoundName: string): Promise<CompoundInfo | undefined> {\n    const result = await this.compoundCache.get(compoundName);\n    return result.hit ? result.value : undefined;\n  }\n}\n","/**\n * Advanced 2D Molecular Structure Generator\n * Generates chemically accurate 2D coordinates for molecular visualization\n */\n\nexport interface Atom3D {\n  element: string;\n  x: number;\n  y: number;\n  z: number;\n  hybridization?: 'sp' | 'sp2' | 'sp3';\n  aromatic?: boolean;\n}\n\nexport interface Bond3D {\n  atom1: number;\n  atom2: number;\n  order: 1 | 2 | 3;\n  type: 'single' | 'double' | 'triple' | 'aromatic';\n  stereo?: 'up' | 'down' | 'either';\n}\n\nexport interface Ring {\n  atoms: number[];\n  aromatic: boolean;\n  size: number;\n}\n\n/**\n * Professional 2D molecular coordinate generator\n * Following standard chemical drawing conventions\n */\nexport class Molecular2DGenerator {\n  private static readonly BOND_LENGTH = 40; // Standard bond length in pixels\n  private static readonly AROMATIC_RING_RADIUS = 25;\n  private static readonly ANGLE_120 = (2 * Math.PI) / 3; // 120° for aromatic\n  private static readonly ANGLE_109 = 1.9106; // 109.5° tetrahedral angle\n\n  /**\n   * Generate caffeine structure with proper coordinates\n   */\n  static generateCaffeine(): { atoms: Atom3D[]; bonds: Bond3D[]; rings: Ring[] } {\n    const bondLength = this.BOND_LENGTH;\n    \n    // Caffeine: C8H10N4O2 - purine ring system with methyl substituents\n    const atoms: Atom3D[] = [\n      // Purine ring system (6-membered ring fused with 5-membered ring)\n      // 6-membered ring\n      { element: 'N', x: 200, y: 150, z: 0, hybridization: 'sp2', aromatic: true }, // 0\n      { element: 'C', x: 240, y: 130, z: 0, hybridization: 'sp2', aromatic: true }, // 1\n      { element: 'N', x: 280, y: 150, z: 0, hybridization: 'sp2', aromatic: true }, // 2\n      { element: 'C', x: 280, y: 190, z: 0, hybridization: 'sp2', aromatic: true }, // 3\n      { element: 'C', x: 240, y: 210, z: 0, hybridization: 'sp2', aromatic: true }, // 4\n      { element: 'C', x: 200, y: 190, z: 0, hybridization: 'sp2', aromatic: true }, // 5\n      \n      // 5-membered ring (fused)\n      { element: 'N', x: 160, y: 170, z: 0, hybridization: 'sp2', aromatic: true }, // 6\n      { element: 'C', x: 160, y: 210, z: 0, hybridization: 'sp2', aromatic: true }, // 7\n      { element: 'N', x: 200, y: 230, z: 0, hybridization: 'sp2', aromatic: true }, // 8\n      \n      // Carbonyl oxygens\n      { element: 'O', x: 240, y: 100, z: 0, hybridization: 'sp2' }, // 9 (C=O at position 2)\n      { element: 'O', x: 320, y: 200, z: 0, hybridization: 'sp2' }, // 10 (C=O at position 6)\n      \n      // Methyl groups\n      { element: 'C', x: 120, y: 150, z: 0, hybridization: 'sp3' }, // 11 (N1-methyl)\n      { element: 'C', x: 320, y: 130, z: 0, hybridization: 'sp3' }, // 12 (N3-methyl)\n      { element: 'C', x: 240, y: 270, z: 0, hybridization: 'sp3' }, // 13 (N7-methyl)\n      \n      // Hydrogens (implicit in most chemical drawings, but included for completeness)\n      { element: 'H', x: 100, y: 140, z: 0 }, // 14\n      { element: 'H', x: 100, y: 160, z: 0 }, // 15\n      { element: 'H', x: 110, y: 170, z: 0 }, // 16\n      { element: 'H', x: 340, y: 120, z: 0 }, // 17\n      { element: 'H', x: 340, y: 140, z: 0 }, // 18\n      { element: 'H', x: 330, y: 110, z: 0 }, // 19\n      { element: 'H', x: 260, y: 280, z: 0 }, // 20\n      { element: 'H', x: 220, y: 280, z: 0 }, // 21\n      { element: 'H', x: 230, y: 290, z: 0 }, // 22\n      { element: 'H', x: 130, y: 210, z: 0 }  // 23 (H on C8)\n    ];\n\n    const bonds: Bond3D[] = [\n      // 6-membered ring bonds\n      { atom1: 0, atom2: 1, order: 1, type: 'aromatic' },\n      { atom1: 1, atom2: 2, order: 1, type: 'aromatic' },\n      { atom1: 2, atom2: 3, order: 1, type: 'aromatic' },\n      { atom1: 3, atom2: 4, order: 1, type: 'aromatic' },\n      { atom1: 4, atom2: 5, order: 1, type: 'aromatic' },\n      { atom1: 5, atom2: 0, order: 1, type: 'aromatic' },\n      \n      // 5-membered ring bonds\n      { atom1: 5, atom2: 6, order: 1, type: 'aromatic' },\n      { atom1: 6, atom2: 7, order: 1, type: 'aromatic' },\n      { atom1: 7, atom2: 8, order: 1, type: 'aromatic' },\n      { atom1: 8, atom2: 4, order: 1, type: 'aromatic' },\n      \n      // Carbonyl bonds\n      { atom1: 1, atom2: 9, order: 2, type: 'double' }, // C=O\n      { atom1: 3, atom2: 10, order: 2, type: 'double' }, // C=O\n      \n      // Methyl attachments\n      { atom1: 0, atom2: 11, order: 1, type: 'single' }, // N1-methyl\n      { atom1: 2, atom2: 12, order: 1, type: 'single' }, // N3-methyl\n      { atom1: 8, atom2: 13, order: 1, type: 'single' }, // N7-methyl\n      \n      // Hydrogen bonds\n      { atom1: 11, atom2: 14, order: 1, type: 'single' },\n      { atom1: 11, atom2: 15, order: 1, type: 'single' },\n      { atom1: 11, atom2: 16, order: 1, type: 'single' },\n      { atom1: 12, atom2: 17, order: 1, type: 'single' },\n      { atom1: 12, atom2: 18, order: 1, type: 'single' },\n      { atom1: 12, atom2: 19, order: 1, type: 'single' },\n      { atom1: 13, atom2: 20, order: 1, type: 'single' },\n      { atom1: 13, atom2: 21, order: 1, type: 'single' },\n      { atom1: 13, atom2: 22, order: 1, type: 'single' },\n      { atom1: 7, atom2: 23, order: 1, type: 'single' }\n    ];\n\n    const rings: Ring[] = [\n      { atoms: [0, 1, 2, 3, 4, 5], aromatic: true, size: 6 },\n      { atoms: [5, 6, 7, 8, 4], aromatic: true, size: 5 }\n    ];\n\n    return { atoms, bonds, rings };\n  }\n\n  /**\n   * Generate benzene with proper hexagonal geometry\n   */\n  static generateBenzene(): { atoms: Atom3D[]; bonds: Bond3D[]; rings: Ring[] } {\n    const centerX = 200;\n    const centerY = 180;\n    const radius = this.AROMATIC_RING_RADIUS;\n    \n    const atoms: Atom3D[] = [];\n    const bonds: Bond3D[] = [];\n    \n    // Generate hexagonal ring\n    for (let i = 0; i < 6; i++) {\n      const angle = (i * Math.PI) / 3; // 60° intervals\n      const x = centerX + radius * Math.cos(angle);\n      const y = centerY + radius * Math.sin(angle);\n      \n      atoms.push({\n        element: 'C',\n        x: x,\n        y: y,\n        z: 0,\n        hybridization: 'sp2',\n        aromatic: true\n      });\n      \n      // Add bond to next atom (with wraparound)\n      const nextIndex = (i + 1) % 6;\n      bonds.push({\n        atom1: i,\n        atom2: nextIndex,\n        order: 1,\n        type: 'aromatic'\n      });\n    }\n\n    // Add hydrogens\n    for (let i = 0; i < 6; i++) {\n      const angle = (i * Math.PI) / 3;\n      const hRadius = radius + 15; // Hydrogen further out\n      const x = centerX + hRadius * Math.cos(angle);\n      const y = centerY + hRadius * Math.sin(angle);\n      \n      atoms.push({\n        element: 'H',\n        x: x,\n        y: y,\n        z: 0\n      });\n      \n      bonds.push({\n        atom1: i,\n        atom2: 6 + i, // Hydrogen index\n        order: 1,\n        type: 'single'\n      });\n    }\n\n    const rings: Ring[] = [\n      { atoms: [0, 1, 2, 3, 4, 5], aromatic: true, size: 6 }\n    ];\n\n    return { atoms, bonds, rings };\n  }\n\n  /**\n   * Generate water with proper bent geometry\n   */\n  static generateWater(): { atoms: Atom3D[]; bonds: Bond3D[] } {\n    const bondLength = this.BOND_LENGTH;\n    const angle = 1.8326; // 104.5° H-O-H angle\n    \n    const atoms: Atom3D[] = [\n      { element: 'O', x: 200, y: 180, z: 0, hybridization: 'sp3' },\n      { \n        element: 'H', \n        x: 200 - bondLength * Math.cos(angle / 2), \n        y: 180 + bondLength * Math.sin(angle / 2), \n        z: 0 \n      },\n      { \n        element: 'H', \n        x: 200 + bondLength * Math.cos(angle / 2), \n        y: 180 + bondLength * Math.sin(angle / 2), \n        z: 0 \n      }\n    ];\n\n    const bonds: Bond3D[] = [\n      { atom1: 0, atom2: 1, order: 1, type: 'single' },\n      { atom1: 0, atom2: 2, order: 1, type: 'single' }\n    ];\n\n    return { atoms, bonds };\n  }\n\n  /**\n   * Generate methane with tetrahedral geometry\n   */\n  static generateMethane(): { atoms: Atom3D[]; bonds: Bond3D[] } {\n    const bondLength = this.BOND_LENGTH;\n    const centerX = 200;\n    const centerY = 180;\n    \n    // Tetrahedral angles for 2D projection\n    const atoms: Atom3D[] = [\n      { element: 'C', x: centerX, y: centerY, z: 0, hybridization: 'sp3' },\n      { element: 'H', x: centerX - bondLength * 0.6, y: centerY - bondLength * 0.6, z: 0 },\n      { element: 'H', x: centerX + bondLength * 0.6, y: centerY - bondLength * 0.6, z: 0 },\n      { element: 'H', x: centerX - bondLength * 0.6, y: centerY + bondLength * 0.6, z: 0 },\n      { element: 'H', x: centerX + bondLength * 0.6, y: centerY + bondLength * 0.6, z: 0 }\n    ];\n\n    const bonds: Bond3D[] = [\n      { atom1: 0, atom2: 1, order: 1, type: 'single' },\n      { atom1: 0, atom2: 2, order: 1, type: 'single' },\n      { atom1: 0, atom2: 3, order: 1, type: 'single' },\n      { atom1: 0, atom2: 4, order: 1, type: 'single' }\n    ];\n\n    return { atoms, bonds };\n  }\n\n  /**\n   * Generate ethylene with proper double bond geometry\n   */\n  static generateEthylene(): { atoms: Atom3D[]; bonds: Bond3D[] } {\n    const bondLength = this.BOND_LENGTH;\n    const centerX = 200;\n    const centerY = 180;\n    \n    const atoms: Atom3D[] = [\n      // C=C double bond\n      { element: 'C', x: centerX - bondLength/2, y: centerY, z: 0, hybridization: 'sp2' },\n      { element: 'C', x: centerX + bondLength/2, y: centerY, z: 0, hybridization: 'sp2' },\n      \n      // Hydrogens in planar arrangement\n      { element: 'H', x: centerX - bondLength/2 - bondLength * 0.7, y: centerY - bondLength * 0.5, z: 0 },\n      { element: 'H', x: centerX - bondLength/2 - bondLength * 0.7, y: centerY + bondLength * 0.5, z: 0 },\n      { element: 'H', x: centerX + bondLength/2 + bondLength * 0.7, y: centerY - bondLength * 0.5, z: 0 },\n      { element: 'H', x: centerX + bondLength/2 + bondLength * 0.7, y: centerY + bondLength * 0.5, z: 0 }\n    ];\n\n    const bonds: Bond3D[] = [\n      { atom1: 0, atom2: 1, order: 2, type: 'double' },\n      { atom1: 0, atom2: 2, order: 1, type: 'single' },\n      { atom1: 0, atom2: 3, order: 1, type: 'single' },\n      { atom1: 1, atom2: 4, order: 1, type: 'single' },\n      { atom1: 1, atom2: 5, order: 1, type: 'single' }\n    ];\n\n    return { atoms, bonds };\n  }\n\n  /**\n   * Convert molecular structure to Canvas2D format\n   */\n  static toCanvas2DFormat(structure: { atoms: Atom3D[]; bonds: Bond3D[] }): {\n    atoms: Array<{ element: string; position: { x: number; y: number }; bonds: number[] }>;\n    bonds: Array<{ atom1: number; atom2: number; order: number; type: string }>;\n  } {\n    return {\n      atoms: structure.atoms.map((atom, index) => ({\n        element: atom.element,\n        position: { x: atom.x, y: atom.y },\n        bonds: structure.bonds\n          .map((bond, bondIndex) => bond.atom1 === index || bond.atom2 === index ? bondIndex : -1)\n          .filter(bondIndex => bondIndex !== -1)\n      })),\n      bonds: structure.bonds\n    };\n  }\n\n  /**\n   * Enhanced SMILES to 2D converter with proper geometry\n   */\n  static advancedSMILESTo2D(smiles: string): {\n    atoms: Array<{ element: string; position: { x: number; y: number }; bonds: number[] }>;\n    bonds: Array<{ atom1: number; atom2: number; order: number; type: string }>;\n  } {\n    // Handle specific known molecules\n    switch (smiles.toLowerCase()) {\n      case 'o':\n      case 'h2o':\n        return this.toCanvas2DFormat(this.generateWater());\n      \n      case 'c':\n      case 'ch4':\n        return this.toCanvas2DFormat(this.generateMethane());\n      \n      case 'c=c':\n      case 'c2h4':\n        return this.toCanvas2DFormat(this.generateEthylene());\n      \n      case 'c1=cc=cc=c1':\n      case 'c6h6':\n      case 'benzene':\n        return this.toCanvas2DFormat(this.generateBenzene());\n      \n      case 'caffeine':\n      case 'cn1c=nc2c1c(=o)n(c(=o)n2c)c':\n        return this.toCanvas2DFormat(this.generateCaffeine());\n      \n      default:\n        // Fallback to simple structure\n        return this.toCanvas2DFormat(this.generateMethane());\n    }\n  }\n}\n\nexport default Molecular2DGenerator;\n","/**\n * 2D Molecular Structure Renderer\n * Canvas-based 2D molecular structure drawing with proper chemical geometry\n */\n\nimport { Molecular2DGenerator } from './Molecular2DGenerator';\n\nexport interface Canvas2DConfig {\n  width: number;\n  height: number;\n  backgroundColor: string;\n  bondColor: string;\n  atomColors: Record<string, string>;\n  bondWidth: number;\n  atomRadius: number;\n  fontSize: number;\n}\n\nexport interface Point2D {\n  x: number;\n  y: number;\n}\n\nexport interface Atom2D {\n  element: string;\n  position: Point2D;\n  bonds: number[];\n  charge?: number;\n}\n\nexport interface Bond2D {\n  atom1: number;\n  atom2: number;\n  order: number;\n  type: 'single' | 'double' | 'triple' | 'aromatic';\n}\n\nexport interface Molecule2D {\n  atoms: Atom2D[];\n  bonds: Bond2D[];\n  name?: string;\n}\n\nexport class Canvas2DRenderer {\n  private canvas: any; // HTMLCanvasElement - using any for Node.js compatibility\n  private ctx: any; // CanvasRenderingContext2D - using any for Node.js compatibility\n  private config: Canvas2DConfig;\n  private molecule: Molecule2D | null = null;\n  private scale = 1;\n  private offset = { x: 0, y: 0 };\n\n  constructor(canvas: any, config: Partial<Canvas2DConfig> = {}) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    \n    this.config = {\n      width: 600,\n      height: 400,\n      backgroundColor: '#ffffff',\n      bondColor: '#333333',\n      atomColors: {\n        'C': '#000000',\n        'H': '#ffffff',\n        'O': '#ff0000',\n        'N': '#0000ff',\n        'S': '#ffff00',\n        'P': '#ffa500',\n        'Cl': '#00ff00',\n        'Br': '#a52a2a',\n        'I': '#9400d3'\n      },\n      bondWidth: 2,\n      atomRadius: 15,\n      fontSize: 12,\n      ...config\n    };\n\n    this.setupCanvas();\n    this.bindEvents();\n  }\n\n  private setupCanvas(): void {\n    this.canvas.width = this.config.width;\n    this.canvas.height = this.config.height;\n    \n    // Only set styles if we're in browser environment\n    try {\n      if (this.canvas.style) {\n        this.canvas.style.border = '1px solid #ccc';\n        this.canvas.style.borderRadius = '4px';\n      }\n    } catch {\n      // Ignore style errors in non-browser environments\n    }\n  }\n\n  private bindEvents(): void {\n    // Only bind events if we're in browser environment\n    try {\n      if (!this.canvas.addEventListener) {\n        return;\n      }\n    } catch {\n      return;\n    }\n\n    let isMouseDown = false;\n    let lastMousePos = { x: 0, y: 0 };\n\n    this.canvas.addEventListener('mousedown', (e: any) => {\n      isMouseDown = true;\n      lastMousePos = { x: e.clientX, y: e.clientY };\n    });\n\n    this.canvas.addEventListener('mousemove', (e: any) => {\n      if (isMouseDown) {\n        const deltaX = e.clientX - lastMousePos.x;\n        const deltaY = e.clientY - lastMousePos.y;\n        \n        this.offset.x += deltaX;\n        this.offset.y += deltaY;\n        \n        lastMousePos = { x: e.clientX, y: e.clientY };\n        this.render();\n      }\n    });\n\n    this.canvas.addEventListener('mouseup', () => {\n      isMouseDown = false;\n    });\n\n    this.canvas.addEventListener('wheel', (e: any) => {\n      e.preventDefault();\n      const scaleFactor = e.deltaY > 0 ? 0.9 : 1.1;\n      this.scale *= scaleFactor;\n      this.render();\n    });\n  }\n\n  /**\n   * Load and render a molecule\n   */\n  loadMolecule(molecule: Molecule2D): void {\n    this.molecule = molecule;\n    this.centerMolecule();\n    this.render();\n  }\n\n  /**\n   * Center the molecule in the canvas\n   */\n  private centerMolecule(): void {\n    if (!this.molecule || this.molecule.atoms.length === 0) return;\n\n    // Calculate bounding box\n    let minX = Infinity, maxX = -Infinity;\n    let minY = Infinity, maxY = -Infinity;\n\n    this.molecule.atoms.forEach(atom => {\n      minX = Math.min(minX, atom.position.x);\n      maxX = Math.max(maxX, atom.position.x);\n      minY = Math.min(minY, atom.position.y);\n      maxY = Math.max(maxY, atom.position.y);\n    });\n\n    // Calculate center offset\n    const molWidth = maxX - minX;\n    const molHeight = maxY - minY;\n    const molCenterX = (minX + maxX) / 2;\n    const molCenterY = (minY + maxY) / 2;\n\n    // Calculate scale to fit molecule\n    const scaleX = (this.config.width * 0.8) / molWidth;\n    const scaleY = (this.config.height * 0.8) / molHeight;\n    this.scale = Math.min(scaleX, scaleY, 1);\n\n    // Center the molecule\n    this.offset.x = this.config.width / 2 - molCenterX * this.scale;\n    this.offset.y = this.config.height / 2 - molCenterY * this.scale;\n  }\n\n  /**\n   * Render the current molecule\n   */\n  render(): void {\n    this.clear();\n    \n    if (!this.molecule) {\n      this.renderPlaceholder();\n      return;\n    }\n\n    this.renderBonds();\n    this.renderAtoms();\n    this.renderLabels();\n  }\n\n  /**\n   * Clear the canvas\n   */\n  private clear(): void {\n    this.ctx.fillStyle = this.config.backgroundColor;\n    this.ctx.fillRect(0, 0, this.config.width, this.config.height);\n  }\n\n  /**\n   * Render placeholder when no molecule is loaded\n   */\n  private renderPlaceholder(): void {\n    this.ctx.fillStyle = '#f0f0f0';\n    this.ctx.fillRect(0, 0, this.config.width, this.config.height);\n\n    this.ctx.fillStyle = '#999999';\n    this.ctx.font = '24px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText(\n      '2D Molecular Structure',\n      this.config.width / 2,\n      this.config.height / 2 - 20\n    );\n\n    this.ctx.font = '14px Arial';\n    this.ctx.fillText(\n      'Load a molecule to visualize',\n      this.config.width / 2,\n      this.config.height / 2 + 20\n    );\n  }\n\n  /**\n   * Render molecular bonds\n   */\n  private renderBonds(): void {\n    if (!this.molecule) return;\n\n    this.ctx.strokeStyle = this.config.bondColor;\n    this.ctx.lineWidth = this.config.bondWidth;\n    this.ctx.lineCap = 'round';\n\n    this.molecule.bonds.forEach(bond => {\n      const atom1 = this.molecule!.atoms[bond.atom1];\n      const atom2 = this.molecule!.atoms[bond.atom2];\n\n      const pos1 = this.transformPoint(atom1.position);\n      const pos2 = this.transformPoint(atom2.position);\n\n      this.drawBond(pos1, pos2, bond);\n    });\n  }\n\n  /**\n   * Draw a single bond\n   */\n  private drawBond(pos1: Point2D, pos2: Point2D, bond: Bond2D): void {\n    const dx = pos2.x - pos1.x;\n    const dy = pos2.y - pos1.y;\n    const length = Math.sqrt(dx * dx + dy * dy);\n    const unitX = dx / length;\n    const unitY = dy / length;\n\n    // Offset for multiple bonds\n    const perpX = -unitY * 3;\n    const perpY = unitX * 3;\n\n    switch (bond.order) {\n      case 1:\n        this.drawSingleBond(pos1, pos2);\n        break;\n      case 2:\n        this.drawSingleBond(\n          { x: pos1.x + perpX, y: pos1.y + perpY },\n          { x: pos2.x + perpX, y: pos2.y + perpY }\n        );\n        this.drawSingleBond(\n          { x: pos1.x - perpX, y: pos1.y - perpY },\n          { x: pos2.x - perpX, y: pos2.y - perpY }\n        );\n        break;\n      case 3:\n        this.drawSingleBond(pos1, pos2);\n        this.drawSingleBond(\n          { x: pos1.x + perpX, y: pos1.y + perpY },\n          { x: pos2.x + perpX, y: pos2.y + perpY }\n        );\n        this.drawSingleBond(\n          { x: pos1.x - perpX, y: pos1.y - perpY },\n          { x: pos2.x - perpX, y: pos2.y - perpY }\n        );\n        break;\n    }\n\n    if (bond.type === 'aromatic') {\n      // For aromatic bonds, draw a dashed inner line to indicate aromaticity\n      this.drawAromaticIndicator(pos1, pos2);\n    }\n  }\n\n  /**\n   * Draw a single bond line\n   */\n  private drawSingleBond(pos1: Point2D, pos2: Point2D): void {\n    this.ctx.beginPath();\n    this.ctx.moveTo(pos1.x, pos1.y);\n    this.ctx.lineTo(pos2.x, pos2.y);\n    this.ctx.stroke();\n  }\n\n  /**\n   * Draw aromatic bond indicator (dashed inner line)\n   */\n  private drawAromaticIndicator(pos1: Point2D, pos2: Point2D): void {\n    // Draw a shorter dashed line slightly inside the ring\n    const dx = pos2.x - pos1.x;\n    const dy = pos2.y - pos1.y;\n    const length = Math.sqrt(dx * dx + dy * dy);\n    \n    // Create inner line (80% of original length, centered)\n    const innerStart = {\n      x: pos1.x + dx * 0.1,\n      y: pos1.y + dy * 0.1\n    };\n    const innerEnd = {\n      x: pos1.x + dx * 0.9,\n      y: pos1.y + dy * 0.9\n    };\n    \n    this.ctx.setLineDash([3, 3]);\n    this.ctx.strokeStyle = this.config.bondColor;\n    this.ctx.lineWidth = this.config.bondWidth * 0.7;\n    this.drawSingleBond(innerStart, innerEnd);\n    this.ctx.setLineDash([]);\n    this.ctx.lineWidth = this.config.bondWidth;\n  }\n\n  /**\n   * Draw aromatic bond (dashed) - legacy method\n   */\n  private drawAromaticBond(pos1: Point2D, pos2: Point2D): void {\n    this.ctx.setLineDash([5, 5]);\n    this.drawSingleBond(pos1, pos2);\n    this.ctx.setLineDash([]);\n  }\n\n  /**\n   * Render atoms\n   */\n  private renderAtoms(): void {\n    if (!this.molecule) return;\n\n    this.molecule.atoms.forEach((atom, index) => {\n      const pos = this.transformPoint(atom.position);\n      this.drawAtom(atom, pos, index);\n    });\n  }\n\n  /**\n   * Draw a single atom\n   */\n  private drawAtom(atom: Atom2D, pos: Point2D, index: number): void {\n    const color = this.config.atomColors[atom.element] || '#999999';\n    const radius = this.config.atomRadius * this.scale;\n\n    // Draw atom circle\n    this.ctx.fillStyle = color;\n    this.ctx.beginPath();\n    this.ctx.arc(pos.x, pos.y, radius, 0, 2 * Math.PI);\n    this.ctx.fill();\n\n    // Draw border\n    this.ctx.strokeStyle = '#333333';\n    this.ctx.lineWidth = 1;\n    this.ctx.stroke();\n\n    // Draw element symbol\n    this.ctx.fillStyle = atom.element === 'H' ? '#000000' : '#ffffff';\n    this.ctx.font = `${this.config.fontSize * this.scale}px Arial`;\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText(atom.element, pos.x, pos.y);\n  }\n\n  /**\n   * Render atom labels and charges\n   */\n  private renderLabels(): void {\n    if (!this.molecule) return;\n\n    this.ctx.fillStyle = '#333333';\n    this.ctx.font = `${10 * this.scale}px Arial`;\n\n    this.molecule.atoms.forEach((atom, index) => {\n      if (atom.charge && atom.charge !== 0) {\n        const pos = this.transformPoint(atom.position);\n        const chargeText = atom.charge > 0 ? `+${atom.charge}` : `${atom.charge}`;\n        \n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'top';\n        this.ctx.fillText(\n          chargeText,\n          pos.x + this.config.atomRadius * this.scale,\n          pos.y - this.config.atomRadius * this.scale\n        );\n      }\n    });\n  }\n\n  /**\n   * Transform point from molecule coordinates to canvas coordinates\n   */\n  private transformPoint(point: Point2D): Point2D {\n    return {\n      x: point.x * this.scale + this.offset.x,\n      y: point.y * this.scale + this.offset.y\n    };\n  }\n\n  /**\n   * Convert SMILES to 2D coordinates with proper chemical geometry\n   */\n  static smilesToMolecule2D(smiles: string): Molecule2D {\n    // Use the advanced molecular geometry generator for proper chemical structures\n    const advanced = Molecular2DGenerator.advancedSMILESTo2D(smiles);\n    \n    return {\n      atoms: advanced.atoms,\n      bonds: advanced.bonds.map(bond => ({\n        atom1: bond.atom1,\n        atom2: bond.atom2,\n        order: bond.order,\n        type: bond.type as 'single' | 'double' | 'triple' | 'aromatic'\n      })),\n      name: `SMILES: ${smiles}`\n    };\n  }\n\n  /**\n   * Export canvas as image\n   */\n  exportImage(format: 'png' | 'jpg' | 'svg' = 'png'): string {\n    if (format === 'svg') {\n      return this.exportSVG();\n    }\n    return this.canvas.toDataURL(`image/${format}`);\n  }\n\n  /**\n   * Export current molecule as SVG\n   */\n  exportSVG(options: {\n    interactive?: boolean;\n    animations?: boolean;\n    includeMetadata?: boolean;\n    optimizeSize?: boolean;\n  } = {}): string {\n    if (!this.molecule) {\n      return this.generateEmptySVG();\n    }\n\n    const svgElements: string[] = [];\n    const { width, height } = this.config;\n    \n    // SVG header\n    svgElements.push(`<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">`);\n    \n    if (options.includeMetadata) {\n      svgElements.push(`<title>Molecular Structure - ${this.molecule.atoms.length} atoms</title>`);\n      svgElements.push(`<desc>Generated by CREB-JS Canvas2DRenderer</desc>`);\n    }\n    \n    // Styles\n    svgElements.push('<defs><style type=\"text/css\">');\n    svgElements.push('.atom-circle { stroke: #000; stroke-width: 1; }');\n    svgElements.push('.atom-label { font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; dominant-baseline: central; }');\n    svgElements.push(`.bond-line { stroke: ${this.config.bondColor}; stroke-width: ${this.config.bondWidth}; stroke-linecap: round; }`);\n    \n    if (options.interactive) {\n      svgElements.push('.atom-group:hover .atom-circle { stroke-width: 2; stroke: #ff6b35; }');\n      svgElements.push('.atom-group { cursor: pointer; }');\n    }\n    \n    svgElements.push('</style></defs>');\n    \n    // Background\n    svgElements.push(`<rect width=\"100%\" height=\"100%\" fill=\"${this.config.backgroundColor}\"/>`);\n    \n    // Bonds\n    svgElements.push('<g id=\"bonds\">');\n    this.molecule.bonds.forEach(bond => {\n      const atom1 = this.molecule!.atoms[bond.atom1];\n      const atom2 = this.molecule!.atoms[bond.atom2];\n      const pos1 = this.transformPoint(atom1.position);\n      const pos2 = this.transformPoint(atom2.position);\n      \n      svgElements.push(`<line x1=\"${pos1.x}\" y1=\"${pos1.y}\" x2=\"${pos2.x}\" y2=\"${pos2.y}\" class=\"bond-line\"/>`);\n    });\n    svgElements.push('</g>');\n    \n    // Atoms\n    svgElements.push('<g id=\"atoms\">');\n    this.molecule.atoms.forEach((atom, index) => {\n      const pos = this.transformPoint(atom.position);\n      const color = this.config.atomColors[atom.element] || '#999999';\n      const radius = this.config.atomRadius * this.scale;\n      \n      svgElements.push('<g class=\"atom-group\">');\n      svgElements.push(`<circle cx=\"${pos.x}\" cy=\"${pos.y}\" r=\"${radius}\" fill=\"${color}\" class=\"atom-circle\"/>`);\n      \n      const textColor = this.getContrastingColor(color);\n      svgElements.push(`<text x=\"${pos.x}\" y=\"${pos.y}\" fill=\"${textColor}\" class=\"atom-label\">${atom.element}</text>`);\n      svgElements.push('</g>');\n    });\n    svgElements.push('</g>');\n    \n    // Metadata\n    if (options.includeMetadata) {\n      svgElements.push('<metadata>');\n      svgElements.push(`<rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">`);\n      svgElements.push(`<rdf:Description rdf:about=\"\">`);\n      svgElements.push(`<atomCount>${this.molecule.atoms.length}</atomCount>`);\n      svgElements.push(`<bondCount>${this.molecule.bonds.length}</bondCount>`);\n      svgElements.push(`<generator>CREB-JS Canvas2DRenderer</generator>`);\n      svgElements.push(`<timestamp>${new Date().toISOString()}</timestamp>`);\n      svgElements.push(`</rdf:Description>`);\n      svgElements.push(`</rdf:RDF>`);\n      svgElements.push('</metadata>');\n    }\n    \n    svgElements.push('</svg>');\n    \n    return svgElements.join('\\n');\n  }\n\n  /**\n   * Generate empty SVG placeholder\n   */\n  private generateEmptySVG(): string {\n    const { width, height } = this.config;\n    return `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"100%\" height=\"100%\" fill=\"${this.config.backgroundColor}\"/>\n      <text x=\"${width/2}\" y=\"${height/2 - 20}\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"24\" fill=\"#999\">2D Molecular Structure</text>\n      <text x=\"${width/2}\" y=\"${height/2 + 20}\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"14\" fill=\"#999\">Load a molecule to visualize</text>\n    </svg>`;\n  }\n\n  /**\n   * Get contrasting color for text readability\n   */\n  private getContrastingColor(backgroundColor: string): string {\n    const hex = backgroundColor.replace('#', '');\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n    const brightness = (r * 299 + g * 587 + b * 114) / 1000;\n    return brightness > 128 ? '#000000' : '#ffffff';\n  }\n\n  /**\n   * Download SVG as file\n   */\n  downloadSVG(filename: string = 'molecule.svg', options = {}): void {\n    const svgContent = this.exportSVG(options);\n    \n    if (typeof document !== 'undefined') {\n      const blob = new Blob([svgContent], { type: 'image/svg+xml' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename;\n      link.click();\n      URL.revokeObjectURL(url);\n    }\n  }\n\n  /**\n   * Reset view to default\n   */\n  resetView(): void {\n    this.scale = 1;\n    this.offset = { x: 0, y: 0 };\n    this.centerMolecule();\n    this.render();\n  }\n\n  /**\n   * Set molecule scale\n   */\n  setScale(scale: number): void {\n    this.scale = Math.max(0.1, Math.min(5, scale));\n    this.render();\n  }\n\n  /**\n   * Get current molecule data\n   */\n  getMolecule(): Molecule2D | null {\n    return this.molecule;\n  }\n}\n\nexport default Canvas2DRenderer;\n","/**\n * SVG Molecular Structure Renderer\n * Vector-based 2D molecular structure export\n */\n\nimport { Point2D, Atom2D, Bond2D, Molecule2D } from './Canvas2DRenderer';\n\nexport interface SVGConfig {\n  width: number;\n  height: number;\n  backgroundColor: string;\n  atomColors: Record<string, string>;\n  bondColor: string;\n  bondWidth: number;\n  fontSize: number;\n  atomRadius: number;\n  includeStyles: boolean;\n  includeInteractivity: boolean;\n}\n\nexport interface SVGExportOptions {\n  format: 'svg' | 'svg-inline' | 'svg-download';\n  filename?: string;\n  includeMetadata?: boolean;\n  optimizeSize?: boolean;\n  interactive?: boolean;\n  animations?: boolean;\n}\n\n/**\n * SVG-based molecular structure renderer\n */\nexport class SVGRenderer {\n  private config: SVGConfig;\n  private molecule: Molecule2D | null = null;\n  private scale = 1;\n  private offset = { x: 0, y: 0 };\n\n  constructor(config: Partial<SVGConfig> = {}) {\n    this.config = {\n      width: 600,\n      height: 400,\n      backgroundColor: '#ffffff',\n      atomColors: {\n        'H': '#ffffff',\n        'C': '#303030',\n        'N': '#3050f8',\n        'O': '#ff0d0d',\n        'F': '#90e050',\n        'P': '#ff8000',\n        'S': '#ffff30',\n        'Cl': '#1ff01f',\n        'Br': '#a62929',\n        'I': '#940094'\n      },\n      bondColor: '#000000',\n      bondWidth: 2,\n      fontSize: 14,\n      atomRadius: 20,\n      includeStyles: true,\n      includeInteractivity: false,\n      ...config\n    };\n  }\n\n  /**\n   * Load a molecule for rendering\n   */\n  loadMolecule(molecule: Molecule2D): void {\n    this.molecule = molecule;\n    this.centerMolecule();\n  }\n\n  /**\n   * Center the molecule in the SVG viewport\n   */\n  private centerMolecule(): void {\n    if (!this.molecule || this.molecule.atoms.length === 0) return;\n\n    // Calculate bounding box\n    let minX = Infinity, maxX = -Infinity;\n    let minY = Infinity, maxY = -Infinity;\n\n    this.molecule.atoms.forEach(atom => {\n      minX = Math.min(minX, atom.position.x);\n      maxX = Math.max(maxX, atom.position.x);\n      minY = Math.min(minY, atom.position.y);\n      maxY = Math.max(maxY, atom.position.y);\n    });\n\n    // Calculate center offset\n    const molWidth = maxX - minX;\n    const molHeight = maxY - minY;\n    const molCenterX = (minX + maxX) / 2;\n    const molCenterY = (minY + maxY) / 2;\n\n    // Calculate scale to fit molecule\n    const scaleX = (this.config.width * 0.8) / molWidth;\n    const scaleY = (this.config.height * 0.8) / molHeight;\n    this.scale = Math.min(scaleX, scaleY, 1);\n\n    // Center the molecule\n    this.offset.x = this.config.width / 2 - molCenterX * this.scale;\n    this.offset.y = this.config.height / 2 - molCenterY * this.scale;\n  }\n\n  /**\n   * Transform point from molecule coordinates to SVG coordinates\n   */\n  private transformPoint(point: Point2D): Point2D {\n    return {\n      x: point.x * this.scale + this.offset.x,\n      y: point.y * this.scale + this.offset.y\n    };\n  }\n\n  /**\n   * Generate SVG string for the current molecule\n   */\n  exportSVG(options: Partial<SVGExportOptions> = {}): string {\n    const opts: SVGExportOptions = {\n      format: 'svg',\n      includeMetadata: true,\n      optimizeSize: false,\n      interactive: this.config.includeInteractivity,\n      animations: false,\n      ...options\n    };\n\n    if (!this.molecule) {\n      return this.generateEmptySVG(opts);\n    }\n\n    const svgElements: string[] = [];\n    \n    // SVG header\n    svgElements.push(this.generateSVGHeader(opts));\n    \n    // Styles\n    if (this.config.includeStyles) {\n      svgElements.push(this.generateStyles(opts));\n    }\n    \n    // Background\n    svgElements.push(this.generateBackground());\n    \n    // Molecular structure\n    svgElements.push(this.generateBonds(opts));\n    svgElements.push(this.generateAtoms(opts));\n    \n    // Metadata\n    if (opts.includeMetadata) {\n      svgElements.push(this.generateMetadata());\n    }\n    \n    // SVG footer\n    svgElements.push('</svg>');\n    \n    return svgElements.join('\\n');\n  }\n\n  /**\n   * Generate SVG header with viewBox and namespaces\n   */\n  private generateSVGHeader(options: SVGExportOptions): string {\n    const { width, height } = this.config;\n    \n    let header = `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\"`;\n    header += ` xmlns=\"http://www.w3.org/2000/svg\"`;\n    \n    if (options.interactive) {\n      header += ` xmlns:xlink=\"http://www.w3.org/1999/xlink\"`;\n    }\n    \n    header += `>`;\n    \n    if (options.includeMetadata) {\n      header += `\\n<title>Molecular Structure - ${this.molecule?.atoms.length || 0} atoms</title>`;\n      header += `\\n<desc>Generated by CREB-JS Molecular Visualization System</desc>`;\n    }\n    \n    return header;\n  }\n\n  /**\n   * Generate CSS styles for the SVG\n   */\n  private generateStyles(options: SVGExportOptions): string {\n    let styles = '<defs><style type=\"text/css\">\\n';\n    \n    // Base styles\n    styles += `  .atom-circle { stroke: #000; stroke-width: 1; }\\n`;\n    styles += `  .atom-label { font-family: Arial, sans-serif; font-size: ${this.config.fontSize}px; text-anchor: middle; dominant-baseline: central; }\\n`;\n    styles += `  .bond-line { stroke: ${this.config.bondColor}; stroke-width: ${this.config.bondWidth}; stroke-linecap: round; }\\n`;\n    styles += `  .bond-double { stroke-dasharray: none; }\\n`;\n    styles += `  .bond-triple { stroke-width: ${this.config.bondWidth + 1}; }\\n`;\n    \n    // Interactive styles\n    if (options.interactive) {\n      styles += `  .atom-group:hover .atom-circle { stroke-width: 2; stroke: #ff6b35; }\\n`;\n      styles += `  .atom-group:hover .atom-label { font-weight: bold; }\\n`;\n      styles += `  .bond-line:hover { stroke: #ff6b35; stroke-width: ${this.config.bondWidth + 1}; }\\n`;\n      styles += `  .atom-group { cursor: pointer; }\\n`;\n    }\n    \n    // Animation styles\n    if (options.animations) {\n      styles += `  @keyframes atomPulse { 0%, 100% { r: ${this.config.atomRadius}; } 50% { r: ${this.config.atomRadius + 3}; } }\\n`;\n      styles += `  .atom-circle:hover { animation: atomPulse 1s infinite; }\\n`;\n    }\n    \n    styles += '</style></defs>\\n';\n    return styles;\n  }\n\n  /**\n   * Generate background rectangle\n   */\n  private generateBackground(): string {\n    return `<rect width=\"100%\" height=\"100%\" fill=\"${this.config.backgroundColor}\"/>`;\n  }\n\n  /**\n   * Generate SVG elements for bonds\n   */\n  private generateBonds(options: SVGExportOptions): string {\n    if (!this.molecule) return '';\n    \n    const bonds: string[] = [];\n    bonds.push('<g id=\"bonds\">');\n    \n    this.molecule.bonds.forEach((bond, index) => {\n      const atom1 = this.molecule!.atoms[bond.atom1];\n      const atom2 = this.molecule!.atoms[bond.atom2];\n      \n      const pos1 = this.transformPoint(atom1.position);\n      const pos2 = this.transformPoint(atom2.position);\n      \n      bonds.push(this.generateBondSVG(pos1, pos2, bond, index, options));\n    });\n    \n    bonds.push('</g>');\n    return bonds.join('\\n');\n  }\n\n  /**\n   * Generate SVG for a single bond\n   */\n  private generateBondSVG(pos1: Point2D, pos2: Point2D, bond: Bond2D, index: number, options: SVGExportOptions): string {\n    const bondClass = `bond-${bond.type || 'single'}`;\n    let bondElement = '';\n    \n    if (bond.order === 1 || !bond.order) {\n      // Single bond\n      bondElement = `<line x1=\"${pos1.x.toFixed(2)}\" y1=\"${pos1.y.toFixed(2)}\" x2=\"${pos2.x.toFixed(2)}\" y2=\"${pos2.y.toFixed(2)}\" class=\"bond-line ${bondClass}\"`;\n    } else if (bond.order === 2) {\n      // Double bond - two parallel lines\n      const dx = pos2.x - pos1.x;\n      const dy = pos2.y - pos1.y;\n      const length = Math.sqrt(dx * dx + dy * dy);\n      const offsetX = (-dy / length) * 3;\n      const offsetY = (dx / length) * 3;\n      \n      bondElement = `<g class=\"bond-double\">\n        <line x1=\"${(pos1.x + offsetX).toFixed(2)}\" y1=\"${(pos1.y + offsetY).toFixed(2)}\" x2=\"${(pos2.x + offsetX).toFixed(2)}\" y2=\"${(pos2.y + offsetY).toFixed(2)}\" class=\"bond-line\"/>\n        <line x1=\"${(pos1.x - offsetX).toFixed(2)}\" y1=\"${(pos1.y - offsetY).toFixed(2)}\" x2=\"${(pos2.x - offsetX).toFixed(2)}\" y2=\"${(pos2.y - offsetY).toFixed(2)}\" class=\"bond-line\"/>\n      </g>`;\n    } else if (bond.order === 3) {\n      // Triple bond - three parallel lines\n      const dx = pos2.x - pos1.x;\n      const dy = pos2.y - pos1.y;\n      const length = Math.sqrt(dx * dx + dy * dy);\n      const offsetX = (-dy / length) * 3;\n      const offsetY = (dx / length) * 3;\n      \n      bondElement = `<g class=\"bond-triple\">\n        <line x1=\"${pos1.x.toFixed(2)}\" y1=\"${pos1.y.toFixed(2)}\" x2=\"${pos2.x.toFixed(2)}\" y2=\"${pos2.y.toFixed(2)}\" class=\"bond-line\"/>\n        <line x1=\"${(pos1.x + offsetX).toFixed(2)}\" y1=\"${(pos1.y + offsetY).toFixed(2)}\" x2=\"${(pos2.x + offsetX).toFixed(2)}\" y2=\"${(pos2.y + offsetY).toFixed(2)}\" class=\"bond-line\"/>\n        <line x1=\"${(pos1.x - offsetX).toFixed(2)}\" y1=\"${(pos1.y - offsetY).toFixed(2)}\" x2=\"${(pos2.x - offsetX).toFixed(2)}\" y2=\"${(pos2.y - offsetY).toFixed(2)}\" class=\"bond-line\"/>\n      </g>`;\n    }\n    \n    if (options.interactive) {\n      bondElement += ` data-bond-id=\"${index}\" data-atoms=\"${bond.atom1},${bond.atom2}\"`;\n    }\n    \n    if (bondElement.includes('<g')) {\n      return bondElement;\n    } else {\n      return bondElement + '/>';\n    }\n  }\n\n  /**\n   * Generate SVG elements for atoms\n   */\n  private generateAtoms(options: SVGExportOptions): string {\n    if (!this.molecule) return '';\n    \n    const atoms: string[] = [];\n    atoms.push('<g id=\"atoms\">');\n    \n    this.molecule.atoms.forEach((atom, index) => {\n      atoms.push(this.generateAtomSVG(atom, index, options));\n    });\n    \n    atoms.push('</g>');\n    return atoms.join('\\n');\n  }\n\n  /**\n   * Generate SVG for a single atom\n   */\n  private generateAtomSVG(atom: Atom2D, index: number, options: SVGExportOptions): string {\n    const pos = this.transformPoint(atom.position);\n    const color = this.config.atomColors[atom.element] || '#cccccc';\n    const radius = this.config.atomRadius * this.scale;\n    \n    let atomGroup = `<g class=\"atom-group\" data-element=\"${atom.element}\" data-atom-id=\"${index}\">`;\n    \n    // Atom circle\n    atomGroup += `<circle cx=\"${pos.x.toFixed(2)}\" cy=\"${pos.y.toFixed(2)}\" r=\"${radius.toFixed(2)}\" fill=\"${color}\" class=\"atom-circle\"/>`;\n    \n    // Atom label\n    const textColor = this.getContrastingColor(color);\n    atomGroup += `<text x=\"${pos.x.toFixed(2)}\" y=\"${pos.y.toFixed(2)}\" fill=\"${textColor}\" class=\"atom-label\">${atom.element}</text>`;\n    \n    // Interactive elements\n    if (options.interactive) {\n      atomGroup += `<title>${atom.element} - Atom ${index + 1}</title>`;\n    }\n    \n    atomGroup += '</g>';\n    \n    return atomGroup;\n  }\n\n  /**\n   * Generate metadata section\n   */\n  private generateMetadata(): string {\n    if (!this.molecule) return '';\n    \n    const metadata = [\n      '<metadata>',\n      `  <rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:creb=\"https://creb.dev/ns#\">`,\n      `    <rdf:Description rdf:about=\"\">`,\n      `      <creb:atomCount>${this.molecule.atoms.length}</creb:atomCount>`,\n      `      <creb:bondCount>${this.molecule.bonds.length}</creb:bondCount>`,\n      `      <creb:generator>CREB-JS v${process.env.npm_package_version || '1.6.0'}</creb:generator>`,\n      `      <creb:timestamp>${new Date().toISOString()}</creb:timestamp>`,\n      `    </rdf:Description>`,\n      `  </rdf:RDF>`,\n      '</metadata>'\n    ];\n    \n    return metadata.join('\\n');\n  }\n\n  /**\n   * Generate empty SVG for when no molecule is loaded\n   */\n  private generateEmptySVG(options: SVGExportOptions): string {\n    const { width, height } = this.config;\n    \n    let svg = `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n    svg += `<rect width=\"100%\" height=\"100%\" fill=\"${this.config.backgroundColor}\"/>`;\n    svg += `<text x=\"${width/2}\" y=\"${height/2 - 20}\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"24\" fill=\"#999\">2D Molecular Structure</text>`;\n    svg += `<text x=\"${width/2}\" y=\"${height/2 + 20}\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"14\" fill=\"#999\">Load a molecule to visualize</text>`;\n    svg += '</svg>';\n    \n    return svg;\n  }\n\n  /**\n   * Get contrasting color for text\n   */\n  private getContrastingColor(backgroundColor: string): string {\n    // Simple contrast calculation\n    const hex = backgroundColor.replace('#', '');\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n    const brightness = (r * 299 + g * 587 + b * 114) / 1000;\n    \n    return brightness > 128 ? '#000000' : '#ffffff';\n  }\n\n  /**\n   * Export as downloadable SVG file\n   */\n  exportAsFile(filename: string = 'molecule.svg', options: Partial<SVGExportOptions> = {}): void {\n    const svgContent = this.exportSVG({ ...options, format: 'svg-download' });\n    \n    // Create download link (browser only)\n    if (typeof document !== 'undefined') {\n      const blob = new Blob([svgContent], { type: 'image/svg+xml' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename;\n      link.click();\n      URL.revokeObjectURL(url);\n    } else {\n      // Node.js environment - would need fs module\n      console.log('SVG content:', svgContent);\n    }\n  }\n\n  /**\n   * Get current molecule data\n   */\n  getMolecule(): Molecule2D | null {\n    return this.molecule;\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<SVGConfig>): void {\n    this.config = { ...this.config, ...config };\n    this.centerMolecule();\n  }\n}\n\nexport default SVGRenderer;\n","/**\n * Simplified Molecular Visualization System\n * Node.js and browser compatible implementation\n */\n\nimport { Canvas2DRenderer, type Molecule2D } from './Canvas2DRenderer';\n\nexport interface MolecularVisualizationConfig {\n  container: any; // HTMLElement or string\n  width?: number;\n  height?: number;\n  mode?: '2d' | '3d' | 'both';\n  backgroundColor?: string;\n  interactive?: boolean;\n}\n\nexport interface MolecularStyleOptions {\n  style?: 'stick' | 'sphere' | 'wireframe';\n  colorScheme?: 'element' | 'rainbow' | 'jmol';\n  showLabels?: boolean;\n  atomScale?: number;\n  bondWidth?: number;\n}\n\nexport interface MoleculeVisualizationData {\n  pdb?: string;\n  sdf?: string;\n  smiles?: string;\n  atoms?: Array<{\n    element: string;\n    x: number;\n    y: number;\n    z: number;\n  }>;\n  bonds?: Array<{\n    atom1: number;\n    atom2: number;\n    order: number;\n  }>;\n}\n\n/**\n * Main Molecular Visualization Engine\n */\nexport class MolecularVisualization {\n  private container: any;\n  private config: MolecularVisualizationConfig;\n  private canvas2d?: Canvas2DRenderer;\n  private viewer3d?: any;\n  private currentMolecule?: MoleculeVisualizationData;\n  private styleOptions: MolecularStyleOptions;\n\n  constructor(config: MolecularVisualizationConfig) {\n    this.config = {\n      width: 600,\n      height: 400,\n      mode: 'both',\n      backgroundColor: '#ffffff',\n      interactive: true,\n      ...config\n    };\n\n    this.styleOptions = {\n      style: 'stick',\n      colorScheme: 'element',\n      showLabels: false,\n      atomScale: 1.0,\n      bondWidth: 2\n    };\n\n    this.initializeContainer();\n    this.setupVisualization();\n  }\n\n  /**\n   * Initialize the visualization container\n   */\n  private initializeContainer(): void {\n    // Handle both string selector and direct element\n    if (typeof this.config.container === 'string') {\n      // In browser environment, try to find element\n      try {\n        const element = (globalThis as any)?.document?.getElementById?.(this.config.container);\n        this.container = element || this.createFallbackContainer();\n      } catch {\n        this.container = this.createFallbackContainer();\n      }\n    } else {\n      this.container = this.config.container || this.createFallbackContainer();\n    }\n  }\n\n  /**\n   * Create a fallback container for non-browser environments\n   */\n  private createFallbackContainer(): any {\n    return {\n      width: this.config.width || 600,\n      height: this.config.height || 400,\n      appendChild: () => {},\n      innerHTML: '',\n      style: {}\n    };\n  }\n\n  /**\n   * Setup the visualization components\n   */\n  private setupVisualization(): void {\n    if (this.config.mode === '2d' || this.config.mode === 'both') {\n      this.setup2DVisualization();\n    }\n\n    if (this.config.mode === '3d' || this.config.mode === 'both') {\n      this.setup3DVisualization();\n    }\n  }\n\n  /**\n   * Setup 2D canvas visualization\n   */\n  private setup2DVisualization(): void {\n    try {\n      // Try to create canvas element\n      let canvas: any;\n      \n      if ((globalThis as any)?.document?.createElement) {\n        canvas = (globalThis as any).document.createElement('canvas');\n        canvas.width = this.config.width || 600;\n        canvas.height = this.config.height || 400;\n        \n        if (this.container.appendChild) {\n          this.container.appendChild(canvas);\n        }\n      } else {\n        // Fallback for non-browser environments\n        canvas = {\n          width: this.config.width || 600,\n          height: this.config.height || 400,\n          getContext: () => ({\n            fillStyle: '',\n            strokeStyle: '',\n            lineWidth: 1,\n            lineCap: 'round',\n            font: '12px Arial',\n            textAlign: 'center',\n            textBaseline: 'middle',\n            fillRect: () => {},\n            fillText: () => {},\n            beginPath: () => {},\n            moveTo: () => {},\n            lineTo: () => {},\n            arc: () => {},\n            fill: () => {},\n            stroke: () => {},\n            setLineDash: () => {}\n          }),\n          toDataURL: () => 'data:image/png;base64,',\n          style: {}\n        };\n      }\n\n      this.canvas2d = new Canvas2DRenderer(canvas);\n    } catch (error) {\n      console.warn('Could not initialize 2D visualization:', error);\n    }\n  }\n\n  /**\n   * Setup 3D visualization\n   */\n  private setup3DVisualization(): void {\n    try {\n      // Check if 3Dmol.js is available\n      if ((globalThis as any)?.$3Dmol) {\n        this.initialize3DViewer();\n      } else {\n        this.initializeFallback3D();\n      }\n    } catch (error) {\n      console.warn('Could not initialize 3D visualization:', error);\n      this.initializeFallback3D();\n    }\n  }\n\n  /**\n   * Initialize 3Dmol.js viewer\n   */\n  private initialize3DViewer(): void {\n    try {\n      const $3Dmol = (globalThis as any).$3Dmol;\n      this.viewer3d = $3Dmol.createViewer(this.container, {\n        defaultcolors: $3Dmol.elementColors.defaultColors\n      });\n    } catch (error) {\n      console.warn('Failed to create 3Dmol viewer:', error);\n      this.initializeFallback3D();\n    }\n  }\n\n  /**\n   * Initialize fallback 3D visualization\n   */\n  private initializeFallback3D(): void {\n    this.viewer3d = {\n      addModel: () => ({ setStyle: () => {}, show: () => {} }),\n      setStyle: () => {},\n      zoomTo: () => {},\n      render: () => {},\n      clear: () => {},\n      resize: () => {}\n    };\n  }\n\n  /**\n   * Load and display a molecule\n   */\n  loadMolecule(data: MoleculeVisualizationData): void {\n    this.currentMolecule = data;\n\n    if (this.config.mode === '2d' || this.config.mode === 'both') {\n      this.render2D(data);\n    }\n\n    if (this.config.mode === '3d' || this.config.mode === 'both') {\n      this.render3D(data);\n    }\n  }\n\n  /**\n   * Render molecule in 2D\n   */\n  private render2D(data: MoleculeVisualizationData): void {\n    if (!this.canvas2d) return;\n\n    try {\n      let molecule2d: Molecule2D;\n\n      if (data.smiles) {\n        molecule2d = Canvas2DRenderer.smilesToMolecule2D(data.smiles);\n      } else if (data.atoms && data.bonds) {\n        molecule2d = {\n          atoms: data.atoms.map((atom, i) => ({\n            element: atom.element,\n            position: { x: atom.x * 50 + 100, y: atom.y * 50 + 100 },\n            bonds: data.bonds!\n              .filter(bond => bond.atom1 === i || bond.atom2 === i)\n              .map((_, j) => j)\n          })),\n          bonds: data.bonds.map(bond => ({\n            atom1: bond.atom1,\n            atom2: bond.atom2,\n            order: bond.order,\n            type: bond.order === 1 ? 'single' : bond.order === 2 ? 'double' : 'triple'\n          }))\n        };\n      } else {\n        // Default fallback molecule\n        molecule2d = Canvas2DRenderer.smilesToMolecule2D('C');\n      }\n\n      this.canvas2d.loadMolecule(molecule2d);\n    } catch (error) {\n      console.warn('Error rendering 2D molecule:', error);\n    }\n  }\n\n  /**\n   * Render molecule in 3D\n   */\n  private render3D(data: MoleculeVisualizationData): void {\n    if (!this.viewer3d) return;\n\n    try {\n      this.viewer3d.clear();\n\n      if (data.pdb) {\n        const model = this.viewer3d.addModel(data.pdb, 'pdb');\n        model.setStyle({}, { [this.styleOptions.style || 'stick']: {} });\n        model.show();\n      } else if (data.sdf) {\n        const model = this.viewer3d.addModel(data.sdf, 'sdf');\n        model.setStyle({}, { [this.styleOptions.style || 'stick']: {} });\n        model.show();\n      }\n\n      this.viewer3d.zoomTo();\n      this.viewer3d.render();\n    } catch (error) {\n      console.warn('Error rendering 3D molecule:', error);\n    }\n  }\n\n  /**\n   * Update visualization style\n   */\n  updateStyle(options: Partial<MolecularStyleOptions>): void {\n    this.styleOptions = { ...this.styleOptions, ...options };\n\n    if (this.currentMolecule) {\n      this.loadMolecule(this.currentMolecule);\n    }\n  }\n\n  /**\n   * Export current visualization as image\n   */\n  exportImage(format: 'png' | 'jpg' = 'png'): string {\n    if (this.canvas2d && (this.config.mode === '2d' || this.config.mode === 'both')) {\n      return this.canvas2d.exportImage(format);\n    }\n    return '';\n  }\n\n  /**\n   * Reset visualization to default view\n   */\n  resetView(): void {\n    if (this.canvas2d) {\n      this.canvas2d.resetView();\n    }\n\n    if (this.viewer3d && this.viewer3d.zoomTo) {\n      this.viewer3d.zoomTo();\n      this.viewer3d.render();\n    }\n  }\n\n  /**\n   * Resize the visualization\n   */\n  resize(width: number, height: number): void {\n    this.config.width = width;\n    this.config.height = height;\n\n    if (this.viewer3d && this.viewer3d.resize) {\n      this.viewer3d.resize();\n    }\n\n    // For 2D, would need to recreate canvas\n    if (this.canvas2d) {\n      this.setup2DVisualization();\n      if (this.currentMolecule) {\n        this.render2D(this.currentMolecule);\n      }\n    }\n  }\n\n  /**\n   * Get current molecule data\n   */\n  getMolecule(): MoleculeVisualizationData | undefined {\n    return this.currentMolecule;\n  }\n\n  /**\n   * Clean up resources\n   */\n  destroy(): void {\n    if (this.viewer3d && this.viewer3d.clear) {\n      this.viewer3d.clear();\n    }\n    \n    this.canvas2d = undefined;\n    this.viewer3d = undefined;\n    this.currentMolecule = undefined;\n  }\n}\n\n/**\n * Utility functions for molecular data conversion\n */\nexport class MolecularDataUtils {\n  /**\n   * Convert PDB string to basic atom/bond data\n   */\n  static parsePDB(pdbString: string): MoleculeVisualizationData {\n    const atoms: Array<{ element: string; x: number; y: number; z: number }> = [];\n    const bonds: Array<{ atom1: number; atom2: number; order: number }> = [];\n\n    const lines = pdbString.split('\\n');\n    \n    for (const line of lines) {\n      if (line.startsWith('ATOM') || line.startsWith('HETATM')) {\n        const element = line.substring(76, 78).trim() || line.substring(12, 16).trim().charAt(0);\n        const x = parseFloat(line.substring(30, 38));\n        const y = parseFloat(line.substring(38, 46));\n        const z = parseFloat(line.substring(46, 54));\n        \n        if (!isNaN(x) && !isNaN(y) && !isNaN(z)) {\n          atoms.push({ element, x, y, z });\n        }\n      }\n    }\n\n    // Simple bond detection based on distance\n    for (let i = 0; i < atoms.length; i++) {\n      for (let j = i + 1; j < atoms.length; j++) {\n        const dx = atoms[i].x - atoms[j].x;\n        const dy = atoms[i].y - atoms[j].y;\n        const dz = atoms[i].z - atoms[j].z;\n        const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n        \n        // Typical bond distance thresholds\n        if (distance < 2.0) {\n          bonds.push({ atom1: i, atom2: j, order: 1 });\n        }\n      }\n    }\n\n    return { pdb: pdbString, atoms, bonds };\n  }\n\n  /**\n   * Generate sample molecules for testing\n   */\n  static generateSampleMolecule(type: 'water' | 'methane' | 'benzene' = 'water'): MoleculeVisualizationData {\n    switch (type) {\n      case 'water':\n        return {\n          smiles: 'O',\n          atoms: [\n            { element: 'O', x: 0, y: 0, z: 0 },\n            { element: 'H', x: 0.757, y: 0.587, z: 0 },\n            { element: 'H', x: -0.757, y: 0.587, z: 0 }\n          ],\n          bonds: [\n            { atom1: 0, atom2: 1, order: 1 },\n            { atom1: 0, atom2: 2, order: 1 }\n          ]\n        };\n\n      case 'methane':\n        return {\n          smiles: 'C',\n          atoms: [\n            { element: 'C', x: 0, y: 0, z: 0 },\n            { element: 'H', x: 1.089, y: 0, z: 0 },\n            { element: 'H', x: -0.363, y: 1.027, z: 0 },\n            { element: 'H', x: -0.363, y: -0.513, z: 0.889 },\n            { element: 'H', x: -0.363, y: -0.513, z: -0.889 }\n          ],\n          bonds: [\n            { atom1: 0, atom2: 1, order: 1 },\n            { atom1: 0, atom2: 2, order: 1 },\n            { atom1: 0, atom2: 3, order: 1 },\n            { atom1: 0, atom2: 4, order: 1 }\n          ]\n        };\n\n      case 'benzene':\n        return {\n          smiles: 'c1ccccc1',\n          atoms: [\n            { element: 'C', x: 1.4, y: 0, z: 0 },\n            { element: 'C', x: 0.7, y: 1.2, z: 0 },\n            { element: 'C', x: -0.7, y: 1.2, z: 0 },\n            { element: 'C', x: -1.4, y: 0, z: 0 },\n            { element: 'C', x: -0.7, y: -1.2, z: 0 },\n            { element: 'C', x: 0.7, y: -1.2, z: 0 }\n          ],\n          bonds: [\n            { atom1: 0, atom2: 1, order: 1 },\n            { atom1: 1, atom2: 2, order: 2 },\n            { atom1: 2, atom2: 3, order: 1 },\n            { atom1: 3, atom2: 4, order: 2 },\n            { atom1: 4, atom2: 5, order: 1 },\n            { atom1: 5, atom2: 0, order: 2 }\n          ]\n        };\n\n      default:\n        return this.generateSampleMolecule('water');\n    }\n  }\n}\n\nexport default MolecularVisualization;\n","/**\n * Browser-compatible CREB-JS entry point\n * This file excludes Node.js-specific functionality to ensure browser compatibility\n */\n\n// Core chemistry functionality (browser-compatible)\nexport { ChemicalEquationBalancer } from './balancer';\nexport { Stoichiometry } from './stoichiometry';\nexport { ElementCounter, EquationParser, calculateMolarWeight } from './utils';\nexport * from './types';\nexport * from './constants';\n\n// Enhanced TypeScript Support (browser-compatible)\nexport {\n  // Branded Types\n  type ChemicalFormula,\n  type ElementSymbol,\n  type BalancedEquationString,\n  type SMILESNotation,\n  type InChINotation,\n  type CASNumber,\n  \n  // Advanced Types\n  type ValidElement,\n  type TypedElementCount,\n  type TypedCompound,\n  type TypedReaction,\n  type ReactionType,\n  type PhaseState,\n  \n  // Type Guards\n  isChemicalFormula,\n  isElementSymbol,\n  isBalancedEquation,\n  \n  // Utility Functions\n  parseFormula,\n  createChemicalFormula,\n  createElementSymbol,\n  \n  // Error Types\n  ChemicalFormulaError,\n  EquationBalancingError\n} from './advancedTypes';\n\nexport { EnhancedBalancer } from './enhancedBalancerSimple';\n\n// Enhanced PubChem-integrated classes (browser-compatible version)\nexport { \n  EnhancedChemicalEquationBalancer,\n  type EnhancedBalancedEquation,\n  type CompoundInfo \n} from './enhancedBalancer';\n\n// Browser-compatible visualization - import specific components\nexport { Canvas2DRenderer } from './visualization/Canvas2DRenderer';\nexport { SVGRenderer } from './visualization/SVGRenderer';\nexport { \n  MolecularVisualization,\n  type MolecularVisualizationConfig,\n  type MolecularStyleOptions,\n  type MoleculeVisualizationData\n} from './visualization/SimplifiedMolecularVisualization';\n\n// Import the class for use in factory function\nimport { MolecularVisualization as MolViz } from './visualization/SimplifiedMolecularVisualization';\n\n// Re-export specific visualization types and functions\nexport type MoleculeForVisualization = {\n  elements: string[];\n  formula?: string;\n};\n\nexport function convertMoleculeToVisualization(molecule: MoleculeForVisualization) {\n  const atoms = molecule.elements.map((element: string, index: number) => ({\n    element,\n    x: Math.random() * 4 - 2,\n    y: Math.random() * 4 - 2,\n    z: Math.random() * 4 - 2\n  }));\n\n  const bonds = [];\n  for (let i = 0; i < atoms.length - 1; i++) {\n    bonds.push({\n      atom1: i,\n      atom2: i + 1,\n      order: 1\n    });\n  }\n\n  return {\n    atoms,\n    bonds,\n    smiles: molecule.formula || `${molecule.elements.join('')}`\n  };\n}\n\n// Simple factory function that can be tree-shaken if not used\nexport function createMolecularVisualization(container: any, options: any = {}) {\n  return new MolViz({ container, ...options });\n}\n\n// Browser polyfill for EventEmitter\nexport class EventEmitter {\n  private events: { [key: string]: Function[] } = {};\n\n  on(event: string, listener: Function): this {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n    return this;\n  }\n\n  emit(event: string, ...args: any[]): boolean {\n    if (this.events[event]) {\n      this.events[event].forEach(listener => listener(...args));\n      return true;\n    }\n    return false;\n  }\n\n  removeListener(event: string, listener: Function): this {\n    if (this.events[event]) {\n      this.events[event] = this.events[event].filter(l => l !== listener);\n    }\n    return this;\n  }\n\n  removeAllListeners(event?: string): this {\n    if (event) {\n      delete this.events[event];\n    } else {\n      this.events = {};\n    }\n    return this;\n  }\n}\n"],"names":["global","CREBValidationError","EventEmitter","MolViz"],"mappings":"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AI,EAAE,IAAI;AACV,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,GAAG,EAAE,KAAK;AACV,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,GAAG,EAAE,MAAM;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,KAAK;AACX,IAAA,IAAI,EAAE,MAAM;AACZ,IAAA,IA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GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;AACpD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACvD,YAAA,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AACzD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACzD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AAC1D,YAAA,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AACzD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AAC1D,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AACzD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AAC1D,YAAA,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AACzD,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AAC1D,YAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI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E,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;;AAGjD,YAAA,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AACjD,YAAA,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AACjD,YAAA,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;;AAGjD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AAClD,YAAA,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ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","x_google_ignoreList":[3]}